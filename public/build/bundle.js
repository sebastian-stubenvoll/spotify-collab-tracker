//
// ---------------------------------------------
//
// Bundle of svelte-app
// Generated: 2021-08-06
//
// ---------------------------------------------
//
// Licenses:
//
// ---------------------------------------------
//
//
// svelte
// Version: 3.37.0
// Description: Cybernetically enhanced web apps
// URL: https://github.com/sveltejs/svelte.git
// Author: Rich Harris
//
// License:
// Copyright (c) 2016-21 [these people](https://github.com/sveltejs/svelte/graphs/contributors)
//
// Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
//
// The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
//
// 
//
// svelte-infinite-loading
// Version: 1.3.6
// Description: An infinite scroll component for Svelte apps
// URL: git+https://github.com/Skayo/svelte-infinite-loading.git
// Author: Skayo
//
// License:
// MIT License
//
// Copyright (c) 2020 Skayo
//
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the "Software"), to deal
// in the Software without restriction, including without limitation the rights
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
//
// The above copyright notice and this permission notice shall be included in all
// copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
// SOFTWARE.
//
// 
//
// jsstore
// Version: 4.2.6
// Description: A complete IndexedDB wrapper with SQL like syntax.
// URL: git+https://github.com/ujjwalguptaofficial/JsStore.git
// Author: Ujjwal Gupta
//
// License:
// const package = require('./package.json');
// var today = new Date();
// var dd = today.getDate();
// var mm = today.getMonth() + 1; //January is 0!
// var yyyy = today.getFullYear();
// if (dd < 10) {
// dd = '0' + dd;
// }
// if (mm < 10) {
// mm = '0' + mm;
// }
// var today = dd + '/' + mm + '/' + yyyy;
//
// exports.banner = `@license :${package.name} - V${package.version} - ${today}
// https://github.com/ujjwalguptaofficial/JsStore
// Copyright (c) ${yyyy} @Ujjwal Gupta; Licensed ${package.license}`;
// 
//
// @zerodevx/svelte-toast
// Version: 0.3.0
// Description: Simple elegant toast notifications
// URL: https://github.com/zerodevx/svelte-toast.git
// Author: Jason Lee
//
// License:
// ISC License
//
// Copyright (c) 2021, Jason Lee <jason@zerodevx.com>
//
// Permission to use, copy, modify, and/or distribute this software for any
// purpose with or without fee is hereby granted, provided that the above
// copyright notice and this permission notice appear in all copies.
//
// THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
// WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
// MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
// ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
// WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
// ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
// OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
//
// 
//
// fuzzy
// Version: 0.1.3
// Description: small, standalone fuzzy search / fuzzy filter. browser or node
// URL: git://github.com/mattyork/fuzzy.git
// Author: Matt York
//
// License:
// Copyright (c) 2012 Matt York
//
// Permission is hereby granted, free of charge, to any person
// obtaining a copy of this software and associated documentation
// files (the "Software"), to deal in the Software without
// restriction, including without limitation the rights to use,
// copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the
// Software is furnished to do so, subject to the following
// conditions:
//
// The above copyright notice and this permission notice shall be
// included in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
// OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
// NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
// HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
// WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
// FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
// OTHER DEALINGS IN THE SOFTWARE.
//
// 
//
// svelte-search
// Version: 1.1.0
// Description: Customizable search input component for Svelte
// URL: https://github.com/metonym/svelte-search.git
// Author: Eric Liu
//
// License:
// MIT License
//
// Copyright (c) 2020-present Eric Liu
//
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the "Software"), to deal
// in the Software without restriction, including without limitation the rights
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
//
// The above copyright notice and this permission notice shall be included in all
// copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
// SOFTWARE.
//
// 
//
// svelte-typeahead
// Version: 3.0.0
// Description: Accessible, fuzzy search typeahead component
// URL: https://github.com/metonym/svelte-typeahead.git
// Author: Eric Liu
//
// License:
// MIT License
//
// Copyright (c) 2020-present Eric Liu
//
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the "Software"), to deal
// in the Software without restriction, including without limitation the rights
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
//
// The above copyright notice and this permission notice shall be included in all
// copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
// SOFTWARE.
//
// 
//
// date-fns
// Version: 2.21.3
// Description: Modern JavaScript date utility library
// URL:
// Author:
//
// License:
// Copyright (C) 2020 Sasha Koss and Lesha Koss
//
// # License
//
// date-fns is licensed under the [MIT license](http://kossnocorp.mit-license.org).
// Read more about MIT at [TLDRLegal](https://tldrlegal.com/license/mit-license).
//
// 
//
// strict-uri-encode
// Version: 2.0.0
// Description: A stricter URI encode adhering to RFC 3986
// URL:
// Author: Kevin MÃ¥rtensson
//
// License:
// The MIT License (MIT)
//
// Copyright (c) Kevin Martensson <kevinmartensson@gmail.com> (github.com/kevva)
//
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the "Software"), to deal
// in the Software without restriction, including without limitation the rights
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
//
// The above copyright notice and this permission notice shall be included in
// all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
// THE SOFTWARE.
//
// 
//
// decode-uri-component
// Version: 0.2.0
// Description: A better decodeURIComponent
// URL:
// Author: Sam Verschueren
//
// License:
// The MIT License (MIT)
//
// Copyright (c) Sam Verschueren <sam.verschueren@gmail.com> (github.com/SamVerschueren)
//
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the "Software"), to deal
// in the Software without restriction, including without limitation the rights
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
//
// The above copyright notice and this permission notice shall be included in
// all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
// THE SOFTWARE.
//
// 
//
// split-on-first
// Version: 1.1.0
// Description: Split a string on the first occurance of a given separator
// URL:
// Author: Sindre Sorhus
//
// License:
// MIT License
//
// Copyright (c) Sindre Sorhus <sindresorhus@gmail.com> (sindresorhus.com)
//
// Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
//
// The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
//
// 
//
// filter-obj
// Version: 1.1.0
// Description: Filter object keys and values into a new object
// URL:
// Author: Sindre Sorhus
//
// License:
// The MIT License (MIT)
//
// Copyright (c) Sindre Sorhus <sindresorhus@gmail.com> (sindresorhus.com)
//
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the "Software"), to deal
// in the Software without restriction, including without limitation the rights
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
//
// The above copyright notice and this permission notice shall be included in
// all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
// THE SOFTWARE.
//
// 
//
// query-string
// Version: 7.0.0
// Description: Parse and stringify URL query strings
// URL:
// Author: Sindre Sorhus
//
// License:
// MIT License
//
// Copyright (c) Sindre Sorhus <sindresorhus@gmail.com> (http://sindresorhus.com)
//
// Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
//
// The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
//
// 
//
//
// ---------------------------------------------
//

var app=function(){"use strict";function e(){}const t=e=>e;function n(e,t){for(const n in t)e[n]=t[n];return e}function r(e){return e()}function o(){return Object.create(null)}function i(e){e.forEach(r)}function s(e){return"function"==typeof e}function a(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function u(t,...n){if(null==t)return e;const r=t.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function c(e){let t;return u(e,(e=>t=e))(),t}function l(e,t,n){e.$$.on_destroy.push(u(t,n))}function f(e,t,n,r){if(e){const o=h(e,t,n,r);return e[0](o)}}function h(e,t,r,o){return e[1]&&o?n(r.ctx.slice(),e[1](o(t))):r.ctx}function d(e,t,n,r,o,i,s){const a=function(e,t,n,r){if(e[2]&&r){const o=e[2](r(n));if(void 0===t.dirty)return o;if("object"==typeof o){const e=[],n=Math.max(t.dirty.length,o.length);for(let r=0;r<n;r+=1)e[r]=t.dirty[r]|o[r];return e}return t.dirty|o}return t.dirty}(t,r,o,i);if(a){const o=h(t,n,r,s);e.p(o,a)}}function p(e){const t={};for(const n in e)"$"!==n[0]&&(t[n]=e[n]);return t}function m(e,t){const n={};t=new Set(t);for(const r in e)t.has(r)||"$"===r[0]||(n[r]=e[r]);return n}const y="undefined"!=typeof window;let g=y?()=>window.performance.now():()=>Date.now(),v=y?e=>requestAnimationFrame(e):e;const b=new Set;function w(e){b.forEach((t=>{t.c(e)||(b.delete(t),t.f())})),0!==b.size&&v(w)}function _(e){let t;return 0===b.size&&v(w),{promise:new Promise((n=>{b.add(t={c:e,f:n})})),abort(){b.delete(t)}}}function k(e,t){e.appendChild(t)}function x(e,t,n){e.insertBefore(t,n||null)}function $(e){e.parentNode.removeChild(e)}function C(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function T(e){return document.createElement(e)}function S(e){return document.createTextNode(e)}function E(){return S(" ")}function O(){return S("")}function q(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function j(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function A(e,t){const n=Object.getOwnPropertyDescriptors(e.__proto__);for(const r in t)null==t[r]?e.removeAttribute(r):"style"===r?e.style.cssText=t[r]:"__value"===r?e.value=e[r]=t[r]:n[r]&&n[r].set?e[r]=t[r]:j(e,r,t[r])}function I(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function N(e,t){e.value=null==t?"":t}function D(e,t,n){e.classList[n?"add":"remove"](t)}function R(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}class W{constructor(e=null){this.a=e,this.e=this.n=null}m(e,t,n=null){this.e||(this.e=T(t.nodeName),this.t=t,this.h(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)x(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach($)}}const Q=new Set;let M,L=0;function B(e,t,n,r,o,i,s,a=0){const u=16.666/r;let c="{\n";for(let e=0;e<=1;e+=u){const r=t+(n-t)*i(e);c+=100*e+`%{${s(r,1-r)}}\n`}const l=c+`100% {${s(n,1-n)}}\n}`,f=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(l)}_${a}`,h=e.ownerDocument;Q.add(h);const d=h.__svelte_stylesheet||(h.__svelte_stylesheet=h.head.appendChild(T("style")).sheet),p=h.__svelte_rules||(h.__svelte_rules={});p[f]||(p[f]=!0,d.insertRule(`@keyframes ${f} ${l}`,d.cssRules.length));const m=e.style.animation||"";return e.style.animation=`${m?`${m}, `:""}${f} ${r}ms linear ${o}ms 1 both`,L+=1,f}function P(e,t){const n=(e.style.animation||"").split(", "),r=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),o=n.length-r.length;o&&(e.style.animation=r.join(", "),L-=o,L||v((()=>{L||(Q.forEach((e=>{const t=e.__svelte_stylesheet;let n=t.cssRules.length;for(;n--;)t.deleteRule(n);e.__svelte_rules={}})),Q.clear())})))}function F(n,r,o,i){if(!r)return e;const s=n.getBoundingClientRect();if(r.left===s.left&&r.right===s.right&&r.top===s.top&&r.bottom===s.bottom)return e;const{delay:a=0,duration:u=300,easing:c=t,start:l=g()+a,end:f=l+u,tick:h=e,css:d}=o(n,{from:r,to:s},i);let p,m=!0,y=!1;function v(){d&&P(n,p),m=!1}return _((e=>{if(!y&&e>=l&&(y=!0),y&&e>=f&&(h(1,0),v()),!m)return!1;if(y){const t=0+1*c((e-l)/u);h(t,1-t)}return!0})),d&&(p=B(n,0,1,u,a,c,d)),a||(y=!0),h(0,1),v}function U(e){const t=getComputedStyle(e);if("absolute"!==t.position&&"fixed"!==t.position){const{width:n,height:r}=t,o=e.getBoundingClientRect();e.style.position="absolute",e.style.width=n,e.style.height=r,V(e,o)}}function V(e,t){const n=e.getBoundingClientRect();if(t.left!==n.left||t.top!==n.top){const r=getComputedStyle(e),o="none"===r.transform?"":r.transform;e.style.transform=`${o} translate(${t.left-n.left}px, ${t.top-n.top}px)`}}function G(e){M=e}function J(){if(!M)throw new Error("Function called outside component initialization");return M}function K(e){J().$$.on_mount.push(e)}function H(e){J().$$.after_update.push(e)}function Y(e){J().$$.on_destroy.push(e)}function z(){const e=J();return(t,n)=>{const r=e.$$.callbacks[t];if(r){const o=R(t,n);r.slice().forEach((t=>{t.call(e,o)}))}}}function X(e,t){J().$$.context.set(e,t)}function Z(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach((e=>e(t)))}const ee=[],te=[],ne=[],re=[],oe=Promise.resolve();let ie=!1;function se(){ie||(ie=!0,oe.then(he))}function ae(){return se(),oe}function ue(e){ne.push(e)}function ce(e){re.push(e)}let le=!1;const fe=new Set;function he(){if(!le){le=!0;do{for(let e=0;e<ee.length;e+=1){const t=ee[e];G(t),de(t.$$)}for(G(null),ee.length=0;te.length;)te.pop()();for(let e=0;e<ne.length;e+=1){const t=ne[e];fe.has(t)||(fe.add(t),t())}ne.length=0}while(ee.length);for(;re.length;)re.pop()();ie=!1,le=!1,fe.clear()}}function de(e){if(null!==e.fragment){e.update(),i(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ue)}}let pe;function me(){return pe||(pe=Promise.resolve(),pe.then((()=>{pe=null}))),pe}function ye(e,t,n){e.dispatchEvent(R(`${t?"intro":"outro"}${n}`))}const ge=new Set;let ve;function be(){ve={r:0,c:[],p:ve}}function we(){ve.r||i(ve.c),ve=ve.p}function _e(e,t){e&&e.i&&(ge.delete(e),e.i(t))}function ke(e,t,n,r){if(e&&e.o){if(ge.has(e))return;ge.add(e),ve.c.push((()=>{ge.delete(e),r&&(n&&e.d(1),r())})),e.o(t)}}const xe={duration:0};function $e(n,r,o){let i,a,u=r(n,o),c=!1,l=0;function f(){i&&P(n,i)}function h(){const{delay:r=0,duration:o=300,easing:s=t,tick:h=e,css:d}=u||xe;d&&(i=B(n,0,1,o,r,s,d,l++)),h(0,1);const p=g()+r,m=p+o;a&&a.abort(),c=!0,ue((()=>ye(n,!0,"start"))),a=_((e=>{if(c){if(e>=m)return h(1,0),ye(n,!0,"end"),f(),c=!1;if(e>=p){const t=s((e-p)/o);h(t,1-t)}}return c}))}let d=!1;return{start(){d||(P(n),s(u)?(u=u(),me().then(h)):h())},invalidate(){d=!1},end(){c&&(f(),c=!1)}}}function Ce(n,r,o){let a,u=r(n,o),c=!0;const l=ve;function f(){const{delay:r=0,duration:o=300,easing:s=t,tick:f=e,css:h}=u||xe;h&&(a=B(n,1,0,o,r,s,h));const d=g()+r,p=d+o;ue((()=>ye(n,!1,"start"))),_((e=>{if(c){if(e>=p)return f(0,1),ye(n,!1,"end"),--l.r||i(l.c),!1;if(e>=d){const t=s((e-d)/o);f(1-t,t)}}return c}))}return l.r+=1,s(u)?me().then((()=>{u=u(),f()})):f(),{end(e){e&&u.tick&&u.tick(1,0),c&&(a&&P(n,a),c=!1)}}}function Te(n,r,o,a){let u=r(n,o),c=a?0:1,l=null,f=null,h=null;function d(){h&&P(n,h)}function p(e,t){const n=e.b-c;return t*=Math.abs(n),{a:c,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function m(r){const{delay:o=0,duration:s=300,easing:a=t,tick:m=e,css:y}=u||xe,v={start:g()+o,b:r};r||(v.group=ve,ve.r+=1),l||f?f=v:(y&&(d(),h=B(n,c,r,s,o,a,y)),r&&m(0,1),l=p(v,s),ue((()=>ye(n,r,"start"))),_((e=>{if(f&&e>f.start&&(l=p(f,s),f=null,ye(n,l.b,"start"),y&&(d(),h=B(n,c,l.b,l.duration,0,a,u.css))),l)if(e>=l.end)m(c=l.b,1-c),ye(n,l.b,"end"),f||(l.b?d():--l.group.r||i(l.group.c)),l=null;else if(e>=l.start){const t=e-l.start;c=l.a+l.d*a(t/l.duration),m(c,1-c)}return!(!l&&!f)})))}return{run(e){s(u)?me().then((()=>{u=u(),m(e)})):m(e)},end(){d(),l=f=null}}}function Se(e,t){const n=t.token={};function r(e,r,o,i){if(t.token!==n)return;t.resolved=i;let s=t.ctx;void 0!==o&&(s=s.slice(),s[o]=i);const a=e&&(t.current=e)(s);let u=!1;t.block&&(t.blocks?t.blocks.forEach(((e,n)=>{n!==r&&e&&(be(),ke(e,1,1,(()=>{t.blocks[n]===e&&(t.blocks[n]=null)})),we())})):t.block.d(1),a.c(),_e(a,1),a.m(t.mount(),t.anchor),u=!0),t.block=a,t.blocks&&(t.blocks[r]=a),u&&he()}if((o=e)&&"object"==typeof o&&"function"==typeof o.then){const n=J();if(e.then((e=>{G(n),r(t.then,1,t.value,e),G(null)}),(e=>{if(G(n),r(t.catch,2,t.error,e),G(null),!t.hasCatch)throw e})),t.current!==t.pending)return r(t.pending,0),!0}else{if(t.current!==t.then)return r(t.then,1,t.value,e),!0;t.resolved=e}var o}const Ee="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function Oe(e,t){e.f(),function(e,t){ke(e,1,1,(()=>{t.delete(e.key)}))}(e,t)}function qe(e,t,n,r,o,i,s,a,u,c,l,f){let h=e.length,d=i.length,p=h;const m={};for(;p--;)m[e[p].key]=p;const y=[],g=new Map,v=new Map;for(p=d;p--;){const e=f(o,i,p),a=n(e);let u=s.get(a);u?r&&u.p(e,t):(u=c(a,e),u.c()),g.set(a,y[p]=u),a in m&&v.set(a,Math.abs(p-m[a]))}const b=new Set,w=new Set;function _(e){_e(e,1),e.m(a,l),s.set(e.key,e),l=e.first,d--}for(;h&&d;){const t=y[d-1],n=e[h-1],r=t.key,o=n.key;t===n?(l=t.first,h--,d--):g.has(o)?!s.has(r)||b.has(r)?_(t):w.has(o)?h--:v.get(r)>v.get(o)?(w.add(r),_(t)):(b.add(o),h--):(u(n,s),h--)}for(;h--;){const t=e[h];g.has(t.key)||u(t,s)}for(;d;)_(y[d-1]);return y}function je(e,t){const n={},r={},o={$$scope:1};let i=e.length;for(;i--;){const s=e[i],a=t[i];if(a){for(const e in s)e in a||(r[e]=1);for(const e in a)o[e]||(n[e]=a[e],o[e]=1);e[i]=a}else for(const e in s)o[e]=1}for(const e in r)e in n||(n[e]=void 0);return n}function Ae(e){return"object"==typeof e&&null!==e?e:{}}function Ie(e,t,n){const r=e.$$.props[t];void 0!==r&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function Ne(e){e&&e.c()}function De(e,t,n,o){const{fragment:a,on_mount:u,on_destroy:c,after_update:l}=e.$$;a&&a.m(t,n),o||ue((()=>{const t=u.map(r).filter(s);c?c.push(...t):i(t),e.$$.on_mount=[]})),l.forEach(ue)}function Re(e,t){const n=e.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function We(t,n,r,s,a,u,c=[-1]){const l=M;G(t);const f=t.$$={fragment:null,ctx:null,props:u,update:e,not_equal:a,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:n.context||[]),callbacks:o(),dirty:c,skip_bound:!1};let h=!1;if(f.ctx=r?r(t,n.props||{},((e,n,...r)=>{const o=r.length?r[0]:n;return f.ctx&&a(f.ctx[e],f.ctx[e]=o)&&(!f.skip_bound&&f.bound[e]&&f.bound[e](o),h&&function(e,t){-1===e.$$.dirty[0]&&(ee.push(e),se(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(t,e)),n})):[],f.update(),h=!0,i(f.before_update),f.fragment=!!s&&s(f.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);f.fragment&&f.fragment.l(e),e.forEach($)}else f.fragment&&f.fragment.c();n.intro&&_e(t.$$.fragment),De(t,n.target,n.anchor,n.customElement),he()}G(l)}class Qe{$destroy(){Re(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function Me(e){let t;return{c(){t=T("i"),j(t,"class","loading-default svelte-10h86fq")},m(e,n){x(e,t,n)},d(e){e&&$(t)}}}function Le(e){let t;return{c(){t=T("span"),t.innerHTML='<span class="wave-item svelte-10h86fq"></span> \n\t\t<span class="wave-item svelte-10h86fq"></span> \n\t\t<span class="wave-item svelte-10h86fq"></span> \n\t\t<span class="wave-item svelte-10h86fq"></span> \n\t\t<span class="wave-item svelte-10h86fq"></span>',j(t,"class","loading-wave-dots svelte-10h86fq")},m(e,n){x(e,t,n)},d(e){e&&$(t)}}}function Be(e){let t;return{c(){t=T("i"),j(t,"class","loading-spiral svelte-10h86fq")},m(e,n){x(e,t,n)},d(e){e&&$(t)}}}function Pe(e){let t;return{c(){t=T("span"),t.innerHTML='<span class="circle-item svelte-10h86fq"></span> \n\t\t<span class="circle-item svelte-10h86fq"></span> \n\t\t<span class="circle-item svelte-10h86fq"></span> \n\t\t<span class="circle-item svelte-10h86fq"></span> \n\t\t<span class="circle-item svelte-10h86fq"></span> \n\t\t<span class="circle-item svelte-10h86fq"></span> \n\t\t<span class="circle-item svelte-10h86fq"></span> \n\t\t<span class="circle-item svelte-10h86fq"></span>',j(t,"class","loading-circles svelte-10h86fq")},m(e,n){x(e,t,n)},d(e){e&&$(t)}}}function Fe(e){let t;return{c(){t=T("span"),t.innerHTML='<span class="bubble-item svelte-10h86fq"></span> \n\t\t<span class="bubble-item svelte-10h86fq"></span> \n\t\t<span class="bubble-item svelte-10h86fq"></span> \n\t\t<span class="bubble-item svelte-10h86fq"></span> \n\t\t<span class="bubble-item svelte-10h86fq"></span> \n\t\t<span class="bubble-item svelte-10h86fq"></span> \n\t\t<span class="bubble-item svelte-10h86fq"></span> \n\t\t<span class="bubble-item svelte-10h86fq"></span>',j(t,"class","loading-bubbles svelte-10h86fq")},m(e,n){x(e,t,n)},d(e){e&&$(t)}}}function Ue(t){let n;function r(e,t){return"bubbles"===e[0]?Fe:"circles"===e[0]?Pe:"spiral"===e[0]?Be:"wavedots"===e[0]?Le:Me}let o=r(t),i=o(t);return{c(){i.c(),n=O()},m(e,t){i.m(e,t),x(e,n,t)},p(e,[t]){o!==(o=r(e))&&(i.d(1),i=o(e),i&&(i.c(),i.m(n.parentNode,n)))},i:e,o:e,d(e){i.d(e),e&&$(n)}}}function Ve(e,t,n){let{spinner:r=""}=t;return e.$$set=e=>{"spinner"in e&&n(0,r=e.spinner)},[r]}class Ge extends Qe{constructor(e){super(),We(this,e,Ve,Ue,a,{spinner:0})}}const Je=e=>({}),Ke=e=>({attemptLoad:e[7]}),He=e=>({}),Ye=e=>({}),ze=e=>({}),Xe=e=>({}),Ze=e=>({isFirstLoad:2&e}),et=e=>({isFirstLoad:e[1]});function tt(e){let t,n;const r=e[15].spinner,o=f(r,e,e[14],et),i=o||function(e){let t,n;return t=new Ge({props:{spinner:e[0]}}),{c(){Ne(t.$$.fragment)},m(e,r){De(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.spinner=e[0]),t.$set(r)},i(e){n||(_e(t.$$.fragment,e),n=!0)},o(e){ke(t.$$.fragment,e),n=!1},d(e){Re(t,e)}}}(e);return{c(){t=T("div"),i&&i.c(),j(t,"class","infinite-status-prompt")},m(e,r){x(e,t,r),i&&i.m(t,null),n=!0},p(e,t){o?o.p&&16386&t&&d(o,r,e,e[14],t,Ze,et):i&&i.p&&1&t&&i.p(e,t)},i(e){n||(_e(i,e),n=!0)},o(e){ke(i,e),n=!1},d(e){e&&$(t),i&&i.d(e)}}}function nt(e){let t,n;const r=e[15].noResults,o=f(r,e,e[14],Xe),i=o||function(e){let t;return{c(){t=S("No results :(")},m(e,n){x(e,t,n)},d(e){e&&$(t)}}}();return{c(){t=T("div"),i&&i.c(),j(t,"class","infinite-status-prompt")},m(e,r){x(e,t,r),i&&i.m(t,null),n=!0},p(e,t){o&&o.p&&16384&t&&d(o,r,e,e[14],t,ze,Xe)},i(e){n||(_e(i,e),n=!0)},o(e){ke(i,e),n=!1},d(e){e&&$(t),i&&i.d(e)}}}function rt(e){let t,n;const r=e[15].noMore,o=f(r,e,e[14],Ye),i=o||function(e){let t;return{c(){t=S("No more data :)")},m(e,n){x(e,t,n)},d(e){e&&$(t)}}}();return{c(){t=T("div"),i&&i.c(),j(t,"class","infinite-status-prompt")},m(e,r){x(e,t,r),i&&i.m(t,null),n=!0},p(e,t){o&&o.p&&16384&t&&d(o,r,e,e[14],t,He,Ye)},i(e){n||(_e(i,e),n=!0)},o(e){ke(i,e),n=!1},d(e){e&&$(t),i&&i.d(e)}}}function ot(t){let n,r;const o=t[15].error,i=f(o,t,t[14],Ke),s=i||function(t){let n,r,o,i,s,a;return{c(){n=S("Oops, something went wrong :(\n\t\t\t\t"),r=T("br"),o=E(),i=T("button"),i.textContent="Retry",j(i,"class","btn-try-infinite svelte-o3w4bf")},m(e,u){x(e,n,u),x(e,r,u),x(e,o,u),x(e,i,u),s||(a=q(i,"click",t[7]),s=!0)},p:e,d(e){e&&$(n),e&&$(r),e&&$(o),e&&$(i),s=!1,a()}}}(t);return{c(){n=T("div"),s&&s.c(),j(n,"class","infinite-status-prompt")},m(e,t){x(e,n,t),s&&s.m(n,null),r=!0},p(e,t){i&&i.p&&16384&t&&d(i,o,e,e[14],t,Je,Ke)},i(e){r||(_e(s,e),r=!0)},o(e){ke(s,e),r=!1},d(e){e&&$(n),s&&s.d(e)}}}function it(e){let t,n,r,o,i,s=e[3]&&tt(e),a=e[5]&&nt(e),u=e[6]&&rt(e),c=e[4]&&ot(e);return{c(){t=T("div"),s&&s.c(),n=E(),a&&a.c(),r=E(),u&&u.c(),o=E(),c&&c.c(),j(t,"class","infinite-loading-container svelte-o3w4bf")},m(l,f){x(l,t,f),s&&s.m(t,null),k(t,n),a&&a.m(t,null),k(t,r),u&&u.m(t,null),k(t,o),c&&c.m(t,null),e[16](t),i=!0},p(e,[i]){e[3]?s?(s.p(e,i),8&i&&_e(s,1)):(s=tt(e),s.c(),_e(s,1),s.m(t,n)):s&&(be(),ke(s,1,1,(()=>{s=null})),we()),e[5]?a?(a.p(e,i),32&i&&_e(a,1)):(a=nt(e),a.c(),_e(a,1),a.m(t,r)):a&&(be(),ke(a,1,1,(()=>{a=null})),we()),e[6]?u?(u.p(e,i),64&i&&_e(u,1)):(u=rt(e),u.c(),_e(u,1),u.m(t,o)):u&&(be(),ke(u,1,1,(()=>{u=null})),we()),e[4]?c?(c.p(e,i),16&i&&_e(c,1)):(c=ot(e),c.c(),_e(c,1),c.m(t,null)):c&&(be(),ke(c,1,1,(()=>{c=null})),we())},i(e){i||(_e(s),_e(a),_e(u),_e(c),i=!0)},o(e){ke(s),ke(a),ke(u),ke(c),i=!1},d(n){n&&$(t),s&&s.d(),a&&a.d(),u&&u.d(),c&&c.d(),e[16](null)}}}const st=["executed the callback function more than 10 times for a short time, it looks like searched a wrong scroll wrapper that doest not has fixed height or maximum height, please check it. If you want to force to set a element as scroll wrapper rather than automatic searching, you can do this:","\x3c!-- add a special attribute for the real scroll wrapper (can also be data-infinite-wrapper) --\x3e","<div infinite-wrapper>","  ...","  \x3c!-- set forceUseInfiniteWrapper --\x3e","  <InfiniteLoading forceUseInfiniteWrapper>","</div>","or",'<div class="infinite-wrapper">',"  ...","  \x3c!-- set forceUseInfiniteWrapper as css selector of the real scroll wrapper --\x3e",'  <InfiniteLoading forceUseInfiniteWrapper=".infinite-wrapper" />',"</div>"].join("\n"),at=(()=>{let e=!1;try{const t=Object.defineProperty({},"passive",{get:()=>(e={passive:!0},!0)});window.addEventListener("testpassive",t,t),window.remove("testpassive",t,t)}catch(e){}return e})(),ut={timers:[],caches:[],throttle(e){-1===this.caches.indexOf(e)&&(this.caches.push(e),this.timers.push(setTimeout((()=>{e(),this.caches.splice(this.caches.indexOf(e),1),this.timers.shift()}),50)))},reset(){this.timers.forEach((e=>{clearTimeout(e)})),this.timers.length=0,this.caches=[]}},ct={isChecked:!1,timer:null,times:0,track(){this.times+=1,clearTimeout(this.timer),this.timer=setTimeout((()=>{this.isChecked=!0}),1e3),this.times>10&&(console.error(st),this.isChecked=!0)}},lt={key:"_infiniteScrollHeight",getScrollElement:e=>e===window?document.documentElement:e,save(e){const t=this.getScrollElement(e);t[this.key]=t.scrollHeight},restore(e){const t=this.getScrollElement(e);"number"==typeof t[this.key]&&(t.scrollTop=t.scrollHeight-t[this.key]+t.scrollTop),this.remove(t)},remove(e){void 0!==e[this.key]&&delete e[this.key]}};function ft(e){return e.offsetWidth+e.offsetHeight>0}function ht(e,t,n){let r,o,i,s,{$$slots:a={},$$scope:u}=t;const c=z(),l=0,f=1,h=2,d=3;let p,m,{distance:y=100}=t,{spinner:g="default"}=t,{direction:v="bottom"}=t,{forceUseInfiniteWrapper:b=!1}=t,{identifier:w=+new Date}=t,_=!0,k=l,x=!1;const $={loaded:async()=>{n(1,_=!1),"top"===v&&(await ae(),lt.restore(m)),k===f&&(await ae(),await T(!0))},complete:async()=>{n(12,k=h),await ae(),m.removeEventListener("scroll",C,at)},reset:async()=>{n(12,k=l),n(1,_=!0),lt.remove(m),m.addEventListener("scroll",C,at),setTimeout((()=>{ut.reset(),C()}),1)},error:()=>{n(12,k=d),ut.reset()}};function C(e){k===l&&(e&&e.constructor===Event&&ft(p)?ut.throttle(T):T())}async function T(e){k!==h&&ft(p)&&function(){let e;if("top"===v)e="number"==typeof m.scrollTop?m.scrollTop:m.pageYOffset;else{e=p.getBoundingClientRect().top-(m===window?window.innerHeight:m.getBoundingClientRect().bottom)}return e}()<=y?(n(12,k=f),"top"===v&&(await ae(),lt.save(m)),c("infinite",$),!e||b||ct.isChecked||ct.track()):k===f&&n(12,k=l)}function S(e=p){let t;return"string"==typeof b&&(t=document.querySelector(b)),t||("BODY"===e.tagName?t=window:(!b&&["scroll","auto"].indexOf(getComputedStyle(e).overflowY)>-1||e.hasAttribute("infinite-wrapper")||e.hasAttribute("data-infinite-wrapper"))&&(t=e)),t||S(e.parentNode)}function E(){x&&(m=S())}return K((async()=>{n(13,x=!0),setTimeout((()=>{C(),m.addEventListener("scroll",C,at)}),1)})),Y((()=>{x&&k!==h&&(ut.reset(),lt.remove(m),m.removeEventListener("scroll",C,at))})),e.$$set=e=>{"distance"in e&&n(8,y=e.distance),"spinner"in e&&n(0,g=e.spinner),"direction"in e&&n(9,v=e.direction),"forceUseInfiniteWrapper"in e&&n(10,b=e.forceUseInfiniteWrapper),"identifier"in e&&n(11,w=e.identifier),"$$scope"in e&&n(14,u=e.$$scope)},e.$$.update=()=>{4096&e.$$.dirty&&n(3,r=k===f),4096&e.$$.dirty&&n(4,o=k===d),4098&e.$$.dirty&&n(5,i=k===h&&_),4098&e.$$.dirty&&n(6,s=k===h&&!_),9216&e.$$.dirty&&E(),10240&e.$$.dirty&&x&&$.reset()},[g,_,p,r,o,i,s,T,y,v,b,w,k,x,u,a,function(e){te[e?"unshift":"push"]((()=>{p=e,n(2,p)}))}]}class dt extends Qe{constructor(e){super(),We(this,e,ht,it,a,{distance:8,spinner:0,direction:9,forceUseInfiniteWrapper:10,identifier:11})}}function pt(e){return("0"+e.toString(16)).substr(-2)}function mt(){const e=new Uint32Array(28);return window.crypto.getRandomValues(e),Array.from(e,pt).join("")}async function yt(e){const t=await function(e){const t=(new TextEncoder).encode(e);return window.crypto.subtle.digest("SHA-256",t)}(e);var n;return n=t,btoa(String.fromCharCode.apply(null,new Uint8Array(n))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}const gt="ababab",vt="ababab";let bt,wt,_t,kt;async function xt(){const e="client_id=ababab",t="redirect_uri="+encodeURIComponent(vt),n=mt();localStorage.setItem("state",n);const r="state="+n,o="scope="+encodeURIComponent("playlist-read-private playlist-read-collaborative");return"https://accounts.spotify.com/authorize?"+[e,"response_type=code",t,await async function(e){return"code_challenge="+await yt(e)}(function(){const e=mt();return localStorage.setItem("verifier",e),e}()),"code_challenge_method=S256",r,o].join("&")}const $t=async function(){clearInterval(kt),console.log("Refreshing access token...");let e=[];const t={grant_type:"refresh_token",refresh_token:wt,client_id:gt};for(let n in t){const r=encodeURIComponent(n),o=encodeURIComponent(t[n]);e.push(r+"="+o)}e=e.join("&");const n=await fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:e}),r=await n.json();bt=r.access_token,wt=r.refresh_token,_t=1e3*r.expires_in,kt=setInterval($t,_t-.1*_t)};function Ct(e){return{Authorization:"Bearer "+e}}async function Tt(e,t){const n="https://api.spotify.com/v1/users/"+t,r=await fetch(n,{method:"GET",headers:Ct(e)}),o=await r.json();return[o.display_name,o.images]}function St(e){var t={exports:{}};return e(t,t.exports),t.exports
/*!
     * @license :jsstore - V4.2.6 - 21/06/2021
     * https://github.com/ujjwalguptaofficial/JsStore
     * Copyright (c) 2021 @Ujjwal Gupta; Licensed MIT
     */}var Et=St((function(e){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}({2:function(e,t,n){n.r(t),n.d(t,"Connection",(function(){return w})),n.d(t,"ERROR_TYPE",(function(){return r})),n.d(t,"WORKER_STATUS",(function(){return o})),n.d(t,"DATA_TYPE",(function(){return i})),n.d(t,"API",(function(){return s})),n.d(t,"EVENT",(function(){return a})),n.d(t,"QUERY_OPTION",(function(){return u})),n.d(t,"IDB_MODE",(function(){return c})),n.d(t,"OCCURENCE",(function(){return l})),n.d(t,"CONNECTION_STATUS",(function(){return f})),n.d(t,"promise",(function(){return p})),n.d(t,"promiseAll",(function(){return _})),n.d(t,"promiseResolve",(function(){return m})),n.d(t,"forObj",(function(){return k}));var r,o,i,s,a,u,c,l,f,h=function(){function e(e,t){this.type=e,this._info=t,this.message=this.getMsg()}return e.prototype.throw=function(){throw this.get()},e.prototype.log=function(e){this.status&&console.log(e)},e.prototype.logError=function(){console.error(this.get())},e.prototype.logWarning=function(){console.warn(this.get())},e.prototype.get=function(){return{message:this.message,type:this.type}},e.prototype.getMsg=function(){return this.type,this.message},e}();!function(e){e.UndefinedColumn="undefined_column",e.UndefinedValue="undefined_value",e.UndefinedColumnName="undefined_column_name",e.UndefinedDbName="undefined_database_name",e.UndefinedColumnValue="undefined_column_value",e.NotArray="not_array",e.NoValueSupplied="no_value_supplied",e.ColumnNotExist="column_not_exist",e.EnableSearchOff="enable_search_off",e.InvalidOp="invalid_operator",e.NullValue="null_value",e.WrongDataType="wrong_data_type",e.TableNotExist="table_not_exist",e.DbNotExist="db_not_exist",e.ConnectionAborted="connection_aborted",e.ConnectionClosed="connection_closed",e.NotObject="not_object",e.InvalidConfig="invalid_config",e.DbBlocked="Db_blocked",e.IndexedDbNotSupported="indexeddb_not_supported",e.NullValueInWhere="null_value_in_where",e.InvalidJoinQuery="invalid_join_query",e.InvalidOrderQuery="invalid_order_query",e.InvalidQuery="invalid_query",e.InvalidGroupQuery="invalid_group_query",e.ImportScriptsFailed="import_scripts_failed",e.MethodNotExist="method_not_exist",e.Unknown="unknown",e.InvalidMiddleware="invalid_middleware"}(r||(r={})),function(e){e.Registered="registerd",e.Failed="failed",e.NotStarted="not_started"}(o||(o={})),function(e){e.String="string",e.Object="object",e.Array="array",e.Number="number",e.Boolean="boolean",e.Null="null",e.DateTime="date_time"}(i||(i={})),function(e){e.InitDb="init_db",e.Get="get",e.Set="set",e.Select="select",e.Insert="insert",e.Update="update",e.Remove="remove",e.OpenDb="open_db",e.Clear="clear",e.DropDb="drop_db",e.Count="count",e.ChangeLogStatus="change_log_status",e.Terminate="terminate",e.Transaction="transaction",e.CloseDb="close_db",e.Union="union",e.Intersect="intersect",e.ImportScripts="import_scripts",e.Middleware="middleware"}(s||(s={})),function(e){e.RequestQueueEmpty="requestQueueEmpty",e.RequestQueueFilled="requestQueueFilled",e.Upgrade="upgrade",e.Create="create",e.Open="open"}(a||(a={})),function(e){e.Where="where",e.Like="like",e.Regex="regex",e.In="in",e.Equal="=",e.Between="-",e.GreaterThan=">",e.LessThan="<",e.GreaterThanEqualTo=">=",e.LessThanEqualTo="<=",e.NotEqualTo="!=",e.Aggregate="aggregate",e.Max="max",e.Min="min",e.Avg="avg",e.Count="count",e.Sum="sum",e.Or="or",e.Skip="skip",e.Limit="limit",e.And="and",e.IgnoreCase="ignoreCase",e.Then="then"}(u||(u={})),function(e){e.ReadOnly="readonly",e.ReadWrite="readwrite"}(c||(c={})),function(e){e.First="f",e.Last="l",e.Any="a"}(l||(l={})),function(e){e.Connected="connected",e.Closed="closed",e.NotStarted="not_started",e.UnableToStart="unable_to_start",e.ClosedByJsStore="closed_by_jsstore"}(f||(f={}));var d,p=function(e){return new Promise(e)},m=function(e){return Promise.resolve(e)},y=function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e},g=function(){function e(e){this._events={},this._ctx=e}return e.prototype.on=function(e,t){return null==this._events[e]&&(this._events[e]=[]),this._events[e].push(t),this},e.prototype.off=function(e,t){if(this._events[e])if(t){var n=this._events[e].indexOf(t);this._events[e].splice(n,1)}else this._events[e]=[]},e.prototype.emit=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=this._events[e]||[],i=0,s=o.length,a=[],u=function(){var e=o[i++];if(e){var r=e.call.apply(e,y([t._ctx],n));return r&&r.then?r:Promise.resolve(r)}};return new Promise((function(e){var t=function(){i<s?u().then((function(e){a.push(e),t()})):e(a)};t()}))},e.prototype.destroy=function(){this._events=null,this._ctx=null},e}(),v=function(){function e(e){this.isConOpened_=!1,this.isDbIdle_=!0,this.requestQueue_=[],this.isCodeExecuting_=!1,this.inactivityTimer_=-1e3,this.middlewares=[],this.eventBus_=new g(this),this.whiteListApi_=[s.InitDb,s.OpenDb,s.Get,s.Set,s.ChangeLogStatus,s.Terminate,s.DropDb],this.isRuningInWorker=!0,this.logger=new h(null),e?(this.worker_=e,this.worker_.onmessage=this.onMessageFromWorker_.bind(this)):(this.isRuningInWorker=!1,this.initQueryManager_())}return Object.defineProperty(e.prototype,"jsstoreWorker",{get:function(){return this.$worker||self.JsStoreWorker},enumerable:!1,configurable:!0}),e.prototype.initQueryManager_=function(){var e=this.jsstoreWorker;e&&(this.queryManager=new e.QueryManager(this.processFinishedQuery_.bind(this)))},e.prototype.onMessageFromWorker_=function(e){this.processFinishedQuery_(e.data)},e.prototype.processFinishedQuery_=function(e){var t=this.requestQueue_.shift();if(t){if(this.logger.log("request "+t.name+" finished"),e.error)t.onError(e.error);else{switch(t.name){case s.OpenDb:case s.InitDb:this.isConOpened_=!0;break;case s.Terminate:this.isConOpened_=!1,!0===this.isRuningInWorker&&this.worker_.terminate();case s.DropDb:this.isConOpened_=!1,this.requestQueue_=[],this.isDbIdle_=!0;break;case s.CloseDb:this.requestQueue_.length>0?this.openDb_():(this.isDbIdle_=!0,this.eventBus_.emit(a.RequestQueueEmpty,[]))}t.onSuccess(e.result)}this.isCodeExecuting_=!1,this.executeQry_()}},e.prototype.openDb_=function(){this.prcoessExecutionOfQry_({name:s.OpenDb,query:{name:this.database.name,version:this.database.version},onSuccess:function(){},onError:function(e){console.error(e)}},0)},e.prototype.executeMiddleware_=function(e){var t=this;return p((function(n){var r=0,o=t.middlewares.length-1,i=function(){if(r<=o){var s=t.middlewares[r++](e);s&&s.then||(s=m(s)),s.then((function(e){i()}))}else n()};i()}))},e.prototype.callResultMiddleware=function(e,t){return p((function(n){var r=0,o=e.length-1,i=function(){if(r<=o){var s=e[r++](t);s.then||(s=m(s)),s.then((function(e){t=e,i()}))}else n(t)};i()}))},e.prototype.pushApi=function(e){var t=this;return new Promise((function(n,r){var o=[];e.onResult=function(e){o.push((function(t){return e(t)}))},t.executeMiddleware_(e).then((function(){(e.onSuccess=function(r){t.callResultMiddleware(o,r).then((function(e){n(e)})).catch((function(t){e.onError(t)}))},e.onError=function(e){o=[],r(e)},0===t.requestQueue_.length)&&(t.eventBus_.emit(a.RequestQueueFilled,[]),!([s.CloseDb,s.DropDb,s.OpenDb,s.Terminate].indexOf(e.name)>=0)&&t.isDbIdle_&&t.isConOpened_?t.openDb_():clearTimeout(t.inactivityTimer_));t.prcoessExecutionOfQry_(e)})).catch(r)}))},e.prototype.prcoessExecutionOfQry_=function(e,t){this.isDbIdle_=!1,null!=t?this.requestQueue_.splice(t,0,e):this.requestQueue_.push(e),this.logger.log("request pushed: "+e.name),this.executeQry_()},e.prototype.executeQry_=function(){var e=this,t=this.requestQueue_.length;if(!this.isCodeExecuting_&&t>0){if(!0===this.isConOpened_)return void this.sendRequestToWorker_(this.requestQueue_[0]);var n=this.requestQueue_.findIndex((function(t){return e.whiteListApi_.indexOf(t.name)>=0}));n>=0&&(this.requestQueue_.splice(0,0,this.requestQueue_.splice(n,1)[0]),this.sendRequestToWorker_(this.requestQueue_[0]))}else 0===t&&!1===this.isDbIdle_&&this.isConOpened_&&(this.inactivityTimer_=setTimeout((function(){e.prcoessExecutionOfQry_({name:s.CloseDb,onSuccess:function(){},onError:function(e){console.error(e)}})}),100))},e.prototype.sendRequestToWorker_=function(e){this.isCodeExecuting_=!0,this.logger.log("request executing: "+e.name);var t={name:e.name,query:e.query};!0===this.isRuningInWorker?this.worker_.postMessage(t):this.queryManager.run(t)},e}(),b=(d=function(e,t){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}d(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),w=function(e){function t(t){return e.call(this,t)||this}return b(t,e),t.prototype.initDb=function(e){var t=this;return this.database=e,this.pushApi({name:s.InitDb,query:e}).then((function(e){var n,r=e.database;return e.isCreated&&(n=e.oldVersion?t.eventBus_.emit(a.Upgrade,r,e.oldVersion,e.newVersion):t.eventBus_.emit(a.Create,r)),(n||m()).then((function(e){return t.eventBus_.emit(a.Open,r)})).then((function(t){return e.isCreated}))}))},t.prototype.dropDb=function(){return this.pushApi({name:s.DropDb})},t.prototype.select=function(e){return this.pushApi({name:s.Select,query:e})},t.prototype.count=function(e){return this.pushApi({name:s.Count,query:e})},t.prototype.insert=function(e){return this.pushApi({name:s.Insert,query:e})},t.prototype.update=function(e){return this.pushApi({name:s.Update,query:e})},t.prototype.remove=function(e){return this.pushApi({name:s.Remove,query:e})},t.prototype.clear=function(e){return this.pushApi({name:s.Clear,query:e})},Object.defineProperty(t.prototype,"logStatus",{set:function(e){this.logger.status=e,this.pushApi({name:s.ChangeLogStatus,query:e})},enumerable:!1,configurable:!0}),t.prototype.openDb=function(e,t){var n=this;return this.pushApi({name:s.OpenDb,query:{version:t,name:e}}).then((function(e){return n.database=e,e}))},t.prototype.getDbList=function(){return console.warn("Api getDbList is recommended to use for debugging only. Do not use in code."),indexedDB.databases()},t.prototype.get=function(e){return this.pushApi({name:s.Get,query:e})},t.prototype.set=function(e,t){return this.pushApi({name:s.Set,query:{key:e,value:t}})},t.prototype.terminate=function(){return this.pushApi({name:s.Terminate})},t.prototype.transaction=function(e){return this.pushApi({name:s.Transaction,query:e})},t.prototype.on=function(e,t){this.eventBus_.on(e,t)},t.prototype.off=function(e,t){this.eventBus_.off(e,t)},t.prototype.union=function(e){return this.pushApi({name:s.Union,query:e})},t.prototype.intersect=function(e){return this.pushApi({name:s.Intersect,query:e})},t.prototype.addPlugin=function(e,t){return e.setup(this,t)},t.prototype.addMiddleware=function(e,t){return t?this.pushApi({name:s.Middleware,query:e}):(this.middlewares.push(e),Promise.resolve())},t.prototype.importScripts=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.pushApi({name:s.ImportScripts,query:e})},t}(v),_=function(e){return Promise.all(e)},k=function(e,t){for(var n in e)t(n,e[n])}}})})),Ot=St((function(e){e.exports=Et})),qt=St((function(e){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}({2:function(e,t,n){n.r(t),n.d(t,"QueryManager",(function(){return Je}));var r,o,i,s,a,u,c,l,f,h=function(e){return Promise.resolve(e)},d=function(e){return new Promise(e)};!function(e){e.UndefinedColumn="undefined_column",e.UndefinedValue="undefined_value",e.UndefinedColumnName="undefined_column_name",e.UndefinedDbName="undefined_database_name",e.UndefinedColumnValue="undefined_column_value",e.NotArray="not_array",e.NoValueSupplied="no_value_supplied",e.ColumnNotExist="column_not_exist",e.EnableSearchOff="enable_search_off",e.InvalidOp="invalid_operator",e.NullValue="null_value",e.WrongDataType="wrong_data_type",e.TableNotExist="table_not_exist",e.DbNotExist="db_not_exist",e.ConnectionAborted="connection_aborted",e.ConnectionClosed="connection_closed",e.NotObject="not_object",e.InvalidConfig="invalid_config",e.DbBlocked="Db_blocked",e.IndexedDbNotSupported="indexeddb_not_supported",e.NullValueInWhere="null_value_in_where",e.InvalidJoinQuery="invalid_join_query",e.InvalidOrderQuery="invalid_order_query",e.InvalidQuery="invalid_query",e.InvalidGroupQuery="invalid_group_query",e.ImportScriptsFailed="import_scripts_failed",e.MethodNotExist="method_not_exist",e.Unknown="unknown",e.InvalidMiddleware="invalid_middleware"}(r||(r={})),function(e){e.Registered="registerd",e.Failed="failed",e.NotStarted="not_started"}(o||(o={})),function(e){e.String="string",e.Object="object",e.Array="array",e.Number="number",e.Boolean="boolean",e.Null="null",e.DateTime="date_time"}(i||(i={})),function(e){e.InitDb="init_db",e.Get="get",e.Set="set",e.Select="select",e.Insert="insert",e.Update="update",e.Remove="remove",e.OpenDb="open_db",e.Clear="clear",e.DropDb="drop_db",e.Count="count",e.ChangeLogStatus="change_log_status",e.Terminate="terminate",e.Transaction="transaction",e.CloseDb="close_db",e.Union="union",e.Intersect="intersect",e.ImportScripts="import_scripts",e.Middleware="middleware"}(s||(s={})),function(e){e.RequestQueueEmpty="requestQueueEmpty",e.RequestQueueFilled="requestQueueFilled",e.Upgrade="upgrade",e.Create="create",e.Open="open"}(a||(a={})),function(e){e.Where="where",e.Like="like",e.Regex="regex",e.In="in",e.Equal="=",e.Between="-",e.GreaterThan=">",e.LessThan="<",e.GreaterThanEqualTo=">=",e.LessThanEqualTo="<=",e.NotEqualTo="!=",e.Aggregate="aggregate",e.Max="max",e.Min="min",e.Avg="avg",e.Count="count",e.Sum="sum",e.Or="or",e.Skip="skip",e.Limit="limit",e.And="and",e.IgnoreCase="ignoreCase",e.Then="then"}(u||(u={})),function(e){e.ReadOnly="readonly",e.ReadWrite="readwrite"}(c||(c={})),function(e){e.First="f",e.Last="l",e.Any="a"}(l||(l={})),function(e){e.Connected="connected",e.Closed="closed",e.NotStarted="not_started",e.UnableToStart="unable_to_start",e.ClosedByJsStore="closed_by_jsstore"}(f||(f={}));var p,m=function(){function e(e){this.columns=[],this.autoIncColumnValue={},this.columns=this.setColumn(e.columns),this.name=e.name,this.alter=e.alter||{}}return e.prototype.setColumn=function(e){var t=[],n=function(n){var o=e[n];o.name=n,o.autoIncrement&&(r.autoIncColumnValue[n]=0),o.primaryKey&&(r.primaryKey=n),o.enableSearch=null==o.enableSearch||o.enableSearch;var i=r.columns.indexOf((function(e){return e.name===n}));if(i<0)t.push(o);else{var s=r.columns[i];Object.assign(s,o)}},r=this;for(var o in e)n(o);return t},e}(),y=function(){function e(){}return e.autoIncrementKey=function(e,t){return"JsStore_"+e+"_"+t+"_Value"},e.set=function(t,n,r){r.tx||r.createTransaction([e.tableName]);var o=r.objectStore(e.tableName);return d((function(e,r){var i=o.put({key:t,value:n});i.onsuccess=function(){e()},i.onerror=r}))},e.get=function(t,n){n.tx||n.createTransaction([e.tableName]);var r=n.objectStore(e.tableName);return d((function(e,o){var i=r.get(n.keyRange(t));i.onsuccess=function(){var t=i.result;e(t&&t.value)},i.onerror=o}))},e.remove=function(t,n){n.tx||n.createTransaction([e.tableName]);var r=n.objectStore(e.tableName);return d((function(e,o){var i=r.delete(n.keyRange(t));i.onsuccess=e,i.onerror=o}))},e.tableName="JsStore_Meta",e.dbSchema="JsStore_DbSchema",e}(),g=function(e){this.name=e.name,this.version=e.version||1,e.tables.push({name:y.tableName,columns:{key:{primaryKey:!0},value:{enableSearch:!1}}}),this.tables=e.tables.map((function(e){return new m(e)}))},v=function(e,t){for(var n in e)t(n,e[n])},b=function(){function e(e,t){this.type=e,this.info_=t,this.message=this.getMsg_()}return e.prototype.log=function(e){this.status&&console.log(e)},e.prototype.throw=function(){throw this.get()},e.prototype.logError=function(){console.error(this.get())},e.prototype.get=function(){return{message:this.message,type:this.type}},e.prototype.getMsg_=function(){var e;switch(this.type){case r.NotArray:e="Supplied value is not an array";break;case r.UndefinedColumn:e="Column is undefined in Where";break;case r.UndefinedValue:e="Value is undefined in Where";break;case r.UndefinedColumnName:e="Column name is undefined '"+this.info_.TableName+"'";break;case r.UndefinedDbName:e="Database name is not supplied";break;case r.UndefinedColumnValue:e="Column value is undefined";break;case r.NoValueSupplied:e="No value is supplied";break;case r.InvalidOp:e="Invalid Op Value '"+this.info_.Op+"'";break;case r.ColumnNotExist:e=this.info_.isOrder?"Column '"+this.info_.column+"' in order query does not exist":"Column '"+this.info_.column+"' does not exist";break;case r.EnableSearchOff:e="Search is turned off for the Column '"+this.info_.column+"'";break;case r.NullValue:e="Null value is not allowed for column '"+this.info_.ColumnName+"'";break;case r.WrongDataType:e="Supplied value for column '"+this.info_.column+"' have wrong data type";break;case r.TableNotExist:e="Table '"+this.info_.tableName+"' does not exist";break;case r.DbNotExist:e="Database with name "+this.info_.dbName+" does not exist";break;case r.NotObject:e="supplied value is not object";break;case r.InvalidOp:e="Invalid Config '"+this.info_.Config+" '";break;case r.DbBlocked:e="database is blocked, cant be deleted right now";break;case r.NullValueInWhere:e="Null/undefined is not allowed in where. Column '"+this.info_.column+"' has null";break;case r.MethodNotExist:e="method "+this.info_+" does not exist.";break;case r.IndexedDbNotSupported:e="Browser does not support indexeddb";break;case r.InvalidJoinQuery:case r.InvalidGroupQuery:case r.InvalidOrderQuery:case r.ImportScriptsFailed:e=this.info_;break;case r.InvalidMiddleware:e="No function "+this.info_+" is found.";break;default:this.type||(this.type=r.Unknown),e=this.message}return e},e}(),w=function(){function e(){this.logger=new b(null)}return e.prototype.emptyTx=function(){this.tx&&(this.tx.oncomplete=null,this.tx.onabort=null,this.tx.onerror=null,this.tx=null)},e.prototype.createTransactionIfNotExist=function(e,t){this.tx||this.createTransaction(e,t)},e.prototype.createTransaction=function(e,t){var n=this;return void 0===t&&(t=c.ReadWrite),this.tx=this.con.transaction(e,t),d((function(e,t){n.tx.oncomplete=e,n.tx.onabort=e,n.tx.onerror=t}))},e.prototype.keyRange=function(e,t){var n;switch(t){case u.Between:n=IDBKeyRange.bound(e.low,e.high,!1,!1);break;case u.GreaterThan:n=IDBKeyRange.lowerBound(e,!0);break;case u.GreaterThanEqualTo:n=IDBKeyRange.lowerBound(e);break;case u.LessThan:n=IDBKeyRange.upperBound(e,!0);break;case u.LessThanEqualTo:n=IDBKeyRange.upperBound(e);break;default:n=IDBKeyRange.only(e)}return n},e.prototype.objectStore=function(e){return this.tx.objectStore(e)},e.prototype.abortTransaction=function(){this.tx&&this.tx.abort()},e.prototype.close=function(){var e=this;return this.con&&this.con.close(),d((function(t){e.con=null,setTimeout(t,100)}))},e.prototype.initDb=function(e){var t=this;this.db=e;var n,r=!1,o=e.version;return d((function(i,s){var a=indexedDB.open(e.name,o);a.onsuccess=function(){t.con=a.result,t.con.onversionchange=function(e){e.target.close()},i({isCreated:r,oldVersion:n,newVersion:o})},a.onerror=function(e){console.error("error",e),s(e)},a.onupgradeneeded=function(t){n=t.oldVersion;var i=t.target,s=i.result;r=!0;var a=i.transaction,u=s.objectStoreNames,c=function(e,t){if(t.enableSearch){var n=t.name,r=t.primaryKey?{unique:!0}:{unique:t.unique};r.multiEntry=t.multiEntry;var o=null==t.keyPath?n:t.keyPath;e.createIndex(n,o,r)}},l=function(e,t,n){var r=t.columns.findIndex((function(e){return e.name===n}));r>=0&&(t.columns.splice(r,1),e.deleteIndex(n))};e.tables.forEach((function(e){if(!u.contains(e.name))return function(e){var t=e.primaryKey?{keyPath:e.primaryKey}:{autoIncrement:!0},n=s.createObjectStore(e.name,t);e.columns.forEach((function(e){c(n,e)}))}(e);for(var t=a.objectStore(e.name),r=n;r<=o;r++){var i=e.alter[r];if(i){if(i.add)e.setColumn(i.add).forEach((function(n){c(t,n),e.columns.push(n)}));v(i.drop||{},(function(n){l(t,e,n)})),v(i.modify||{},(function(n,r){var o=r.multiEntry||r.keyPath||r.unique,i=e.columns.find((function(e){return e.name===n})),s=Object.assign(i,r);s.name=n,o&&(l(t,e,n),c(t,s),e.columns.push(s))}))}}}))}}))},e}(),_=function(e){return Promise.all(e)},k=function(e){return Promise.reject(e)},x=function(e){if(e instanceof b)return e.logError(),e.get();var t=void 0;return e.name?(t=new b(e.name)).message=e.message:(t=new b(e.target.error.name)).message=e.target.error.message,t.logError(),t.get()},$=function(){function e(){this.rowAffected=0,this.isTxQuery=!1,this.results=[]}return e.prototype.table=function(e){var t=e||this.tableName;return this.db.tables.find((function(e){return e.name===t}))},e.prototype.primaryKey=function(e){return this.table(e).primaryKey},e.prototype.getColumnInfo=function(e,t){return this.table(t).columns.find((function(t){return t.name===e}))},e.prototype.onException=function(e,t){return console.error(e),this.util.abortTransaction(),k(function(e,t){return void 0===t&&(t=r.InvalidQuery),e.name=t,x(e)}(e,t))},e}(),C=function(e){if(null==e)return i.Null;var t=typeof e;switch(t){case"object":if(Array.isArray(e))return i.Array;if(e instanceof Date)return i.DateTime}return t},T=function(e){if(null==e)return!0;switch(typeof e){case"string":return 0===e.length;case"number":return isNaN(e)}return!1},S=function(){function e(e,t){this.table=e,this.autoIncrementValue=t}return e.prototype.checkAndModifyValues=function(e){var t,n=this;this.query=e;var r=e.values,o=[];return r.every((function(r,i){return t=n.checkAndModifyValue(r),e.ignore&&t&&(o.push(i),t=null),!t})),o.forEach((function(e){r.splice(e,1)})),{err:t,values:r}},e.prototype.checkAndModifyValue=function(e){var t,n=this;return this.table.columns.every((function(r){return!(t=n.checkAndModifyColumnValue_(r,e))})),t},e.prototype.checkNotNullAndDataType_=function(e,t){return e.notNull&&T(t[e.name])?this.getError(r.NullValue,{ColumnName:e.name}):e.dataType&&!T(t[e.name])&&C(t[e.name])!==e.dataType?this.getError(r.WrongDataType,{column:e.name}):void 0},e.prototype.checkAndModifyColumnValue_=function(e,t){var n=t[e.name];if(e.autoIncrement?T(n)?t[e.name]=++this.autoIncrementValue[e.name]:C(n)===i.Number&&n>this.autoIncrementValue[e.name]&&(this.autoIncrementValue[e.name]=n):void 0!==e.default&&T(n)&&(t[e.name]=e.default),this.query.validation)return this.checkNotNullAndDataType_(e,t)},e.prototype.getError=function(e,t){return new b(e,t)},e}(),E=function(){function e(e){this.table=e}return e.prototype.check=function(e,t){var n,o=this;return typeof e===i.Object?this.table?this.table.columns.every((function(t){return t.name in e&&(n=o.checkByColumn_(t,e[t.name])),!n})):n=new b(r.TableNotExist,{tableName:t}):n=new b(r.NotObject),n},e.prototype.checkByColumn_=function(e,t){if(!0===e.notNull&&T(t))return new b(r.NullValue,{ColumnName:e.name});var n=C(t),o=null!=t;if(e.dataType&&o&&n!==e.dataType&&"object"!==n)return new b(r.WrongDataType,{column:e.name});if(o&&"object"===n){var i=["+","-","*","/","{push}"];for(var s in t)if(i.indexOf(s)<0&&e.dataType&&n!==e.dataType)return new b(r.WrongDataType,{column:e.name})}},e}(),O=function(){function e(e){this.db=e}return e.prototype.validate=function(e,t){switch(e){case s.Select:case s.Remove:case s.Count:return this.checkSelect(t);case s.Insert:return this.checkInsertQuery(t);case s.Update:return this.checkUpdate(t)}},e.prototype.getTable_=function(e){return this.db.tables.find((function(t){return t.name===e}))},e.prototype.isInsertQryValid=function(e){var t,n=this.getTable_(e.into);if(n)switch(C(e.values)){case i.Array:break;case i.Null:t=new b(r.NoValueSupplied);break;default:t=new b(r.NotArray)}else t=new b(r.TableNotExist,{tableName:e.into});return{table:n,log:t}},e.prototype.checkUpdate=function(e){var t=new E(this.getTable_(e.in)).check(e.set,e.in);if(t)return t;if(null!=e.where){if(t=this.checkForNullInWhere_(e))return t;this.addGreatAndLessToNotOp_(e)}},e.prototype.checkSelect=function(e){if(!this.getTable_(e.from))return new b(r.TableNotExist,{tableName:e.from});if(e.where){var t=this.checkForNullInWhere_(e);if(t)return t;this.addGreatAndLessToNotOp_(e)}},e.prototype.checkForNullInWhere_=function(e){for(var t in e.where)if(null==e.where[t])return new b(r.NullValueInWhere,{column:t})},e.prototype.addGreatAndLessToNotOp_=function(e){var t=e.where,n=function(e,t){return t.findIndex((function(t){return null!=e[t][u.NotEqualTo]}))>=0},r=function(e,t){var n;return t.forEach((function(t){null!=(n=e[t])[u.NotEqualTo]&&(e[t][u.GreaterThan]=n[u.NotEqualTo],void 0===e[u.Or]?(e[u.Or]={},e[u.Or][t]={}):void 0===e[u.Or][t]&&(e[u.Or][t]={}),e[u.Or][t][u.LessThan]=n[u.NotEqualTo],delete e[t][u.NotEqualTo])})),e};switch(C(t)){case i.Object:var o=Object.keys(t);if(n(t,o))if(1===o.length)e.where=r(t,o);else{var s=[];o.forEach((function(e){var n;s.push(r(((n={})[e]=t[e],n),[e]))})),e.where=s}break;default:var a=[];t.forEach((function(e){var t=Object.keys(e);n(e,t)&&(e=r(e,t)),a.push(e)})),e.where=a}},e.prototype.checkInsertQuery=function(e){var t=this.isInsertQryValid(e),n=t.table,r=t.log;if(r)return r;if(!e.skipDataCheck){var o=new S(n,n.autoIncColumnValue).checkAndModifyValues(e),i=o.values,s=o.err;return e.values=i,s}},e}(),q=(p=function(e,t){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}p(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),j=function(e){function t(t,n){var r=e.call(this)||this;return r.valuesAffected_=[],null==t.validation&&(t.validation=!0),r.query=t,r.util=n,r.tableName=t.into,r}return q(t,e),t.prototype.execute=function(e){var t=this,n=new O(e).validate(s.Insert,this.query);return n?k(n):this.insertData_(e).then((function(e){return t.query.return?t.valuesAffected_:t.rowAffected})).catch((function(e){return t.util.abortTransaction(),k(e)}))},t.prototype.insertData_=function(e){var t,n,r,o=this,i=this.query;return t=i.return?function(e){o.valuesAffected_.push(e)}:function(e){++o.rowAffected},r=i.upsert?"put":"add",n=i.ignore&&!o.isTxQuery?function(e){return o.util.con.transaction(i.into,c.ReadWrite).objectStore(i.into)[r](e)}:(o.isTxQuery||o.util.createTransaction([i.into,y.tableName]),o.objectStore=o.util.objectStore(o.tableName),function(e){return o.objectStore[r](e)}),_(i.values.map((function(e){return d((function(r,o){var s=n(e);s.onerror=function(e){i.ignore?r():o(e)},s.onsuccess=function(){t(e),r()}}))}))).then((function(){y.set(y.dbSchema,e,o.util)}))},t}($),A=void 0===self.alert&&"undefined"==typeof ServiceWorkerGlobalScope,I=function(){try{if(indexedDB||(indexedDB=self.mozIndexedDB||self.webkitIndexedDB||self.msIndexedDB),!indexedDB)return!1;IDBTransaction=IDBTransaction||self.webkitIDBTransaction||self.msIDBTransaction,self.IDBKeyRange=self.IDBKeyRange||self.webkitIDBKeyRange||self.msIDBKeyRange}catch(e){return!1}return!0}(),N=function(e){return Object.keys(e)},D=function(e){return Array.isArray(e)},R=function(e){return N(e).length},W=function(e){for(var t in e)return t},Q=function(){function e(){}return e.prototype.setCaseAndValue=function(e,t){this.caseQuery_=e,this.setValue(t)},e.prototype.setCaseAndColumn=function(e,t){return this.caseQuery_=e,this.setColumn(t),this},e.prototype.setColumn=function(e){return this.columnName_=e,this.caseColumnQuery_=this.caseQuery_[this.columnName_],this.length_=this.caseColumnQuery_.length,this},e.prototype.setValue=function(e){return this.value=e,this},e.prototype.evaluate=function(){for(var e=0;e<this.length_;e++)if(!0===this.checkCase_(this.caseColumnQuery_[e]))return this.caseColumnQuery_[e].then;var t=this.caseColumnQuery_[this.length_-1].then;return null==t?this.value[this.columnName_]:t},e.prototype.checkCase_=function(e){var t;for(t in e){switch(t){case u.GreaterThan:if(this.value[this.columnName_]>e[t])return!0;break;case u.Equal:if(this.value[this.columnName_]===e[t])return!0;break;case u.LessThan:if(this.value[this.columnName_]<e[t])return!0;break;case u.GreaterThanEqualTo:if(this.value[this.columnName_]>=e[t])return!0;break;case u.LessThanEqualTo:if(this.value[this.columnName_]<=e[t])return!0;break;case u.NotEqualTo:if(this.value[this.columnName_]!==e[t])return!0;break;case u.Between:if(this.value[this.columnName_]>e[t].low&&this.value[this.columnName_]<e[t].high)return!0}return!1}},e}(),M=function(e){var t,n=this,r=!1;return function(o){(t=o.target.result)?r&&n.results.length!==n.limitRecord?(n.pushResult(t.value),t.continue()):(r=!0,t.advance(n.skipRecord)):e()}},L=function(e){var t,n=this,r=!1;return function(o){(t=o.target.result)?r?(n.pushResult(t.value),t.continue()):(r=!0,t.advance(n.skipRecord)):e()}},B=function(e){var t,n=this;return function(r){(t=r.target.result)?(n.pushResult(t.value),t.continue()):e()}},P=function(e){var t,n=this;return function(r){(t=r.target.result)&&n.results.length!==n.limitRecord?(n.pushResult(t.value),t.continue()):e()}},F=function(e){return e.replace(/\s/g,"")},U=function(e){var t;if(null==this.query.join)t=this.getColumnInfo(e);else{var n=F(e).split(".");e=n[1],t=this.getColumnInfo(e,n[0])}if(null==t){var o=this.results[0][e];if(o)return{dataType:C(o),name:e};throw new b(r.ColumnNotExist,{column:e,isOrder:!0})}return t},V=function(e,t){return t.localeCompare(e)},G=function(e,t){return e.localeCompare(t)},J=function(e,t){return new String(t).localeCompare(e)},K=function(e,t){return new String(e).localeCompare(t)},H=function(e,t){return t-e},Y=function(e,t){return e-t},z=function(e,t){return t.getTime()-e.getTime()},X=function(e,t){return e.getTime()-t.getTime()},Z=function(e,t,n){for(var r in n){this.thenEvaluator.setCaseAndValue(n,e);var o=this.thenEvaluator.setColumn(r).evaluate();this.thenEvaluator.setCaseAndValue(n,t);var s=this.thenEvaluator.setColumn(r).evaluate();switch(typeof e[o]){case i.String:return V(e[o],t[s]);default:return H(e[o],t[s])}}},ee=function(e,t,n){for(var r in n){this.thenEvaluator.setCaseAndValue(n,e);var o=this.thenEvaluator.setColumn(r).evaluate();this.thenEvaluator.setCaseAndValue(n,t);var s=this.thenEvaluator.setColumn(r).evaluate();switch(typeof e[o]){case i.String:return G(e[o],t[s]);default:return Y(e[o],t[s])}}},te=function(e,t){switch(e.dataType){case i.String:return"asc"===t.type?G:V;case i.Number:return"asc"===t.type?Y:H;case i.DateTime:return"asc"===t.type?X:z;default:return"asc"===t.type?K:J}},ne=function(e){var t,n=this;e.type=re(e.type);var r=e.by;if(null!=r&&typeof r===i.Object)"asc"===e.type?this.results.sort((function(e,t){return ee.call(n,e,t,r)})):this.results.sort((function(e,t){return Z.call(n,e,t,r)}));else{var o=U.call(this,r);if(null!=o){var s=te(o,e);r=o.name,null==e.case?this.results.sort((function(e,t){return s(e[r],t[r])})):(this.thenEvaluator.setCaseAndColumn(((t={})[r]=e.case,t),r),this.results.sort((function(e,t){return s(n.thenEvaluator.setValue(e).evaluate(),n.thenEvaluator.setValue(t).evaluate())})))}}},re=function(e){return null==e?"asc":e.toLowerCase()},oe=function(e){var t=this,n=!1;return function(r){var o=r.target.result;if(o)if(n&&t.results.length!==t.limitRecord){var i=o.value;t.shouldAddValue(i)&&t.pushResult(i),o.continue()}else n=!0,o.advance(t.skipRecord);else e()}},ie=function(e){var t=this,n=!1;return function(r){var o=r.target.result;if(o)if(n){var i=o.value;t.shouldAddValue(i)&&t.pushResult(i),o.continue()}else n=!0,o.advance(t.skipRecord);else e()}},se=function(e){var t=this;return function(n){var r=n.target.result;if(r&&t.results.length!==t.limitRecord){var o=r.value;t.shouldAddValue(o)&&t.pushResult(o),r.continue()}else e()}},ae=function(e){var t=this;return function(n){var r=n.target.result;if(r){var o=r.value;t.shouldAddValue(o)&&t.pushResult(o),r.continue()}else e()}},ue=function(e){var t,n,r=e.split("%");switch(r[1]?(t=r[1],n=r.length>2?l.Any:l.Last):(t=r[0],n=l.First),n){case l.First:return new RegExp("^"+t,"i");case l.Last:return new RegExp(t+"$","i");default:return new RegExp(""+t,"i")}},ce=function(e){return"object"===C(e)&&!(e instanceof RegExp)},le=function(e){if(ce(e)){var t={};for(var n in e)t[n]=null!=e[n]&&ce(e[n])?le(e[n]):e[n];return t}return e},fe=function(e,t,n){var r=C(e);if(r!==C(t))return!1;switch(r===i.DateTime&&(e=e.getTime(),t=t.getTime()),n){case u.GreaterThan:return e>t;case u.LessThan:return e<t;case u.LessThanEqualTo:return e<=t;case u.GreaterThanEqualTo:return e>=t;case u.NotEqualTo:return e!==t;default:return e===t}},he=function(){function e(e,t){this.where=le(e),this.checkFlag=t}return e.prototype.remove=function(e){var t=e.pop();delete e.reduce((function(e,t){return e&&e[t]}),this.where)[t]},e.prototype.check=function(e){var t=!0;if(!this.checkFlag)return t;for(var n in this.where){if(!t)return t;var r=this.where[n],o=e[n];if("object"===C(r))for(var i in r){if(!t)return t;switch(i){case u.In:t=this.checkIn(n,o);break;case u.Like:t=this.checkLike_(n,o);break;case u.Regex:t=this.checkRegex(n,o);break;case u.Between:case u.GreaterThan:case u.LessThan:case u.GreaterThanEqualTo:case u.LessThanEqualTo:case u.NotEqualTo:t=this.checkComparisionOp_(n,o,i);break;default:t=!1}}else t=fe(r,o)}return t},e.prototype.checkIn=function(e,t){return null!=this.where[e][u.In].find((function(e){return fe(e,t)}))},e.prototype.checkLike_=function(e,t){return ue(this.where[e][u.Like]).test(t)},e.prototype.checkRegex=function(e,t){return this.where[e][u.Regex].test(t)},e.prototype.checkComparisionOp_=function(e,t,n){var r=this.where[e][n];return n!=u.Between?fe(t,r,n):fe(t,r.low,">=")&&fe(t,r.high,"<=")},e}(),de=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),pe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.shouldEvaluateLimitAtEnd=!1,t.shouldEvaluateSkipAtEnd=!1,t}return de(t,e),t.prototype.goToWhereLogic=function(){var e=this.query,t=W(e.where);if(!this.objectStore.indexNames.contains(t)){var n=this.getColumnInfo(t),o=new b(null==n?r.ColumnNotExist:r.EnableSearchOff,{column:t});return k(o)}var i=e.where[t];if("object"!==C(i)){s=R(e.where)>1;return this.whereCheckerInstance=new he(e.where,s),this.whereCheckerInstance.remove([t]),this.executeWhereLogic(t,i,null,"next")}var s=R(i)>1||R(e.where)>1;this.whereCheckerInstance=new he(e.where,s);var a=W(i);switch(this.whereCheckerInstance.remove([t,a]),a){case u.Like:var c=ue(i[u.Like]);return this.executeRegexLogic(t,c);case u.Regex:return this.executeRegexLogic(t,i[u.Regex]);case u.In:return this.executeInLogic(t,i[u.In]);case u.Between:case u.GreaterThan:case u.LessThan:case u.GreaterThanEqualTo:case u.LessThanEqualTo:return this.executeWhereLogic(t,i,a,"next");case u.Aggregate:break;default:return this.executeWhereLogic(t,i,null,"next")}},t}($),me=function(e,t){var n=this;return function(r){var o=r.target.result;if(n.results.length!==n.limitRecord&&o){var i=o.value;n.shouldAddValue(i)&&t(i),o.continue()}else e()}},ye=function(e,t){var n=this;return function(r){var o=r.target.result;if(o){var i=o.value;n.shouldAddValue(i)&&t(i),o.continue()}else e()}},ge=function(e){var t=this;return function(n){var r=n.target.result;if(r){var o=r.value;t.shouldAddValue(o)&&t.pushResult(o),r.continue()}else e()}},ve=function(e,t){var n=this;return function(r){var o=r.target.result;n.results.length!==n.limitRecord&&o?(n.shouldAddValue(o)&&t(o.value),o.continue()):e()}},be=function(e,t){var n=this;return function(r){var o=r.target.result;o?(n.shouldAddValue(o)&&t(o.value),o.continue()):e()}},we=function(e){var t=this;return function(n){var r=n.target.result;t.results.length!==t.limitRecord&&r?(t.shouldAddValue(r)&&t.pushResult(r.value),r.continue()):e()}},_e=function(e){var t=this;return function(n){var r=n.target.result;r?(t.shouldAddValue(r)&&t.pushResult(r.value),r.continue()):e()}},ke=function(){return(ke=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},xe=function(){function e(e){this.joinQueryStack_=[],this.currentQueryStackIndex_=0,this.tablesFetched=[],this.results=[],this.select=e}return Object.defineProperty(e.prototype,"query",{get:function(){return this.select.query},enumerable:!1,configurable:!0}),e.prototype.getTable=function(e){return this.select.table(e)},e.prototype.executeSelect=function(e){return new Se(e,this.select.util).execute(this.select.db)},e.prototype.execute=function(){var e=this,t=this.query;this.joinQueryStack_=C(t.join)===i.Object?[t.join]:t.join;for(var n=t.from,r=[n],o=0,s=this.joinQueryStack_.length;o<s;o++){var a=this.joinQueryStack_[o],u=this.getJoinTableInfo_(a.on);a.with===u.table1.table&&(u={table1:u.table2,table2:u.table1});var c=this.checkJoinQuery_(u,a);if(c)return k(c);this.joinQueryStack_[o].joinTableInfo=u,r.push(a.with)}return this.select.isTxQuery||this.select.util.createTransaction(r),this.executeSelect({from:n,where:t.where,case:t.case,flatten:t.flatten}).then((function(t){return e.results=t.map((function(t){var n;return(n={})[e.currentQueryStackIndex_]=t,n})),e.tablesFetched.push(n),e.startExecutingJoinLogic_()}))},e.prototype.onJoinQueryFinished_=function(){var e=this;if(this.results.length>0)try{var t=[],n=Object.keys(this.results[0]).length,o=function(e,t){if(null!=e.as)for(var n in e.as)void 0===t[e.as[n]]&&(t[e.as[n]]=t[n],delete t[n]);return t};this.results.forEach((function(r){for(var i=r[0],s=1;s<n;s++){var a=e.joinQueryStack_[s-1];i=ke(ke({},i),o(a,r[s]))}t.push(i)})),this.select.results=t,this.select.setLimitAndSkipEvaluationAtEnd_(),this.select.query.flatten=null;try{this.select.processOrderBy()}catch(e){return k(new b(r.InvalidOrderQuery,e.message))}try{this.select.processGroupDistinctAggr()}catch(e){return k(new b(r.InvalidGroupQuery,e.message))}}catch(e){return k(new b(r.InvalidJoinQuery,e.message))}},e.prototype.startExecutingJoinLogic_=function(){var e=this,t=this.joinQueryStack_[this.currentQueryStackIndex_];if(!t)return this.onJoinQueryFinished_();try{var n=t.joinTableInfo;return this.executeSelect({from:t.with,where:t.where,case:t.case,flatten:t.flatten}).then((function(r){return e.jointables(t.type,n,r),e.tablesFetched.push(n.table2.table),++e.currentQueryStackIndex_,e.startExecutingJoinLogic_()}))}catch(e){return k(new b(r.InvalidJoinQuery,e.message))}},e.prototype.jointables=function(e,t,n){var r,o,i,s,a=this,u=[],c=t.table1.column,l=t.table2.column,f=this.tablesFetched.indexOf(t.table1.table),h=this.currentQueryStackIndex_+1;switch(e){case"left":i=0,s={},a.getTable(t.table2.table).columns.forEach((function(e){s[e.name]=null})),a.results.forEach((function(e){r=[],o=1===h?function(t){e[f][c]===t[l]&&r.push(t)}:function(t){var n=e[f];null!=n&&n[c]===t[l]&&r.push(t)},n.forEach(o),0===r.length&&(r=[s]),r.forEach((function(t){u[i]=ke({},e),u[i++][h]=t}))}));break;default:!function(){var e=0;a.results.forEach((function(t){n.forEach((function(n){t[f][c]===n[l]&&(u[e]=ke({},t),u[e++][h]=n)}))}))}()}this.results=u},e.prototype.getJoinTableInfo_=function(e){var t=(e=F(e)).split("="),n=t[0].split("."),r=t[1].split(".");return{table1:{table:n[0],column:n[1]},table2:{table:r[0],column:r[1]}}},e.prototype.checkJoinQuery_=function(e,t){var n,o=e.table1,i=e.table2,s=this.getTable(o.table),a=this.getTable(i.table);return t.with!==i.table&&(n=new b(r.InvalidJoinQuery,"on value should contains value of with")),null==s.columns.find((function(e){return e.name===o.column}))?n=new b(r.InvalidJoinQuery,"column "+o.column+" does not exist in table "+o.table):null==a.columns.find((function(e){return e.name===i.column}))&&(n=new b(r.InvalidJoinQuery,"column "+i.column+" does not exist in table "+i.table)),null==t.as&&(t.as={}),s.columns.every((function(e){var s=a.columns.find((function(t){return t.name===e.name&&t.name!==o.column}));return null==s||null!=t.as[s.name]||(n=new b(r.InvalidJoinQuery,"column "+e.name+" exist in both table "+o.table+" & "+i.table),!1)})),n},e}(),$e=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ce=function(){return(Ce=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Te=function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e},Se=function(e){function t(t,n){var r=e.call(this)||this;return r.sorted=!1,r.isSubQuery=!1,r.thenEvaluator=new Q,r.returnResult_=function(){if(r.results.length>0){if(r.query.flatten){var e=[],t={};r.query.flatten.forEach((function(n){r.results.forEach((function(r,o){r[n].forEach((function(t){var o;e.push(Ce(Ce({},r),((o={})[n]=t,o)))})),t[o]=!0}))}));var n=0;N(t).forEach((function(e){r.results.splice(Number(e)-n,1),++n})),r.results=r.results.concat(e)}r.processGroupDistinctAggr(),r.processOrderBy(),r.shouldEvaluateSkipAtEnd&&r.results.splice(0,r.query.skip),r.shouldEvaluateLimitAtEnd&&(r.results=r.results.slice(0,r.query.limit))}return r.results},r.query=t,r.util=n,r.tableName=t.from,r.setPushResult(),D(r.query.where)?(r.isArrayQry=!0,r.setLimitAndSkipEvaluationAtEnd_()):(r.skipRecord=t.skip,r.limitRecord=t.limit),t.order?((D(t.order)||t.order.case||"object"==typeof t.order.by)&&(r.query.order.idbSorting=!1),r.setLimitAndSkipEvaluationAtEnd_()):t.groupBy&&r.setLimitAndSkipEvaluationAtEnd_(),r}return $e(t,e),t.prototype.execute=function(e){this.db=e;try{var t=new O(e).validate(s.Select,this.query);return t?k(t):(this.initTransaction_(),(null==this.query.join?null!=this.query.where?D(this.query.where)?this.processWhereArrayQry():this.processWhere_():this.executeWhereUndefinedLogic():this.executeJoinQuery()).then(this.returnResult_.bind(this)))}catch(e){return this.onException(e)}},t.prototype.processWhereArrayQry=function(){var e=this;this.isArrayQry=!0;var t,n=this.query.where,r=this.primaryKey(),o=!0,i=[],s=function(){if(t===u.And){!0===o?i=e.results:i.length>0&&(s=[],e.results.forEach((function(e){var t;t=e[r],i.findIndex((function(e){return e[r]===t}))>=0&&s.push(e)})),i=s,s=null)}else i.length>0?(e.results=Te(Te([],i),e.results),e.removeDuplicates(),i=e.results):i=e.results;var s;if(o=!1,n.length>0)return e.results=[],a();e.results=i},a=function(){return e.query.where=n.shift(),e.query.where[u.Or]&&1===R(e.query.where)?(t=u.Or,e.query.where=e.query.where[u.Or]):t=u.And,e.processWhere_().then(s)};return a()},t.prototype.initTransaction_=function(){this.isTxQuery||this.util.createTransactionIfNotExist([this.tableName],c.ReadOnly),this.objectStore=this.util.objectStore(this.tableName)},t.prototype.processWhere_=function(){var e=this;return this.shouldAddValue=function(t){return e.whereCheckerInstance.check(t)},this.query.where.or&&this.processOrLogic_(),this.goToWhereLogic().then((function(){return e.onWhereEvaluated()}))},t.prototype.onWhereEvaluated=function(){if(this.isOr)return this.orQuerySuccess_()},t.prototype.orQueryFinish_=function(){this.isOr=!1,this.results=this.orInfo.results,this.orInfo=null,this.removeDuplicates()},t.prototype.orQuerySuccess_=function(){if(this.orInfo.results=Te(Te([],this.orInfo.results),this.results),!this.query.limit||this.query.limit>this.orInfo.results.length){this.results=[];var e=W(this.orInfo.orQuery);if(null!=e){var t={};return t[e]=this.orInfo.orQuery[e],delete this.orInfo.orQuery[e],this.query.where=t,this.goToWhereLogic().then(this.onWhereEvaluated.bind(this))}}return this.orQueryFinish_()},t.prototype.processOrLogic_=function(){this.isOr=!0;var e=this.query.where;this.orInfo={orQuery:e.or,results:[]},delete e.or},t}(pe);Se.prototype.executeInLogic=function(e,t){var n=this,r=this.skipRecord,o=function(e){0===r?n.pushResult(e):--r},i=function(){if(!1===n.shouldEvaluateLimitAtEnd&&!1===n.shouldEvaluateSkipAtEnd){if(n.skipRecord&&n.limitRecord)return me;if(n.skipRecord)return ye;n.limitRecord}return ge}(),s=this.objectStore.index(e);return _(t.map((function(e){return t=e,d((function(e,r){var a=s.openCursor(n.util.keyRange(t));a.onsuccess=i.call(n,e,o),a.onerror=r}));var t})))},Se.prototype.executeWhereUndefinedLogic=function(){var e,t=this;if(this.query.order&&!1!==this.query.order.idbSorting&&this.query.order.by){if(!this.objectStore.indexNames.contains(this.query.order.by))return k(new b(r.ColumnNotExist,{column:this.query.order.by,isOrder:!0}));var n=this.query.order.type&&"desc"===this.query.order.type.toLowerCase()?"prev":"next";this.sorted=!0,e=this.objectStore.index(this.query.order.by).openCursor(null,n)}else e=this.objectStore.openCursor();var o=function(){if(!1===t.shouldEvaluateLimitAtEnd&&!1===t.shouldEvaluateSkipAtEnd){if(t.skipRecord&&t.limitRecord)return M;if(t.skipRecord)return L;if(t.limitRecord)return P}return B}();return d((function(n,r){e.onerror=r,e.onsuccess=o.call(t,n)}))},Se.prototype.executeWhereLogic=function(e,t,n,r){var o=this;t=n?t[n]:t;var i=this.objectStore.index(e).openCursor(this.util.keyRange(t,n),r),s=function(){if(!1===o.shouldEvaluateLimitAtEnd&&!1===o.shouldEvaluateSkipAtEnd){if(o.skipRecord&&o.limitRecord)return oe;if(o.skipRecord)return ie;if(o.limitRecord)return se}return ae}();return d((function(e,t){i.onerror=t,i.onsuccess=s.call(o,e)}))},Se.prototype.executeRegexLogic=function(e,t){var n=this,r=this.skipRecord,o=function(e){0===r?n.pushResult(e):--r};this.shouldAddValue=function(e){return t.test(e.key)&&n.whereCheckerInstance.check(e.value)};var i=this.objectStore.index(e).openCursor(),s=function(){if(!1===n.shouldEvaluateLimitAtEnd&&!1===n.shouldEvaluateSkipAtEnd){if(n.skipRecord&&n.limitRecord)return ve;if(n.skipRecord)return be;if(n.limitRecord)return we}return _e}();return d((function(e,t){i.onerror=t,i.onsuccess=s.call(n,e,o)}))},Se.prototype.setLimitAndSkipEvaluationAtEnd_=function(){this.query.limit&&(this.shouldEvaluateLimitAtEnd=!0),this.query.skip&&(this.shouldEvaluateSkipAtEnd=!0)},Se.prototype.setPushResult=function(){var e=this;this.query.case?this.pushResult=function(t){var n;for(n in e.thenEvaluator.setCaseAndValue(e.query.case,t),e.query.case)t[n]=e.thenEvaluator.setColumn(n).evaluate();e.results.push(t)}:this.pushResult=function(t){e.results.push(t)}},Se.prototype.removeDuplicates=function(){var e=this.results;this.results=null;for(var t=this.primaryKey(),n={},r=0,o=e.length;r<o;r++)n[e[r][t]]=e[r];for(var r in e=[],n)e.push(n[r]);this.results=e},Se.prototype.executeJoinQuery=function(){return new xe(this).execute()},Se.prototype.processGroupDistinctAggr=function(){if(this.query.distinct){var e=[],t=this.results[0];for(var n in t)e.push(n);var r=this.primaryKey(),o=e.indexOf(r);e.splice(o,1),this.query.groupBy=e.length>0?e:null}this.query.groupBy?this.query.aggregate?this.executeAggregateGroupBy():this.processGroupBy():this.query.aggregate&&this.processAggregateQry()},Se.prototype.processOrderBy=function(){var e=this.query.order;if(e&&this.results.length>0&&!this.sorted){var t=C(e);if(t===i.Object)ne.call(this,e);else if(t===i.Array){ne.call(this,e[0]);for(var n=function(t,n){var o=e[t-1].by,i=e[t],s=i.by,a=U.call(r,s);if(null!=a){s=a.name,i.type=re(i.type);var u=te(a,i);r.results.sort((function(e,t){return e[o]===t[o]?u(e[s],t[s]):0}))}},r=this,o=1,s=e.length;o<s;o++)n(o)}}},Se.prototype.processAggregateQry=function(){var e,t=this.results,n=t.length,r={};this.results=void 0;var o=function(){var n=0;for(var r in t)n+=t[r][e]?1:0;return n},s=function(){var n=0;for(var r in t)n=n>t[r][e]?n:t[r][e];return n},a=function(){var n=1/0,r=1/0;for(var o in t)n=n<(r=t[o][e]?t[o][e]:1/0)?n:r;return n},u=function(){var n=0;for(var r in t)n+=t[r][e];return n},c=function(){var r=0;for(var o in t)r+=t[o][e];return r/n};for(var l in this.query.aggregate){var f=this.query.aggregate[l],h=C(f),d=void 0;switch(l){case"count":d=o;break;case"max":d=s;break;case"min":d=a;break;case"sum":d=u;break;case"avg":d=c}switch(h){case i.String:r[l+"("+(e=f)+")"]=d();break;case i.Array:for(var p in f)r[l+"("+(e=f[p])+")"]=d()}}for(var l in r)t[0][l]=r[l];this.results=[t[0]]},Se.prototype.executeAggregateGroupBy=function(){var e=this.query.groupBy,t=this.results;this.results=void 0;var n,r,o,s,a={},c=this.query.aggregate,l=function(){var e=function(){return o=(o=a[r])?o["count("+s+")"]:0,o+=t[n][s]?1:0},l=function(){return o=(o=a[r])?o["max("+s+")"]:0,t[n][s]=t[n][s]?t[n][s]:0,o>t[n][s]?o:t[n][s]},f=function(){return o=(o=a[r])?o["min("+s+")"]:1/0,t[n][s]=t[n][s]?t[n][s]:1/0,o<t[n][s]?o:t[n][s]},h=function(){return o=(o=a[r])?o["sum("+s+")"]:0,o+=t[n][s]?t[n][s]:0},d=function(){var e=(o=a[r])?o["sum("+s+")"]:0;e+=t[n][s]?t[n][s]:0,t[n]["sum("+s+")"]=e,o=o?o["count("+s+")"]:0,o+=t[n][s]?1:0,t[n]["count("+s+")"]=o};for(var p in c){var m=c[p],y=C(m),g=void 0;switch(p){case u.Count:g=e;break;case u.Max:g=l;break;case u.Min:g=f;break;case u.Sum:g=h;break;case u.Avg:g=d}switch(y){case i.String:s=m,t[n][p+"("+s+")"]=g();break;case i.Array:for(var v in m)s=m[v],t[n][p+"("+s+")"]=g()}}};if(C(e)===i.String)for(n in t)r=t[n][e],l(),a[r]=t[n];else for(n in t){for(var f in r="",e)r+=t[n][e[f]];l(),a[r]=t[n]}for(var h in t=[],a)t.push(a[h]);if(c.avg)if(C(c.avg)===i.String)for(n in t){var d=t[n]["sum("+c.avg+")"],p=t[n]["count("+c.avg+")"];t[n]["avg("+c.avg+")"]=d/p,c.count!==c.avg&&delete t[n]["count("+c.avg+")"],c.sum!==c.avg&&delete t[n]["sum("+c.avg+")"]}else{var m=C(c.count)===i.String,y=C(c.sum)===i.String;for(n in t)for(var f in c.avg){var g=c.avg[f],v=t[n]["sum("+g+")"],b=t[n]["count("+g+")"];t[n]["avg("+g+")"]=v/b,m&&(c.count!==g||-1===c.count.indexOf(g))&&delete t[n]["count("+g+")"],y&&(c.sum!==g||-1===c.sum.indexOf(g))&&delete t[n]["sum("+g+")"]}}this.results=t},Se.prototype.processGroupBy=function(){var e=this.query.groupBy,t=this.results,n={};if(this.results=this.query.groupBy=null,C(e)!==i.Object)if(C(e)===i.String)for(var r in t)n[t[r][e]]=t[r];else{var o=void 0;for(var r in t){for(var s in o="",e)o+=t[r][e[s]];n[o]=t[r]}}else if(1===Object.keys(e).length){var a=W(e);for(var r in this.thenEvaluator.setCaseAndColumn(e,a),t)n[this.thenEvaluator.setValue(t[r]).evaluate()]=t[r]}else{o=void 0;for(var r in t){for(var s in o="",this.thenEvaluator.setCaseAndValue(e,t[r]),e)o+=this.thenEvaluator.setColumn(s).evaluate();n[o]=t[r]}}for(var r in t=[],n)t.push(n[r]);this.results=t};var Ee=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Oe=function(e){function t(t,n){var r=e.call(this)||this;return r.resultCount=0,r.query=t,r.util=n,r.tableName=t.from,r}return Ee(t,e),t.prototype.execute=function(e){var t=this;this.db=e;var n=new O(e),r=this.query,o=n.validate(s.Count,r);if(o)return k(o);try{var i=function(){var n=new Se(t.query,t.util);return n.isTxQuery=t.isTxQuery,n.execute(e).then((function(e){t.resultCount=e.length}))};return this.initTransaction_(),(null==r.join?null!=r.where?r.where.or||D(this.query.where)?i():this.goToWhereLogic():this.executeWhereUndefinedLogic():i()).then((function(e){return t.resultCount}))}catch(e){this.onException(e)}},t.prototype.initTransaction_=function(){this.isTxQuery||this.util.createTransaction([this.query.from],c.ReadOnly),this.objectStore=this.util.objectStore(this.query.from)},t}(pe);Oe.prototype.executeWhereUndefinedLogic=function(){var e,t,n=this,r=n.objectStore.count?(e=n.objectStore.count(),function(t){return function(){n.resultCount=e.result,t()}}):(e=n.objectStore.openCursor(),function(e){return function(r){(t=r.target.result)?(++n.resultCount,t.continue()):e()}});return d((function(t,n){e.onerror=n,e.onsuccess=r(t)}))},Oe.prototype.executeWhereLogic=function(e,t,n){var r,o,i=this;return t=n?t[n]:t,d((function(s,a){1===R(i.query.where)&&i.objectStore.count?(r=i.objectStore.index(e).count(i.util.keyRange(t,n))).onsuccess=function(){i.resultCount=r.result,s()}:(r=i.objectStore.index(e).openCursor(i.util.keyRange(t,n))).onsuccess=function(e){(o=e.target.result)?(i.whereCheckerInstance.check(o.value)&&++i.resultCount,o.continue()):s()},r.onerror=a}))},Oe.prototype.executeRegexLogic=function(e,t){var n,r=this,o=this.objectStore.index(e).openCursor();return this.shouldAddValue=function(e){return t.test(e.key)&&r.whereCheckerInstance.check(e.value)},d((function(e,t){o.onerror=t,o.onsuccess=function(t){(n=t.target.result)?(r.shouldAddValue(n)&&++r.resultCount,n.continue()):e()}}))},Oe.prototype.executeInLogic=function(e,t){var n,r=this,o=this.objectStore.index(e);return _(t.map((function(e){return t=e,i=r.util.keyRange(t),r.objectStore.count?d((function(e,t){var n=o.count(i);n.onsuccess=function(t){r.resultCount+=t.target.result,e()},n.onerror=t})):d((function(e,t){var s=o.openCursor(i);s.onsuccess=function(t){(n=t.target.result)?(r.whereCheckerInstance.check(n.value)&&++r.resultCount,n.continue()):e()},s.onerror=t}));var t,i})))};var qe=function(e,t){for(var n in e)if(C(e[n])!==i.Object)t[n]=e[n];else for(var r in e[n]){switch(r){case"+":t[n]+=e[n][r];break;case"-":t[n]-=e[n][r];break;case"*":t[n]*=e[n][r];break;case"/":t[n]/=e[n][r];break;case"{push}":t[n].push(e[n][r]);break;default:t[n]=e[n]}break}return t},je=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ae=function(e){function t(t,n){var r=e.call(this)||this;return r.query=t,r.util=n,r.tableName=t.in,r}return je(t,e),t.prototype.execute=function(e){var t=this;this.db=e;var n=this.query;try{var r=new O(e).validate(s.Update,n);if(r)return k(r);this.initTransaction();return(null!=n.where?n.where.or||D(n.where)?this.executeComplexLogic_():this.goToWhereLogic():this.executeWhereUndefinedLogic()).then((function(){return t.rowAffected}))}catch(e){return this.onException(e)}},t.prototype.executeComplexLogic_=function(){var e=this,t=this.query,n=new Se({from:t.in,where:t.where,ignoreCase:t.ignoreCase},this.util);return n.isTxQuery=this.isTxQuery,n.execute(this.db).then((function(n){var r,o,i=e.primaryKey(t.in),s=[];n.forEach((function(e){s.push(e[i])})),n=null;var a=((r={})[i]=((o={})[u.In]=s,o),r);return e.query.where=a,e.initTransaction(),e.goToWhereLogic()}))},t.prototype.initTransaction=function(){var e=this.query.in;this.isTxQuery||this.util.createTransaction([e]),this.objectStore=this.util.objectStore(e)},t}(pe);Ae.prototype.executeWhereUndefinedLogic=function(){var e=this,t=this.objectStore.openCursor(),n=this.query.set;return d((function(r,o){t.onsuccess=function(t){var i=t.target.result;if(i)try{var s=i.update(qe(n,i.value));s.onsuccess=function(){++e.rowAffected,i.continue()},s.onerror=o}catch(e){o(e)}else r()},t.onerror=o}))},Ae.prototype.executeWhereLogic=function(e,t,n){var r=this;t=n?t[n]:t;var o=this.objectStore.index(e).openCursor(this.util.keyRange(t,n)),i=this.query.set;return d((function(e,t){o.onsuccess=function(n){var o=n.target.result;if(o)if(r.whereCheckerInstance.check(o.value))try{var s=o.update(qe(i,o.value));s.onsuccess=function(){++r.rowAffected,o.continue()},s.onerror=t}catch(e){t(e)}else o.continue();else e()},o.onerror=t}))},Ae.prototype.executeRegexLogic=function(e,t){var n,r=this,o=this.objectStore.index(e).openCursor();this.shouldAddValue=function(e){return t.test(e.key)&&r.whereCheckerInstance.check(e.value)};var i=this.query.set;return d((function(e,t){o.onsuccess=function(o){if(n=o.target.result)if(r.shouldAddValue(n))try{var s=n.update(qe(i,n.value));s.onsuccess=function(){++r.rowAffected,n.continue()},s.onerror=t}catch(e){t(e)}else n.continue();else e()},o.onerror=t}))},Ae.prototype.executeInLogic=function(e,t){var n=this,r=this.objectStore.index(e),o=this.query;return _(t.map((function(e){return t=e,d((function(e,i){var s=r.openCursor(n.util.keyRange(t));s.onsuccess=function(t){var r=t.target.result;if(r){var s=r.value;if(n.whereCheckerInstance.check(s))try{var a=r.update(qe(o.set,s));a.onsuccess=function(){++n.rowAffected,r.continue()},a.onerror=i}catch(e){i(e)}else r.continue()}else e()},s.onerror=i}));var t})))};var Ie=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ne=function(){return(Ne=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},De=function(e){function t(t,n){var r=e.call(this)||this;return r.query=t,r.util=n,r}return Ie(t,e),t.prototype.execute=function(e){var t=this;this.db=e;var n,r,o=this.query,i=0,s={},a={},u=!0,c=o.queries,l=c.length;if(c.every((function(e,t){return!(t+1<l&&e.from!==c[t+1].from)||(u=!1,!1)})),u){var f=this.primaryKey(c[0].from);n=function(e){return e[f]}}else n=function(e){var t="";for(var n in e)t+=e[n];return t};var h=function(){if(i<l)return(r=new Se(c[i],t.util)).execute(t.db).then((function(e){return s={},e.forEach((function(e){var t=n(e);0===i?a[t]=e:null!=a[t]&&(s[t]=e)})),i>0&&(a=Ne({},s)),++i,h()}));var e,u=[],f=void 0,d=o.skip,p=o.limit,m=!1,y=function(){u.push(s[e])},g=function(){u.length<p?y():m=!0},v=function(e){0===d?e():--d};if(f=o.skip&&o.limit?function(){v((function(){g()}))}:o.limit?g:o.skip?function(){v((function(){y()}))}:function(){y()},p){for(e in s)if(f(e),m)break}else for(e in s)f(e);return r.results=u,Object.assign(r.query,{order:o.order,join:{}}),r.processOrderBy(),r.processGroupDistinctAggr(),r.results};return h()},t}($),Re=function(){function e(){}return e.prototype.execute=function(e){return d((function(t,n){var o=indexedDB.deleteDatabase(e);o.onblocked=function(){var e=new b(r.DbBlocked);return n(x(e))},o.onerror=function(e){return n(x(e))},o.onsuccess=function(){t()}}))},e}(),We=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Qe=function(e){function t(t,n){var r=e.call(this)||this;return r.query=t,r.util=n,r}return We(t,e),t.prototype.execute=function(e){var t=this;this.db=e;var n,r=this.query,o=0,i={},s=!0,a=r.length;if(r.every((function(e,t){return!(t+1<a&&e.from!==r[t+1].from)||(s=!1,!1)})),s){var u=this.primaryKey(r[0].from);n=function(e){return e[u]}}else n=function(e){var t="";for(var n in e)t+=e[n];return t};var c=function(){if(o<r.length)return new Se(r[o++],t.util).execute(e).then((function(e){return e.forEach((function(e){i[n(e)]=e})),c()}));var s=[];for(var a in i)s.push(i[a]);return s};return c()},t}($),Me=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Le=function(e){function t(t,n){var r=e.call(this)||this;return r.query=t,r.util=n,r.tableName=t.from,r}return Me(t,e),t.prototype.execute=function(e){var t=this;this.db=e;var n=new O(e),r=this.query,o=n.validate(s.Remove,r);if(o)return k(o);try{this.initTransaction_();return(null!=r.where?D(r.where)?this.processWhereArrayQry():this.processWhere_():this.executeWhereUndefinedLogic()).then((function(){return t.rowAffected}))}catch(e){return this.onException(e)}},t.prototype.processWhereArrayQry=function(){var e=this,t=new Se(this.query,this.util);return t.isTxQuery=this.isTxQuery,t.execute(this.db).then((function(t){var n,r,o=[],i=e.primaryKey(e.query.from);t.forEach((function(e){o.push(e[i])})),t=null;var s=((n={})[i]=((r={})[u.In]=o,r),n);return e.query[u.Where]=s,e.processWhere_()}))},t.prototype.processWhere_=function(){var e=this;return this.query.where.or&&this.processOrLogic(),this.goToWhereLogic().then((function(){return e.onWhereEvaluated()}))},t.prototype.initTransaction_=function(){this.isTxQuery||this.util.createTransaction([this.query.from]),this.objectStore=this.util.objectStore(this.query.from)},t.prototype.onWhereEvaluated=function(){if(this.isOr)return this.orQuerySuccess_()},t.prototype.orQuerySuccess_=function(){var e=this,t=W(this._orInfo.OrQuery);if(null!=t){var n={};return n[t]=this._orInfo.OrQuery[t],delete this._orInfo.OrQuery[t],this.query.where=n,this.goToWhereLogic().then((function(){return e.onWhereEvaluated()}))}this.isOr=!0},t.prototype.processOrLogic=function(){this.isOr=!0;var e=this.query.where;this._orInfo={OrQuery:e.or},delete e.or},t}(pe);Le.prototype.executeInLogic=function(e,t){var n=this,r=this.objectStore.index(e);return _(t.map((function(e){return t=e,d((function(e,o){var i=r.openCursor(n.util.keyRange(t));i.onsuccess=function(t){var r=t.target.result;r?(n.whereCheckerInstance.check(r.value)&&(r.delete(),++n.rowAffected),r.continue()):e()},i.onerror=o}));var t})))},Le.prototype.executeWhereUndefinedLogic=function(){var e,t=this,n=this.objectStore.openCursor();return d((function(r,o){n.onsuccess=function(n){(e=n.target.result)?(e.delete(),++t.rowAffected,e.continue()):r()},n.onerror=o}))},Le.prototype.executeWhereLogic=function(e,t,n){var r,o,i=this;return t=n?t[n]:t,o=this.objectStore.index(e).openCursor(this.util.keyRange(t,n)),d((function(e,t){o.onsuccess=function(t){(r=t.target.result)?(i.whereCheckerInstance.check(r.value)&&(r.delete(),++i.rowAffected),r.continue()):e()},o.onerror=t}))},Le.prototype.executeRegexLogic=function(e,t){var n,r=this,o=this.objectStore.index(e).openCursor();return this.shouldAddValue=function(e){return t.test(e.key)&&r.whereCheckerInstance.check(e.value)},d((function(e,t){o.onsuccess=function(t){(n=t.target.result)?(r.shouldAddValue(n)&&(n.delete(),++r.rowAffected),n.continue()):e()},o.onerror=t}))};var Be=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Pe=function(e){function t(t,n){var r=e.call(this)||this;return r.query=t,r.util=n,r.tableName=t,r}return Be(t,e),t.prototype.execute=function(e){var t=this;this.db=e;var n=this.query;this.isTxQuery||this.util.createTransaction([n,y.tableName]);var r=this.util.objectStore(n).clear();try{return d((function(o,i){r.onsuccess=function(r){var s=t.table(n);for(var a in s.autoIncColumnValue)s.autoIncColumnValue[a]=0;y.set(y.dbSchema,e,t.util).then((function(){o()})).catch(i)},r.onerror=i}))}catch(e){return this.onException(e)}},t}($),Fe=function(e){return(D(e)?e:e.split(".")).reduce((function(e,t){return e&&e[t]}),self)},Ue=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ve=function(e){function t(t,n){var r=e.call(this)||this;return r.results={},r.reqQueue=[],r.isQueryExecuting=!1,r.isTxStarted_=!1,r.query=t,r.util=n,r}return Ue(t,e),t.prototype.execute=function(e){var t=this;this.db=e;var n=this.validate();return n?k(n):(this.startExecution_(),d((function(e,n){t.onSuccess=e,t.onError=n})).then((function(e){return t.log("transaction finished"),e})))},t.prototype.validate=function(){var e=this.query,t=this.notExistingTable_(e.tables);if(t)return new b(r.TableNotExist,{tableName:t});var n=e.method;return Fe(n)?void 0:new b(r.MethodNotExist,n)},t.prototype.startExecution_=function(){var e=this,t=this.query,n=t.method,r=Fe(n);return this.log("transaction query started"),r.call(this,{data:t.data,insert:function(t){return e.pushReq_({name:s.Insert,query:t})},select:function(t){return e.pushReq_({name:s.Select,query:t})},update:function(t){return e.pushReq_({name:s.Update,query:t})},remove:function(t){return e.pushReq_({name:s.Remove,query:t})},count:function(t){return e.pushReq_({name:s.Count,query:t})},setResult:function(t,n){e.results[t]=n},getResult:function(t){return e.results[t]},abort:function(t){e.abortTx_(t)},start:function(){e.startTx_()}})},t.prototype.log=function(e){this.util.logger.log(e)},t.prototype.startTx_=function(){var e=this;try{this.isTxStarted_=!0;var t=this.query.tables;return t=t.concat(y.tableName),this.util.createTransaction(t).then((function(t){e.onSuccess(e.results)})).catch((function(t){e.onError(t)})),this.processExecutionOfQry_()}catch(e){this.onError(this.onException(e))}},t.prototype.onReqFinished_=function(e){var t=this.reqQueue.shift();this.log("finished request : "+t.name+" "),t&&(e.error?(this.abortTx_("automatic abort of transaction due to error occured"),this.log("transaction aborted due to error occured"),this.onError(e.error)):(this.isQueryExecuting=!1,t.onSuccess&&t.onSuccess(e),this.processExecutionOfQry_()))},t.prototype.abortTx_=function(e){this.reqQueue=[],this.util.abortTransaction(),this.log("transaction aborted. Msg : "+e)},t.prototype.executeRequest_=function(e){var t;this.isQueryExecuting=!0,this.log("executing request : "+e.name+" ");var n=this.onReqFinished_.bind(this),r=e.query;switch(e.name){case s.Select:t=new Se(r,this.util);break;case s.Insert:t=new j(r,this.util);break;case s.Update:t=new Ae(r,this.util);break;case s.Remove:t=new Le(r,this.util);break;case s.Count:t=new Oe(r,this.util)}t.isTxQuery=!0,t.execute(this.db).then(n).catch((function(e){n({error:e})}))},t.prototype.pushReq_=function(e){var t=this,n=function(){t.reqQueue.push(e)},r=d((function(t,n){e.onSuccess=function(e){t(e)},e.onError=function(e){n(e)}}));return!0===this.isTxStarted_?(n(),this.processExecutionOfQry_()):n(),this.log("request pushed : "+e.name),r},t.prototype.processExecutionOfQry_=function(){!1===this.isQueryExecuting&&this.reqQueue.length>0&&this.executeRequest_(this.reqQueue[0])},t.prototype.notExistingTable_=function(e){var t=this,n=null;return e.every((function(e){return null!=t.table(e)||(n=e,!1)})),n},t}($),Ge=function(e){var t={name:e.name,version:e.version,tables:[]};return e.tables.forEach((function(e){var n={name:e.name,columns:{}};e.columns.forEach((function(e){n.columns[e.name]=e})),t.tables.push(n)})),t},Je=function(){function e(e){this.middlewares=[],this.util=new w,this.onQryFinished=A?function(e){self.postMessage(e)}:e}return Object.defineProperty(e.prototype,"logger",{get:function(){return this.util.logger},enumerable:!1,configurable:!0}),e.prototype.executeMiddleware_=function(e){var t=this,n=R(this.middlewares)-1;if(n<0)return h();var r={},o=this.db;return Object.defineProperty(r,"database",{get:function(){return Ge(o)}}),d((function(o){var i=0,s=function(){if(i<=n){var a=Fe(t.middlewares[i++])(e,r);a&&a.then||(a=Promise.resolve(a)),a.then((function(e){s()}))}else o()};s()}))},e.prototype.executeQuery=function(e){var t,n=e.query;switch(e.name){case s.OpenDb:t=this.openDb(n);break;case s.InitDb:t=this.initDb(n);break;case s.CloseDb:t=this.closeDb();break;case s.Insert:t=new j(n,this.util).execute(this.db);break;case s.Select:t=new Se(n,this.util).execute(this.db);break;case s.Count:t=new Oe(n,this.util).execute(this.db);break;case s.Update:t=new Ae(n,this.util).execute(this.db);break;case s.Intersect:t=new De(n,this.util).execute(this.db);break;case s.DropDb:t=this.dropDb();break;case s.Terminate:t=this.terminate();break;case s.Union:t=new Qe(n,this.util).execute(this.db);break;case s.Remove:t=new Le(n,this.util).execute(this.db);break;case s.Clear:t=new Pe(n,this.util).execute(this.db);break;case s.Transaction:t=new Ve(n,this.util).execute(this.db);break;case s.Get:t=y.get(n,this.util);break;case s.Set:t=y.set(n.key,n.value,this.util);break;case s.ImportScripts:t=this.importScripts_(e);break;case s.ChangeLogStatus:this.logger.status=n,t=Promise.resolve();break;case s.Middleware:return Fe(n)?(this.middlewares.push(n),h()):k(new b(r.InvalidMiddleware,n));default:console.error("The Api:-"+e.name+" does not support."),t=h()}return this.logger.log("Executing query "+e.name+" in web worker"),t},e.prototype.callResultMiddleware=function(e,t){return d((function(n){var r=0,o=R(e)-1,i=function(){if(r<=o){var s=e[r++](t);s.then||(s=h(s)),s.then((function(e){t=e,i()}))}else n(t)};i()}))},e.prototype.run=function(e){var t=this,n=[];e.onResult=function(e){n.push((function(t){return e(t)}))},this.executeMiddleware_(e).then((function(r){return t.executeQuery(e).then((function(e){return t.callResultMiddleware(n,e).then((function(e){t.returnResult_({result:e})}))}))})).catch((function(e){n=[];var r={error:x(e)};t.returnResult_(r)}))},e.prototype.importScripts_=function(e){return d((function(t,n){try{importScripts.apply(void 0,e.query),t()}catch(e){n(new b(r.ImportScriptsFailed,e.message))}}))},e.prototype.returnResult_=function(e){this.logger.log("Query finished inside web worker"),this.util&&this.util.emptyTx(),this.onQryFinished(e)},e.prototype.dropDb=function(){var e=this.db.name;return this.terminate().then((function(){return(new Re).execute(e)}))},e.prototype.closeDb=function(){return this.util.close()},e.prototype.terminate=function(){var e=this;return this.closeDb().then((function(){e.db=null}))},e.prototype.openDb=function(e){var t,n=this;return t=this.db&&e.name===this.db.name?this.initDb():this.initDb({name:e.name,tables:[],version:e.version}),this.closeDb().then((function(e){return t.then((function(){return n.db}))}))},e.prototype.initDb=function(e){var t=this;if(!I)return k(new b(r.IndexedDbNotSupported));var n=e?new g(e):this.db;return this.util=new w,d((function(e,r){t.util.initDb(n).then((function(r){r.isCreated?y.get(y.dbSchema,t.util).then((function(o){o&&o.tables.forEach((function(e,t){n.tables[t].autoIncColumnValue=e.autoIncColumnValue})),t.db=n,r.database=Ge(t.db),y.set(y.dbSchema,n,t.util).then((function(){e(r)}))})):y.get(y.dbSchema,t.util).then((function(n){t.db=n,r.database=Ge(t.db),e(r)}))})).catch(r)}))},e}();if(A){var Ke=new Je;self.onmessage=function(e){Ke.run(e.data)}}}})})),jt={setup(e,t){e.$worker=qt,e.initQueryManager_()}};const At=[];function It(t,n=e){let r;const o=[];function i(e){if(a(t,e)&&(t=e,r)){const e=!At.length;for(let e=0;e<o.length;e+=1){const n=o[e];n[1](),At.push(n,t)}if(e){for(let e=0;e<At.length;e+=2)At[e][0](At[e+1]);At.length=0}}}return{set:i,update:function(e){i(e(t))},subscribe:function(s,a=e){const u=[s,a];return o.push(u),1===o.length&&(r=n(i)||e),s(t),()=>{const e=o.indexOf(u);-1!==e&&o.splice(e,1),0===o.length&&(r(),r=null)}}}}function Nt(e,t){return e.filter((function(e){return e!=t}))}const Dt=function(){const{subscribe:e,set:t,update:n}=It(20);return{subscribe:e,increment:()=>n((e=>e+20)),reset:()=>t(20)}}(),Rt=function(){const{subscribe:e,set:t,update:n}=It([]);return{subscribe:e,set:t,refresh:()=>n((e=>e))}}(),Wt=function(){const{subscribe:e,set:t}=It(!1);return{subscribe:e,yes:()=>t(!0),no:()=>t(!1)}}(),Qt=function(){const{subscribe:e,update:t}=It({playlists:{},users:{}});return{subscribe:e,update_criteria:(e,n)=>t((t=>{const r=[];e.forEach((e=>{r.push({id:e.subm_id,name:e.subm_name,type:0})}));const o=[];return n.forEach((e=>{o.push({id:e.playlist_id,name:e.playlist_name,type:1})})),[...r,...o]}))}}(),Mt=function(){const{subscribe:e,set:t,update:n}=It([]);return{subscribe:e,add:e=>n((t=>t.includes(e)?t:[...t,e])),delete:e=>n((t=>t.includes(e)?Nt(t,e):t)),toggle:e=>n((t=>t.includes(e)?Nt(t,e):[...t,e])),reset:()=>t([])}}(),Lt=function(){const{subscribe:e,set:t,update:n}=It([]);return{subscribe:e,add:e=>n((t=>t.includes(e)?t:[...t,e])),delete:e=>n((t=>t.includes(e)?Nt(t,e):t)),toggle:e=>n((t=>t.includes(e)?Nt(t,e):[...t,e])),reset:()=>t([])}}(),Bt=It(0);async function Pt(){await async function(){Vt=new Ot.Connection,Vt.addPlugin(jt)}(),await async function(){Gt={name:"playlists",columns:{id:{primaryKey:!0,notNull:!0,dataType:"string"},snapshot:{notNull:!0,dataType:"string"}}},Jt={name:"songs",columns:{uid:{primaryKey:!0,notNull:!0,dataType:"string"},unix:{notNull:!0,dataType:"number"},subm_name:{notNull:!0,dataType:"string"},subm_id:{notNull:!0,dataType:"string"},subm_link:{dataType:"string"},subm_images:{dataType:"object"},song_title:{notNull:!0,dataType:"string"},song_link:{dataType:"string"},song_popularity:{dataType:"number"},song_duration:{dataType:"number"},song_islocal:{dataType:"boolean"},song_id:{dataType:"string"},album_name:{dataType:"string"},album_link:{dataType:"string"},artists:{notNull:!0,dataType:"array"},playlist_name:{notNull:!0,dataType:"string"},playlist_link:{notNull:!0,dataType:"string"},playlist_id:{notNull:!0,dataType:"string"}}},Kt={name:"sctdb",tables:[Gt,Jt]},await Vt.initDb(Kt)}();const e=await async function(){const e=await Vt.select({from:"playlists"});let t={};e.forEach((e=>{t[e.id]=e.snapshot}));const n=await async function(e,t){let n="https://api.spotify.com/v1/me/playlists?limit=20",r=!0,o=t,i={update:{},remove:{}};for(;r;){const t=await fetch(n,{method:"GET",headers:Ct(e)}),s=await t.json();for(let e of s.items){const t=e.id,a=e.snapshot_id;e.collaborative&&(o.hasOwnProperty(t)?(o[t]!=a&&(i.update[t]=a),delete o[t]):i.update[t]=a),null!=s.next?n=s.next:r=!1}}return i.remove=o,i}(bt,t);return Object.keys(n.remove).forEach((e=>{Vt.remove({from:"playlists",where:{id:e}}),Vt.remove({from:"songs",where:{playlist_id:e}})})),Object.entries(n.update).forEach((e=>{const[t,n]=e,r={id:t,snapshot:n};Vt.insert({into:"playlists",values:[r],upsert:"true"}),Vt.remove({from:"songs",where:{playlist_id:t}})})),n}(),t=await async function(e){const t=await async function(e,t){const n=t,r={market:"from_token",limit:"100",fields:"name,id,external_urls,tracks.items(is_local,track(duration_ms,external_urls,name,popularity,id),added_at,added_by(id,external_urls,href),track.album(external_urls,name),track.artists(external_urls,name)),tracks(limit,next,offset)"},o={market:"from_token",limit:"100",fields:"items(is_local,track(duration_ms,external_urls,name,popularity,id),added_at,added_by(id,external_urls,href),track.album(external_urls,name),track.artists(external_urls,name)),limit,next,offset"};let i={},s=[];for(let t in n){let n,u=!0,c=new URL("https://api.spotify.com/v1/playlists/"+t),l=r;for(c.search=new URLSearchParams(l).toString();u;){const t=await fetch(c,{method:"GET",headers:Ct(e)});let r=await t.json();null!=n&&(n.tracks.items=r.items,n.tracks.next=r.next,r=n);for(let t of r.tracks.items)try{const n=(a=t.added_at,Date.parse(a)),o=t.added_by.id,u=t.added_by.external_urls.spotify,c=t.track.name,l=t.track.external_urls.spotify,f=t.track.popularity,h=t.is_local,d=t.track.id,p=t.track.duration_ms,m=t.track.album.name,y=t.track.album.external_urls.spotify,g=r.name,v=r.external_urls.spotify,b=r.id;let w=[];for(let e of t.track.artists)w.push({name:e.name,link:e.external_urls.spotify});i.hasOwnProperty(o)||(i[o]=await Tt(e,o));const _=i[o][0];let k;try{k=i[o][1][0]}catch{k=null}const x={uid:`${n} ${b} ${d}`,unix:n,subm_name:_,subm_id:o,subm_link:u,subm_images:k,song_title:c,song_link:l,song_popularity:f,song_duration:p,song_islocal:h,song_id:d,album_name:m,album_link:y,artists:w,playlist_name:g,playlist_link:v,playlist_id:b};s.push(x)}catch{}null!=r.tracks.next?(c=new URL(r.tracks.next),n=r,l=o):u=!1}}var a;return{songs:s}}(bt,e.update);return await Vt.insert({into:"songs",values:t.songs,upsert:"true"}),t}(e),n=await async function(){const e=await Vt.select({from:"songs",groupBy:"subm_name"}),t=await Vt.select({from:"songs",groupBy:"playlist_name"});return{users:e,playlists:t}}();return Qt.update_criteria(n.users,n.playlists),Ut(c(Qt)),0!=t.songs.length}async function Ft(e){return await async function(e){let t={from:"songs",order:{by:"unix",type:"desc"},limit:e,where:{}},n=[];c(Mt).forEach((e=>{n.push(e.id)}));const r=new RegExp(n.join("|"));""!=r&&(t.where.playlist_id={regex:r});n=[],c(Lt).forEach((e=>{n.push(e.id)}));const o=new RegExp(n.join("|"));""!=o&&(t.where.subm_id={regex:o});t.where==={}&&delete t.where;return await Vt.select(t)}(e)}function Ut(e){return e=(e=e.filter((e=>!c(Lt).includes(e)))).filter((e=>!c(Mt).includes(e)))}let Vt,Gt,Jt,Kt;function Ht(e){const t=e-1;return t*t*t+1}function Yt(e){return-e*(e-2)}function zt(e){return--e*e*e*e*e+1}function Xt(e,{delay:n=0,duration:r=400,easing:o=t}={}){const i=+getComputedStyle(e).opacity;return{delay:n,duration:r,easing:o,css:e=>"opacity: "+e*i}}function Zt(e,{delay:t=0,duration:n=400,easing:r=Ht,x:o=0,y:i=0,opacity:s=0}={}){const a=getComputedStyle(e),u=+a.opacity,c="none"===a.transform?"":a.transform,l=u*(1-s);return{delay:t,duration:n,easing:r,css:(e,t)=>`\n\t\t\ttransform: ${c} translate(${(1-e)*o}px, ${(1-e)*i}px);\n\t\t\topacity: ${u-l*t}`}}function en(e,t,n={}){const r=getComputedStyle(e),o="none"===r.transform?"":r.transform,i=t.from.width/e.clientWidth,a=t.from.height/e.clientHeight,u=(t.from.left-t.to.left)/i,c=(t.from.top-t.to.top)/a,l=Math.sqrt(u*u+c*c),{delay:f=0,duration:h=(e=>120*Math.sqrt(e)),easing:d=Ht}=n;return{delay:f,duration:s(h)?h(l):h,easing:d,css:(e,t)=>`transform: ${o} translate(${t*u}px, ${t*c}px);`}}const tn=(()=>{const{subscribe:e,update:t}=It([]);let n=0,r={};return{subscribe:e,push:(e,o={})=>{const i={id:++n,msg:e,...r,...o,theme:{...r.theme,...o.theme}};return t((e=>i.reversed?[...e,i]:[i,...e])),n},pop:e=>{t((t=>e?t.filter((t=>t.id!==e)):t.splice(1)))},set:(e,n)=>{t((t=>{const r=t.findIndex((t=>t.id===e));return r>-1&&(t[r]={...t[r],...n}),t}))},_opts:(e={})=>(r={...r,...e,theme:{...r.theme,...e.theme}},r)}})();function nn(e){return"[object Date]"===Object.prototype.toString.call(e)}function rn(e,t){if(e===t||e!=e)return()=>e;const n=typeof e;if(n!==typeof t||Array.isArray(e)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(e)){const n=t.map(((t,n)=>rn(e[n],t)));return e=>n.map((t=>t(e)))}if("object"===n){if(!e||!t)throw new Error("Object cannot be null");if(nn(e)&&nn(t)){e=e.getTime();const n=(t=t.getTime())-e;return t=>new Date(e+t*n)}const n=Object.keys(t),r={};return n.forEach((n=>{r[n]=rn(e[n],t[n])})),e=>{const t={};return n.forEach((n=>{t[n]=r[n](e)})),t}}if("number"===n){const n=t-e;return t=>e+t*n}throw new Error(`Cannot interpolate ${n} values`)}function on(t){let n,r,o;return{c(){n=T("div"),n.textContent="â",j(n,"class","_toastBtn svelte-1r0vvz1"),j(n,"role","button"),j(n,"tabindex","-1")},m(e,i){x(e,n,i),r||(o=q(n,"click",t[4]),r=!0)},p:e,d(e){e&&$(n),r=!1,o()}}}function sn(t){let n,r,o,i,s,a=t[0].msg+"",u=t[0].dismissable&&on(t);return{c(){n=T("div"),r=T("div"),o=E(),u&&u.c(),i=E(),s=T("progress"),j(r,"class","_toastMsg svelte-1r0vvz1"),j(s,"class","_toastBar svelte-1r0vvz1"),s.value=t[1],j(n,"class","_toastItem svelte-1r0vvz1")},m(e,t){x(e,n,t),k(n,r),r.innerHTML=a,k(n,o),u&&u.m(n,null),k(n,i),k(n,s)},p(e,[t]){1&t&&a!==(a=e[0].msg+"")&&(r.innerHTML=a),e[0].dismissable?u?u.p(e,t):(u=on(e),u.c(),u.m(n,i)):u&&(u.d(1),u=null),2&t&&(s.value=e[1])},i:e,o:e,d(e){e&&$(n),u&&u.d()}}}function an(e,r,o){let i,{item:s}=r;const a=function(e,r={}){const o=It(e);let i,s=e;function a(a,u){if(null==e)return o.set(e=a),Promise.resolve();s=a;let c=i,l=!1,{delay:f=0,duration:h=400,easing:d=t,interpolate:p=rn}=n(n({},r),u);if(0===h)return c&&(c.abort(),c=null),o.set(e=s),Promise.resolve();const m=g()+f;let y;return i=_((t=>{if(t<m)return!0;l||(y=p(e,a),"function"==typeof h&&(h=h(e,a)),l=!0),c&&(c.abort(),c=null);const n=t-m;return n>h?(o.set(e=a),!1):(o.set(e=y(d(n/h))),!0)})),i.promise}return{set:a,update:(t,n)=>a(t(s,e),n),subscribe:o.subscribe}}(s.initial,{duration:s.duration,easing:t});l(e,a,(e=>o(1,i=e)));let u=s.initial;return e.$$set=e=>{"item"in e&&o(0,s=e.item)},e.$$.update=()=>{9&e.$$.dirty&&u!==s.progress&&(1===s.progress||0===s.progress?a.set(s.progress).then((()=>tn.pop(s.id))):a.set(s.progress),o(3,u=s.progress))},[s,i,a,u,()=>tn.pop(s.id)]}class un extends Qe{constructor(e){super(),We(this,e,an,sn,a,{item:0})}}function cn(e,t,n){const r=e.slice();return r[4]=t[n],r}function ln(t,n){let r,o,i,s,a,u,c,l,f=e;return o=new un({props:{item:n[4]}}),{key:t,first:null,c(){r=T("li"),Ne(o.$$.fragment),i=E(),j(r,"style",s=n[1](n[4].theme)),this.first=r},m(e,t){x(e,r,t),De(o,r,null),k(r,i),l=!0},p(e,t){n=e;const i={};1&t&&(i.item=n[4]),o.$set(i),(!l||1&t&&s!==(s=n[1](n[4].theme)))&&j(r,"style",s)},r(){c=r.getBoundingClientRect()},f(){U(r),f(),V(r,c)},a(){f(),f=F(r,c,en,{duration:200})},i(e){l||(_e(o.$$.fragment,e),ue((()=>{u&&u.end(1),a||(a=$e(r,Zt,n[4].intro)),a.start()})),l=!0)},o(e){ke(o.$$.fragment,e),a&&a.invalidate(),u=Ce(r,Xt,{}),l=!1},d(e){e&&$(r),Re(o),e&&u&&u.end()}}}function fn(e){let t,n,r=[],o=new Map,i=e[0];const s=e=>e[4].id;for(let t=0;t<i.length;t+=1){let n=cn(e,i,t),a=s(n);o.set(a,r[t]=ln(a,n))}return{c(){t=T("ul");for(let e=0;e<r.length;e+=1)r[e].c();j(t,"class","svelte-1wt6bln")},m(e,o){x(e,t,o);for(let e=0;e<r.length;e+=1)r[e].m(t,null);n=!0},p(e,[n]){if(3&n){i=e[0],be();for(let e=0;e<r.length;e+=1)r[e].r();r=qe(r,n,s,1,e,i,o,t,Oe,ln,null,cn);for(let e=0;e<r.length;e+=1)r[e].a();we()}},i(e){if(!n){for(let e=0;e<i.length;e+=1)_e(r[e]);n=!0}},o(e){for(let e=0;e<r.length;e+=1)ke(r[e]);n=!1},d(e){e&&$(t);for(let e=0;e<r.length;e+=1)r[e].d()}}}function hn(e,t,n){let r;l(e,tn,(e=>n(0,r=e)));let{options:o={}}=t;tn._opts({duration:4e3,dismissable:!0,initial:1,progress:0,reversed:!1,intro:{x:256},theme:{}});return e.$$set=e=>{"options"in e&&n(2,o=e.options)},e.$$.update=()=>{4&e.$$.dirty&&tn._opts(o)},[r,e=>Object.keys(e).reduce(((t,n)=>`${t}${n}:${e[n]};`),""),o]}class dn extends Qe{constructor(e){super(),We(this,e,hn,fn,a,{options:2})}}var pn=St((function(e,t){!function(){var t={};e.exports=t,t.simpleFilter=function(e,n){return n.filter((function(n){return t.test(e,n)}))},t.test=function(e,n){return null!==t.match(e,n)},t.match=function(e,t,n){n=n||{};var r,o=0,i=[],s=t.length,a=0,u=0,c=n.pre||"",l=n.post||"",f=n.caseSensitive&&t||t.toLowerCase();e=n.caseSensitive&&e||e.toLowerCase();for(var h=0;h<s;h++)r=t[h],f[h]===e[o]?(r=c+r+l,o+=1,u+=1+u):u=0,a+=u,i[i.length]=r;return o===e.length?(a=f===e?1/0:a,{rendered:i.join(""),score:a}):null},t.filter=function(e,n,r){return n&&0!==n.length?"string"!=typeof e?n:(r=r||{},n.reduce((function(n,o,i,s){var a=o;r.extract&&(a=r.extract(o));var u=t.match(e,a,r);return null!=u&&(n[n.length]={string:u.rendered,score:u.score,index:i,original:o}),n}),[]).sort((function(e,t){var n=t.score-e.score;return n||e.index-t.index}))):[]}}()}));const mn=e=>({}),yn=e=>({});function gn(e){let t,r,o,s,a,u,c,l,h,p;const m=e[10].label,y=f(m,e,e[9],yn),g=y||function(e){let t;return{c(){t=S(e[2])},m(e,n){x(e,t,n)},p(e,n){4&n&&I(t,e[2])},d(e){e&&$(t)}}}(e);let v=[{name:"search"},{type:"search"},{placeholder:"Search..."},{autocomplete:"off"},{spellcheck:"false"},e[6],{id:e[4]}],b={};for(let e=0;e<v.length;e+=1)b=n(b,v[e]);return{c(){t=T("form"),r=T("label"),g&&g.c(),s=E(),a=T("input"),j(r,"id",o=e[4]+"-label"),j(r,"for",e[4]),j(r,"class","svelte-5m0wg6"),D(r,"hide-label",e[3]),A(a,b),D(a,"svelte-5m0wg6",!0),j(t,"data-svelte-search",""),j(t,"role",u=e[5]?null:"search"),j(t,"aria-labelledby",c=e[5]?null:e[4])},m(n,o){var i;x(n,t,o),k(t,r),g&&g.m(r,null),k(t,s),k(t,a),e[17](a),N(a,e[0]),l=!0,h||(p=[q(a,"input",e[18]),q(a,"input",e[12]),q(a,"change",e[13]),q(a,"focus",e[14]),q(a,"blur",e[15]),q(a,"keydown",e[16]),q(t,"submit",(i=e[11],function(e){return e.preventDefault(),i.call(this,e)}))],h=!0)},p(e,[n]){y?y.p&&512&n&&d(y,m,e,e[9],n,mn,yn):g&&g.p&&4&n&&g.p(e,n),(!l||16&n&&o!==(o=e[4]+"-label"))&&j(r,"id",o),(!l||16&n)&&j(r,"for",e[4]),8&n&&D(r,"hide-label",e[3]),A(a,b=je(v,[{name:"search"},{type:"search"},{placeholder:"Search..."},{autocomplete:"off"},{spellcheck:"false"},64&n&&e[6],(!l||16&n)&&{id:e[4]}])),1&n&&N(a,e[0]),D(a,"svelte-5m0wg6",!0),(!l||32&n&&u!==(u=e[5]?null:"search"))&&j(t,"role",u),(!l||48&n&&c!==(c=e[5]?null:e[4]))&&j(t,"aria-labelledby",c)},i(e){l||(_e(g,e),l=!0)},o(e){ke(g,e),l=!1},d(n){n&&$(t),g&&g.d(n),e[17](null),h=!1,i(p)}}}function vn(e,t,r){const o=["value","autofocus","debounce","label","hideLabel","id","ref","removeFormAriaAttributes"];let i=m(t,o),{$$slots:s={},$$scope:a}=t,{value:u=""}=t,{autofocus:c=!1}=t,{debounce:l=0}=t,{label:f="Label"}=t,{hideLabel:h=!1}=t,{id:d="search"+Math.random().toString(36)}=t,{ref:y=null}=t,{removeFormAriaAttributes:g=!1}=t;const v=z();let b,w=u,_=!1;return K((()=>(c&&window.requestAnimationFrame((()=>y.focus())),()=>clearTimeout(b)))),H((()=>{var e;u.length>0&&u!==w&&(l>0?(e=()=>v("type",u),_||(_=!0,b=setTimeout((()=>{e(),_=!1}),l))):v("type",u)),0===u.length&&w.length>0&&v("clear"),w=u})),e.$$set=e=>{t=n(n({},t),p(e)),r(6,i=m(t,o)),"value"in e&&r(0,u=e.value),"autofocus"in e&&r(7,c=e.autofocus),"debounce"in e&&r(8,l=e.debounce),"label"in e&&r(2,f=e.label),"hideLabel"in e&&r(3,h=e.hideLabel),"id"in e&&r(4,d=e.id),"ref"in e&&r(1,y=e.ref),"removeFormAriaAttributes"in e&&r(5,g=e.removeFormAriaAttributes),"$$scope"in e&&r(9,a=e.$$scope)},[u,y,f,h,d,g,i,c,l,a,s,function(t){Z(e,t)},function(t){Z(e,t)},function(t){Z(e,t)},function(t){Z(e,t)},function(t){Z(e,t)},function(t){Z(e,t)},function(e){te[e?"unshift":"push"]((()=>{y=e,r(1,y)}))},function(){u=this.value,r(0,u)}]}class bn extends Qe{constructor(e){super(),We(this,e,vn,gn,a,{value:0,autofocus:7,debounce:8,label:2,hideLabel:3,id:4,ref:1,removeFormAriaAttributes:5})}}function wn(e,t,n){const r=e.slice();return r[38]=t[n],r[40]=n,r}const _n=e=>({result:2&e[0]}),kn=e=>({result:e[38],index:e[40]});function xn(e){let t,n,r=e[1],o=[];for(let t=0;t<r.length;t+=1)o[t]=$n(wn(e,r,t));const i=e=>ke(o[e],1,1,(()=>{o[e]=null}));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=O()},m(e,r){for(let t=0;t<o.length;t+=1)o[t].m(e,r);x(e,t,r),n=!0},p(e,n){if(262342&n[0]){let s;for(r=e[1],s=0;s<r.length;s+=1){const i=wn(e,r,s);o[s]?(o[s].p(i,n),_e(o[s],1)):(o[s]=$n(i),o[s].c(),_e(o[s],1),o[s].m(t.parentNode,t))}for(be(),s=r.length;s<o.length;s+=1)i(s);we()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)_e(o[e]);n=!0}},o(e){o=o.filter(Boolean);for(let e=0;e<o.length;e+=1)ke(o[e]);n=!1},d(e){C(o,e),e&&$(t)}}}function $n(e){let t,n,r,o,i,s,a;const u=e[19].default,c=f(u,e,e[18],kn),l=c||function(e){let t,n,r=e[38].string+"";return{c(){n=O(),t=new W(n)},m(e,o){t.m(r,e,o),x(e,n,o)},p(e,n){2&n[0]&&r!==(r=e[38].string+"")&&t.p(r)},d(e){e&&$(n),e&&t.d()}}}(e);function h(){return e[33](e[38],e[40])}return{c(){t=T("li"),l&&l.c(),n=E(),j(t,"role","option"),j(t,"id",r=e[2]+"-result-"+e[40]),j(t,"aria-selected",o=e[6]===e[40]),j(t,"class","svelte-t0wd5r"),D(t,"selected",e[6]===e[40]),D(t,"disabled",e[38].disabled)},m(e,r){x(e,t,r),l&&l.m(t,null),k(t,n),i=!0,s||(a=q(t,"click",h),s=!0)},p(n,s){e=n,c?c.p&&262146&s[0]&&d(c,u,e,e[18],s,_n,kn):l&&l.p&&2&s[0]&&l.p(e,s),(!i||4&s[0]&&r!==(r=e[2]+"-result-"+e[40]))&&j(t,"id",r),(!i||64&s[0]&&o!==(o=e[6]===e[40]))&&j(t,"aria-selected",o),64&s[0]&&D(t,"selected",e[6]===e[40]),2&s[0]&&D(t,"disabled",e[38].disabled)},i(e){i||(_e(l,e),i=!0)},o(e){ke(l,e),i=!1},d(e){e&&$(t),l&&l.d(e),s=!1,a()}}}function Cn(e){let t,r,o,i,s,a,u,c,l,f,h,d,p,m;const y=[{id:e[2]},{removeFormAriaAttributes:!0},e[8],{"aria-autocomplete":"list"},{"aria-controls":e[2]+"-listbox"},{"aria-labelledby":e[2]+"-label"},{"aria-activedescendant":e[6]>=0&&!e[5]&&e[1].length>0?`${e[2]}-result-${e[6]}`:null}];function g(t){e[21](t)}function v(t){e[22](t)}let b={};for(let e=0;e<y.length;e+=1)b=n(b,y[e]);void 0!==e[4]&&(b.ref=e[4]),void 0!==e[0]&&(b.value=e[0]),r=new bn({props:b}),te.push((()=>Ie(r,"ref",g))),te.push((()=>Ie(r,"value",v))),r.$on("type",e[23]),r.$on("input",e[24]),r.$on("change",e[25]),r.$on("focus",e[26]),r.$on("focus",e[27]),r.$on("clear",e[28]),r.$on("clear",e[29]),r.$on("blur",e[30]),r.$on("keydown",e[31]),r.$on("keydown",e[32]);let w=!e[5]&&e[1].length>0&&xn(e);return{c(){t=T("div"),Ne(r.$$.fragment),s=E(),a=T("ul"),w&&w.c(),j(a,"role","listbox"),j(a,"aria-labelledby",u=e[2]+"-label"),j(a,"id",c=e[2]+"-listbox"),j(a,"class","svelte-t0wd5r"),D(a,"svelte-typeahead-list",!0),j(t,"data-svelte-typeahead",""),j(t,"role","combobox"),j(t,"aria-haspopup","listbox"),j(t,"aria-owns",l=e[2]+"-listbox"),j(t,"aria-expanded",f=!e[5]&&e[1].length>0),j(t,"id",h=e[2]+"-typeahead"),j(t,"class","svelte-t0wd5r"),D(t,"dropdown",e[1].length>0)},m(n,o){x(n,t,o),De(r,t,null),k(t,s),k(t,a),w&&w.m(a,null),e[34](t),d=!0,p||(m=q(window,"click",e[20]),p=!0)},p(e,n){const s=358&n[0]?je(y,[4&n[0]&&{id:e[2]},y[1],256&n[0]&&Ae(e[8]),y[3],4&n[0]&&{"aria-controls":e[2]+"-listbox"},4&n[0]&&{"aria-labelledby":e[2]+"-label"},102&n[0]&&{"aria-activedescendant":e[6]>=0&&!e[5]&&e[1].length>0?`${e[2]}-result-${e[6]}`:null}]):{};!o&&16&n[0]&&(o=!0,s.ref=e[4],ce((()=>o=!1))),!i&&1&n[0]&&(i=!0,s.value=e[0],ce((()=>i=!1))),r.$set(s),!e[5]&&e[1].length>0?w?(w.p(e,n),34&n[0]&&_e(w,1)):(w=xn(e),w.c(),_e(w,1),w.m(a,null)):w&&(be(),ke(w,1,1,(()=>{w=null})),we()),(!d||4&n[0]&&u!==(u=e[2]+"-label"))&&j(a,"aria-labelledby",u),(!d||4&n[0]&&c!==(c=e[2]+"-listbox"))&&j(a,"id",c),(!d||4&n[0]&&l!==(l=e[2]+"-listbox"))&&j(t,"aria-owns",l),(!d||34&n[0]&&f!==(f=!e[5]&&e[1].length>0))&&j(t,"aria-expanded",f),(!d||4&n[0]&&h!==(h=e[2]+"-typeahead"))&&j(t,"id",h),2&n[0]&&D(t,"dropdown",e[1].length>0)},i(e){d||(_e(r.$$.fragment,e),_e(w),d=!0)},o(e){ke(r.$$.fragment,e),ke(w),d=!1},d(n){n&&$(t),Re(r),w&&w.d(),e[34](null),p=!1,m()}}}function Tn(e,t,r){let o,i;const s=["id","value","data","extract","disable","filter","autoselect","inputAfterSelect","results","focusAfterSelect","limit"];let a=m(t,s),{$$slots:u={},$$scope:c}=t,{id:l="typeahead-"+Math.random().toString(36)}=t,{value:f=""}=t,{data:h=[]}=t,{extract:d=(e=>e)}=t,{disable:y=(e=>!1)}=t,{filter:g=(e=>!1)}=t,{autoselect:v=!0}=t,{inputAfterSelect:b="update"}=t,{results:w=[]}=t,{focusAfterSelect:_=!1}=t,{limit:k=1/0}=t;const x=z();let $=null,C=null,T=!1,S=-1,E="";async function O(){const e=w[S],t=d(e.original),n=f;"clear"==b&&r(0,f=""),"update"==b&&r(0,f=t),x("select",{selectedIndex:S,searched:n,selected:t,original:e.original,originalIndex:e.index}),await ae(),_&&C.focus(),r(5,T=!0)}H((()=>{E!==i&&v&&r(6,S=0),E!==i&&r(5,T=0===w.length),E=i}));return e.$$set=e=>{t=n(n({},t),p(e)),r(8,a=m(t,s)),"id"in e&&r(2,l=e.id),"value"in e&&r(0,f=e.value),"data"in e&&r(9,h=e.data),"extract"in e&&r(10,d=e.extract),"disable"in e&&r(11,y=e.disable),"filter"in e&&r(12,g=e.filter),"autoselect"in e&&r(13,v=e.autoselect),"inputAfterSelect"in e&&r(14,b=e.inputAfterSelect),"results"in e&&r(1,w=e.results),"focusAfterSelect"in e&&r(15,_=e.focusAfterSelect),"limit"in e&&r(16,k=e.limit),"$$scope"in e&&r(18,c=e.$$scope)},e.$$.update=()=>{1024&e.$$.dirty[0]&&r(17,o={pre:"<mark>",post:"</mark>",extract:d}),203265&e.$$.dirty[0]&&r(1,w=pn.filter(f,h,o).filter((({score:e})=>e>0)).slice(0,k).filter((e=>!g(e.original))).map((e=>({...e,disabled:y(e.original)})))),1026&e.$$.dirty[0]&&(i=w.map((e=>d(e.original))).join(""))},[f,w,l,$,C,T,S,O,a,h,d,y,g,v,b,_,k,o,c,u,({target:e})=>{!T&&w.length>0&&$&&!$.contains(e)&&r(5,T=!0)},function(e){C=e,r(4,C)},function(e){f=e,r(0,f)},function(t){Z(e,t)},function(t){Z(e,t)},function(t){Z(e,t)},function(t){Z(e,t)},()=>{r(5,T=!1)},function(t){Z(e,t)},()=>{r(5,T=!1)},function(t){Z(e,t)},function(t){Z(e,t)},e=>{switch(e.key){case"Enter":O();break;case"ArrowDown":e.preventDefault(),r(6,S+=1),S===w.length&&r(6,S=0);break;case"ArrowUp":e.preventDefault(),r(6,S-=1),S<0&&r(6,S=w.length-1);break;case"Escape":e.preventDefault(),r(0,f=""),C.focus(),r(5,T=!0)}},(e,t)=>{e.disabled||(r(6,S=t),O())},function(e){te[e?"unshift":"push"]((()=>{$=e,r(3,$)}))}]}class Sn extends Qe{constructor(e){super(),We(this,e,Tn,Cn,a,{id:2,value:0,data:9,extract:10,disable:11,filter:12,autoselect:13,inputAfterSelect:14,results:1,focusAfterSelect:15,limit:16},[-1,-1])}}function En(e,t,n){const r=e.slice();return r[12]=t[n],r}function On(e,t,n){const r=e.slice();return r[15]=t[n],r}function qn(e){let t,n,r,o,i=e[18].string+"",s=Nn(e[18].original.type)+"";return{c(){n=E(),r=T("span"),o=S(s),t=new W(n),j(r,"class","category-info svelte-1ere1q4")},m(e,s){t.m(i,e,s),x(e,n,s),x(e,r,s),k(r,o)},p(e,n){262144&n&&i!==(i=e[18].string+"")&&t.p(i),262144&n&&s!==(s=Nn(e[18].original.type)+"")&&I(o,s)},d(e){e&&t.d(),e&&$(n),e&&$(r)}}}function jn(e){let t,n,r,o,i=e[15].name+"";function s(){return e[7](e[15])}return{c(){t=T("button"),n=S(i),j(t,"class","svelte-1ere1q4")},m(e,i){x(e,t,i),k(t,n),r||(o=q(t,"click",s),r=!0)},p(t,r){e=t,1&r&&i!==(i=e[15].name+"")&&I(n,i)},d(e){e&&$(t),r=!1,o()}}}function An(e){let t,n,r,o,i,s=e[12].name+"";function a(){return e[8](e[12])}return{c(){t=T("button"),n=S(s),r=E(),j(t,"class","svelte-1ere1q4")},m(e,s){x(e,t,s),k(t,n),k(t,r),o||(i=q(t,"click",a),o=!0)},p(t,r){e=t,2&r&&s!==(s=e[12].name+"")&&I(n,s)},d(e){e&&$(t),o=!1,i()}}}function In(e){let t,n,r,o,i;t=new Sn({props:{data:e[3],extract:e[2],limit:"5",inputAfterSelect:"clear",placeholder:"search for filters...",hideLabel:"true",autoselect:"false",$$slots:{default:[qn,({result:e})=>({18:e}),({result:e})=>e?262144:0]},$$scope:{ctx:e}}}),t.$on("select",e[6]);let s=e[0],a=[];for(let t=0;t<s.length;t+=1)a[t]=jn(On(e,s,t));let u=e[1],c=[];for(let t=0;t<u.length;t+=1)c[t]=An(En(e,u,t));return{c(){Ne(t.$$.fragment),n=E(),r=T("div");for(let e=0;e<a.length;e+=1)a[e].c();o=E();for(let e=0;e<c.length;e+=1)c[e].c();j(r,"class","filter-buttons svelte-1ere1q4")},m(e,s){De(t,e,s),x(e,n,s),x(e,r,s);for(let e=0;e<a.length;e+=1)a[e].m(r,null);k(r,o);for(let e=0;e<c.length;e+=1)c[e].m(r,null);i=!0},p(e,[n]){const i={};if(786432&n&&(i.$$scope={dirty:n,ctx:e}),t.$set(i),33&n){let t;for(s=e[0],t=0;t<s.length;t+=1){const i=On(e,s,t);a[t]?a[t].p(i,n):(a[t]=jn(i),a[t].c(),a[t].m(r,o))}for(;t<a.length;t+=1)a[t].d(1);a.length=s.length}if(34&n){let t;for(u=e[1],t=0;t<u.length;t+=1){const o=En(e,u,t);c[t]?c[t].p(o,n):(c[t]=An(o),c[t].c(),c[t].m(r,null))}for(;t<c.length;t+=1)c[t].d(1);c.length=u.length}},i(e){i||(_e(t.$$.fragment,e),i=!0)},o(e){ke(t.$$.fragment,e),i=!1},d(e){Re(t,e),e&&$(n),e&&$(r),C(a,e),C(c,e)}}}function Nn(e){switch(e){case 0:return"in users";case 1:return"in playlists"}}function Dn(e,t,n){let r,o,i,s;l(e,Qt,(e=>n(9,r=e))),l(e,Dt,(e=>n(10,o=e))),l(e,Lt,(e=>n(0,i=e))),l(e,Mt,(e=>n(1,s=e)));function a(){Ft(o).then((e=>{Bt.set(1e3),Rt.set(e),Wt.yes()}))}function u(e){0==e.type?Lt.add(e):1==e.type&&Mt.add(e),a(),Ut(r)}function c(e){0==e.type?Lt.delete(e):1==e.type&&Mt.delete(e),a(),Ut(r)}return[i,s,e=>e.name,r,u,c,e=>{u(e.detail.original)},e=>{c(e)},e=>{c(e)}]}class Rn extends Qe{constructor(e){super(),We(this,e,Dn,In,a,{})}}function Wn(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function Qn(e){Wn(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function Mn(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function Ln(e,t){Wn(2,arguments);var n=Qn(e),r=Qn(t),o=n.getTime()-r.getTime();return o<0?-1:o>0?1:o}function Bn(e,t){Wn(2,arguments);var n=Qn(e),r=Qn(t),o=n.getFullYear()-r.getFullYear(),i=n.getMonth()-r.getMonth();return 12*o+i}function Pn(e,t){Wn(2,arguments);var n=Qn(e),r=Qn(t);return n.getTime()-r.getTime()}function Fn(e){Wn(1,arguments);var t=Qn(e);return t.setHours(23,59,59,999),t}function Un(e){Wn(1,arguments);var t=Qn(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function Vn(e){Wn(1,arguments);var t=Qn(e);return Fn(t).getTime()===Un(t).getTime()}function Gn(e,t){Wn(2,arguments);var n,r=Qn(e),o=Qn(t),i=Ln(r,o),s=Math.abs(Bn(r,o));if(s<1)n=0;else{1===r.getMonth()&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-i*s);var a=Ln(r,o)===-i;Vn(Qn(e))&&1===s&&1===Ln(e,o)&&(a=!1),n=i*(s-Number(a))}return 0===n?0:n}function Jn(e,t){Wn(2,arguments);var n=Pn(e,t)/1e3;return n>0?Math.floor(n):Math.ceil(n)}var Kn={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function Hn(e){return function(t){var n=t||{},r=n.width?String(n.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}var Yn={date:Hn({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Hn({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:Hn({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},zn={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function Xn(e){return function(t,n){var r,o=n||{};if("formatting"===(o.context?String(o.context):"standalone")&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,s=o.width?String(o.width):i;r=e.formattingValues[s]||e.formattingValues[i]}else{var a=e.defaultWidth,u=o.width?String(o.width):e.defaultWidth;r=e.values[u]||e.values[a]}return r[e.argumentCallback?e.argumentCallback(t):t]}}function Zn(e){return function(t,n){var r=String(t),o=n||{},i=o.width,s=i&&e.matchPatterns[i]||e.matchPatterns[e.defaultMatchWidth],a=r.match(s);if(!a)return null;var u,c=a[0],l=i&&e.parsePatterns[i]||e.parsePatterns[e.defaultParseWidth];return u="[object Array]"===Object.prototype.toString.call(l)?function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}(l,(function(e){return e.test(c)})):function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}(l,(function(e){return e.test(c)})),u=e.valueCallback?e.valueCallback(u):u,{value:u=o.valueCallback?o.valueCallback(u):u,rest:r.slice(c.length)}}}var er,tr={code:"en-US",formatDistance:function(e,t,n){var r;return n=n||{},r="string"==typeof Kn[e]?Kn[e]:1===t?Kn[e].one:Kn[e].other.replace("{{count}}",t),n.addSuffix?n.comparison>0?"in "+r:r+" ago":r},formatLong:Yn,formatRelative:function(e,t,n,r){return zn[e]},localize:{ordinalNumber:function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:Xn({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:Xn({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return Number(e)-1}}),month:Xn({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:Xn({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:Xn({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(er={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e,t){var n=String(e),r=t||{},o=n.match(er.matchPattern);if(!o)return null;var i=o[0],s=n.match(er.parsePattern);if(!s)return null;var a=er.valueCallback?er.valueCallback(s[0]):s[0];return{value:a=r.valueCallback?r.valueCallback(a):a,rest:n.slice(i.length)}}),era:Zn({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:Zn({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Zn({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:Zn({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:Zn({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function nr(e){return function(e,t){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in t=t||{})t.hasOwnProperty(n)&&(e[n]=t[n]);return e}({},e)}var rr=1440,or=43200;function ir(e,t,n){const r=e.slice();return r[9]=t[n].name,r[10]=t[n].link,r[12]=n,r}function sr(e){let t,n,r,o,i=e[9]+"",s=ur(e[2],e[12])+"";return{c(){t=T("a"),n=S(i),o=S(s),j(t,"href",r=e[10]),j(t,"target","_blank"),j(t,"class","svelte-vbc8jy")},m(e,r){x(e,t,r),k(t,n),x(e,o,r)},p(e,a){4&a&&i!==(i=e[9]+"")&&I(n,i),4&a&&r!==(r=e[10])&&j(t,"href",r),4&a&&s!==(s=ur(e[2],e[12])+"")&&I(o,s)},d(e){e&&$(t),e&&$(o)}}}function ar(t){let n,r,o,i,s,a,u,c,l,f,h,d,p,m,y,g,v,b,w,_,O,q=t[8](t[7])+"",A=t[2],N=[];for(let e=0;e<A.length;e+=1)N[e]=sr(ir(t,A,e));return{c(){n=T("h1"),r=T("a"),o=S(t[1]),i=E(),s=T("h2"),a=S("by \n\t\t");for(let e=0;e<N.length;e+=1)N[e].c();u=E(),c=T("h3"),l=S("added to "),f=T("a"),h=S(t[3]),d=S(" \n\t\tby "),p=T("a"),m=T("b"),y=S(t[6]),g=E(),v=S(q),b=E(),w=T("br"),_=E(),O=T("br"),j(r,"href",t[0]),j(r,"target","_blank"),j(r,"class","svelte-vbc8jy"),j(n,"class","svelte-vbc8jy"),j(s,"class","svelte-vbc8jy"),j(f,"href",t[4]),j(f,"target","_blank"),j(f,"class","svelte-vbc8jy"),j(p,"href",t[5]),j(p,"target","_blank"),j(p,"class","svelte-vbc8jy"),j(c,"class","svelte-vbc8jy")},m(e,t){x(e,n,t),k(n,r),k(r,o),x(e,i,t),x(e,s,t),k(s,a);for(let e=0;e<N.length;e+=1)N[e].m(s,null);x(e,u,t),x(e,c,t),k(c,l),k(c,f),k(f,h),k(c,d),k(c,p),k(p,m),k(m,y),k(c,g),k(c,v),x(e,b,t),x(e,w,t),x(e,_,t),x(e,O,t)},p(e,[t]){if(2&t&&I(o,e[1]),1&t&&j(r,"href",e[0]),4&t){let n;for(A=e[2],n=0;n<A.length;n+=1){const r=ir(e,A,n);N[n]?N[n].p(r,t):(N[n]=sr(r),N[n].c(),N[n].m(s,null))}for(;n<N.length;n+=1)N[n].d(1);N.length=A.length}8&t&&I(h,e[3]),16&t&&j(f,"href",e[4]),64&t&&I(y,e[6]),32&t&&j(p,"href",e[5]),128&t&&q!==(q=e[8](e[7])+"")&&I(v,q)},i:e,o:e,d(e){e&&$(n),e&&$(i),e&&$(s),C(N,e),e&&$(u),e&&$(c),e&&$(b),e&&$(w),e&&$(_),e&&$(O)}}}function ur(e,t){return e.length-1==t?"":e.length-2==t?" & ":", "}function cr(e,t,n){let{song_link:r}=t,{song_title:o}=t,{artists:i}=t,{playlist_name:s}=t,{playlist_link:a}=t,{subm_link:u}=t,{subm_name:c}=t,{unix:l}=t;return e.$$set=e=>{"song_link"in e&&n(0,r=e.song_link),"song_title"in e&&n(1,o=e.song_title),"artists"in e&&n(2,i=e.artists),"playlist_name"in e&&n(3,s=e.playlist_name),"playlist_link"in e&&n(4,a=e.playlist_link),"subm_link"in e&&n(5,u=e.subm_link),"subm_name"in e&&n(6,c=e.subm_name),"unix"in e&&n(7,l=e.unix)},[r,o,i,s,a,u,c,l,function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Wn(2,arguments);var r=n.locale||tr;if(!r.formatDistance)throw new RangeError("locale must contain formatDistance property");var o=Ln(e,t);if(isNaN(o))throw new RangeError("Invalid time value");var i,s,a=nr(n);a.addSuffix=Boolean(n.addSuffix),a.comparison=o,o>0?(i=Qn(t),s=Qn(e)):(i=Qn(e),s=Qn(t));var u,c=Jn(s,i),l=(Mn(s)-Mn(i))/1e3,f=Math.round((c-l)/60);if(f<2)return n.includeSeconds?c<5?r.formatDistance("lessThanXSeconds",5,a):c<10?r.formatDistance("lessThanXSeconds",10,a):c<20?r.formatDistance("lessThanXSeconds",20,a):c<40?r.formatDistance("halfAMinute",null,a):c<60?r.formatDistance("lessThanXMinutes",1,a):r.formatDistance("xMinutes",1,a):0===f?r.formatDistance("lessThanXMinutes",1,a):r.formatDistance("xMinutes",f,a);if(f<45)return r.formatDistance("xMinutes",f,a);if(f<90)return r.formatDistance("aboutXHours",1,a);if(f<rr){var h=Math.round(f/60);return r.formatDistance("aboutXHours",h,a)}if(f<2520)return r.formatDistance("xDays",1,a);if(f<or){var d=Math.round(f/rr);return r.formatDistance("xDays",d,a)}if(f<86400)return u=Math.round(f/or),r.formatDistance("aboutXMonths",u,a);if((u=Gn(s,i))<12){var p=Math.round(f/or);return r.formatDistance("xMonths",p,a)}var m=u%12,y=Math.floor(u/12);return m<3?r.formatDistance("aboutXYears",y,a):m<9?r.formatDistance("overXYears",y,a):r.formatDistance("almostXYears",y+1,a)}(new Date(e),new Date,{addSuffix:!0})}]}class lr extends Qe{constructor(e){super(),We(this,e,cr,ar,a,{song_link:0,song_title:1,artists:2,playlist_name:3,playlist_link:4,subm_link:5,subm_name:6,unix:7})}}function fr(e,t,n){const r=e.slice();return r[5]=t[n],r}function hr(t){return{c:e,m:e,p:e,i:e,o:e,d:e}}function dr(e){let t,n,r,o,i,s=[],a=new Map;t=new Rn({});let u=e[0];const c=e=>e[5].uid;for(let t=0;t<u.length;t+=1){let n=fr(e,u,t),r=c(n);a.set(r,s[t]=pr(r,n))}return o=new dt({props:{spinner:"wavedots",$$slots:{noResults:[yr],noMore:[mr]},$$scope:{ctx:e}}}),o.$on("infinite",e[2]),{c(){Ne(t.$$.fragment),n=E();for(let e=0;e<s.length;e+=1)s[e].c();r=E(),Ne(o.$$.fragment)},m(e,a){De(t,e,a),x(e,n,a);for(let t=0;t<s.length;t+=1)s[t].m(e,a);x(e,r,a),De(o,e,a),i=!0},p(e,t){if(1&t){u=e[0],be();for(let e=0;e<s.length;e+=1)s[e].r();s=qe(s,t,c,1,e,u,a,r.parentNode,Oe,pr,r,fr);for(let e=0;e<s.length;e+=1)s[e].a();we()}const n={};256&t&&(n.$$scope={dirty:t,ctx:e}),o.$set(n)},i(e){if(!i){_e(t.$$.fragment,e);for(let e=0;e<u.length;e+=1)_e(s[e]);_e(o.$$.fragment,e),i=!0}},o(e){ke(t.$$.fragment,e);for(let e=0;e<s.length;e+=1)ke(s[e]);ke(o.$$.fragment,e),i=!1},d(e){Re(t,e),e&&$(n);for(let t=0;t<s.length;t+=1)s[t].d(e);e&&$(r),Re(o,e)}}}function pr(t,r){let o,i,s,a,u,c,l,f,h=e;const d=[r[5]];let p={};for(let e=0;e<d.length;e+=1)p=n(p,d[e]);return a=new lr({props:p}),{key:t,first:null,c(){o=T("div"),i=T("div"),s=T("div"),Ne(a.$$.fragment),this.first=o},m(e,t){x(e,o,t),k(o,i),k(i,s),De(a,s,null),f=!0},p(e,t){r=e;const n=1&t?je(d,[Ae(r[5])]):{};a.$set(n)},r(){l=o.getBoundingClientRect()},f(){U(o),h()},a(){h(),h=F(o,l,en,{duration:2e3,easing:zt,delay:500})},i(e){f||(_e(a.$$.fragment,e),u&&u.end(1),c||ue((()=>{c=$e(i,Zt,{duration:3e3,x:-300,opacity:0,easing:zt,delay:r[1]}),c.start()})),f=!0)},o(e){ke(a.$$.fragment,e),u=Ce(s,Zt,{duration:3e3,x:300,opacity:0,easing:zt}),f=!1},d(e){e&&$(o),Re(a),e&&u&&u.end()}}}function mr(e){let t;return{c(){t=T("span"),t.textContent="that's all folks!",j(t,"slot","noMore")},m(e,n){x(e,t,n)},d(e){e&&$(t)}}}function yr(e){let t;return{c(){t=T("span"),t.textContent="that's all folks!",j(t,"slot","noResults")},m(e,n){x(e,t,n)},d(e){e&&$(t)}}}function gr(t){let n;return{c(){n=T("p"),n.innerHTML="fetching your collaborative playlists from spotify.\n\t\t\t<br/> \n\t\t\t<br/>\n\t\t\tif this is your first time launching this page, this might take a while."},m(e,t){x(e,n,t)},p:e,i:e,o:e,d(e){e&&$(n)}}}function vr(e){let t,n,r={ctx:e,current:null,token:null,hasCatch:!1,pending:gr,then:dr,catch:hr,blocks:[,,,]};return Se(Pt(),r),{c(){t=T("main"),r.block.c()},m(e,o){x(e,t,o),r.block.m(t,r.anchor=null),r.mount=()=>t,r.anchor=null,n=!0},p(t,[n]){{const o=(e=t).slice();r.block.p(o,n)}},i(e){n||(_e(r.block),n=!0)},o(e){for(let e=0;e<3;e+=1){ke(r.blocks[e])}n=!1},d(e){e&&$(t),r.block.d(),r.token=null,r=null}}}function br(e,t,n){let r,o,i,s;return l(e,Dt,(e=>n(3,r=e))),l(e,Rt,(e=>n(0,o=e))),l(e,Wt,(e=>n(4,i=e))),l(e,Bt,(e=>n(1,s=e))),history.pushState({},"feed","ababab"),K((()=>{setInterval((()=>{console.log("Fetching new data..."),Pt().then((e=>{e&&Ft(r).then((e=>{Bt.set(1e3),Rt.set(e),Wt.yes()})).then(tn.push("something happened!"))}))}),12e4),setInterval((()=>{Rt.refresh()}),6e4)})),[o,s,function({detail:{loaded:e,complete:t}}){Ft(r).then((n=>{n.length==o.length&&0==i?t():(Dt.increment(),Bt.set(0),Rt.set(n),Wt.no(),e())}))}]}class wr extends Qe{constructor(e){super(),We(this,e,br,vr,a,{})}}function _r(t){let n;return{c(){n=T("h1"),n.innerHTML='what is this project?\n<p class="svelte-1uxb3mi">this website can help you keep track of all the activity in your collaborative playlist.\nonce logged in, you will be able to see who added what song by what artist to which playlist how long ago. and it&#39;s all sorted chronologically! just keep scrolling to travel back in time. while you browse the page periodically checks if anything has happened and, if anything has, will automatically adjust your feed and tell you. no refreshing required.</p>\nwhy is this project a thing?\n<p class="svelte-1uxb3mi">there&#39;s a good chance this isn&#39;t something you want (or need). however if you and peers enjoy actively making use of the collaborative playlist feature then this is supposed to serve you as a fairly easy and comfortable way of keeping up with recently added songs across a large quantity of playlists.</p>\nis this it?\n<p class="svelte-1uxb3mi">this is a passion project i work on in my spare time. i am aware the current version is very basic but more features are planned and in development. if you want more information or are looking to contribute feel free to check out the <a href="https://github.com/sebastian-stubenvoll/spotify-collab-tracker" target="_blank" class="svelte-1uxb3mi">the github page</a>.</p>',j(n,"class","svelte-1uxb3mi")},m(e,t){x(e,n,t)},p:e,i:e,o:e,d(e){e&&$(n)}}}class kr extends Qe{constructor(e){super(),We(this,e,null,_r,a,{})}}function xr(t){let n,r,o,i,s,a,u,c,l,f,h,d,p,m,y,g;return{c(){n=T("h1"),r=S("how is my data accessed?\n\t"),o=T("p"),o.innerHTML="once you&#39;ve logged in via spotify and granted the required permissions all the requests are sent from <b>your browser directly to spotify</b>. this means none of your private spotify data is ever accessed by the server hosting this website.",i=S("\nhow is my data stored?\n"),s=T("p"),a=S("all of your data is stored "),u=T("b"),u.textContent="locally",c=S(" inside your browser (indexedDB). this is only done to keep the number of requests as low as possible. you can delete the locally stored information at any point by via your browser or clicking "),l=T("button"),l.innerHTML="<b>here</b>",f=S("."),h=S("\ndoes this page store cookies?\n"),d=T("p"),d.textContent="no. this webapp only store the data that is necessary for functionality.",p=S("\ni'm still not sure...\n"),m=T("p"),m.innerHTML='if you have any remaining concerns, feel free to check out the <a href="https://github.com/sebastian-stubenvoll/spotify-collab-tracker" target="_blank" class="svelte-17vdl9c"><b>source code</b></a>.',j(o,"class","svelte-17vdl9c"),j(l,"class","svelte-17vdl9c"),j(s,"class","svelte-17vdl9c"),j(d,"class","svelte-17vdl9c"),j(m,"class","svelte-17vdl9c"),j(n,"class","svelte-17vdl9c")},m(e,v){x(e,n,v),k(n,r),k(n,o),k(n,i),k(n,s),k(s,a),k(s,u),k(s,c),k(s,l),k(s,f),k(n,h),k(n,d),k(n,p),k(n,m),y||(g=q(l,"click",t[0]),y=!0)},p:e,i:e,o:e,d(e){e&&$(n),y=!1,g()}}}function $r(e){return[()=>{indexedDB.deleteDatabase("sctdb"),tn.push("All your data has been deleted!")}]}class Cr extends Qe{constructor(e){super(),We(this,e,$r,xr,a,{})}}function Tr(t){let n,r,o;return{c(){n=T("button"),n.textContent="Ã",j(n,"class","svelte-x3sqgi")},m(e,i){x(e,n,i),r||(o=q(n,"click",(function(){s(t[0])&&t[0].apply(this,arguments)})),r=!0)},p(e,[n]){t=e},i:e,o:e,d(e){e&&$(n),r=!1,o()}}}function Sr(e,t,n){let{onClose:r}=t;return e.$$set=e=>{"onClose"in e&&n(0,r=e.onClose)},[r]}class Er extends Qe{constructor(e){super(),We(this,e,Sr,Tr,a,{onClose:0})}}function Or(t){return{c:e,m:e,p:e,i:e,o:e,d:e}}function qr(t){let n,r,o,s,a,u,c,l,f,h,d,p;return{c(){n=T("h1"),r=T("p"),o=T("a"),s=S("login with spotify"),a=E(),u=T("br"),c=E(),l=T("button"),l.textContent="privacy",f=T("button"),f.textContent="about",j(o,"href",t[6]),j(o,"class","svelte-1qhf4fy"),j(l,"class","svelte-1qhf4fy"),j(f,"class","svelte-1qhf4fy"),j(n,"class","svelte-1qhf4fy")},m(e,i){x(e,n,i),k(n,r),k(r,o),k(o,s),k(r,a),k(r,u),k(r,c),k(r,l),k(r,f),d||(p=[q(l,"click",t[3]),q(f,"click",t[2])],d=!0)},p(e,n){t=e},i(e){h||ue((()=>{h=$e(r,Zt,{duration:2e3,y:t[0]/3,opacity:0,easing:Yt}),h.start()}))},o:e,d(e){e&&$(n),d=!1,i(p)}}}function jr(t){let n;return{c(){n=T("h1"),j(n,"class","svelte-1qhf4fy")},m(e,t){x(e,n,t)},p:e,i:e,o:e,d(e){e&&$(n)}}}function Ar(t){let n,r,o,i,s;ue(t[4]);let a={ctx:t,current:null,token:null,hasCatch:!1,pending:jr,then:qr,catch:Or,value:6};return Se(t[1],a),{c(){n=T("link"),r=E(),o=O(),a.block.c(),j(n,"rel","stylesheet"),j(n,"href","login.css")},m(e,u){k(document.head,n),x(e,r,u),x(e,o,u),a.block.m(e,a.anchor=u),a.mount=()=>o.parentNode,a.anchor=o,i||(s=q(window,"resize",t[4]),i=!0)},p(e,[n]){{const r=(t=e).slice();r[6]=a.resolved,a.block.p(r,n)}},i(e){_e(a.block)},o:e,d(e){$(n),e&&$(r),e&&$(o),a.block.d(e),a.token=null,a=null,i=!1,s()}}}function Ir(e,t,n){const r=xt();let o;const{open:i}=(s="simple-modal",J().$$.context.get(s));var s;return[o,r,()=>i(kr,{},{closeButton:Er}),()=>i(Cr,{},{closeButton:Er}),function(){n(0,o=window.innerHeight)}]}class Nr extends Qe{constructor(e){super(),We(this,e,Ir,Ar,a,{})}}const{window:Dr}=Ee;function Rr(e){let t,n,r,o,a,u,c,l,f,h,d,p=e[0].closeButton&&Wr(e);var m=e[1];return m&&(u=new m({})),{c(){t=T("div"),n=T("div"),r=T("div"),p&&p.c(),o=E(),a=T("div"),u&&Ne(u.$$.fragment),j(a,"class","content svelte-2wx9ab"),j(a,"style",e[8]),j(r,"class","window svelte-2wx9ab"),j(r,"role","dialog"),j(r,"aria-modal","true"),j(r,"style",e[7]),j(n,"class","window-wrap svelte-2wx9ab"),j(n,"style",e[6]),j(t,"class","bg svelte-2wx9ab"),j(t,"style",e[5])},m(i,c){x(i,t,c),k(t,n),k(n,r),p&&p.m(r,null),k(r,o),k(r,a),u&&De(u,a,null),e[37](r),e[38](n),e[39](t),f=!0,h||(d=[q(r,"introstart",(function(){s(e[12])&&e[12].apply(this,arguments)})),q(r,"outrostart",(function(){s(e[13])&&e[13].apply(this,arguments)})),q(r,"introend",(function(){s(e[14])&&e[14].apply(this,arguments)})),q(r,"outroend",(function(){s(e[15])&&e[15].apply(this,arguments)})),q(t,"click",e[19])],h=!0)},p(i,s){if((e=i)[0].closeButton?p?(p.p(e,s),1&s[0]&&_e(p,1)):(p=Wr(e),p.c(),_e(p,1),p.m(r,o)):p&&(be(),ke(p,1,1,(()=>{p=null})),we()),m!==(m=e[1])){if(u){be();const e=u;ke(e.$$.fragment,1,0,(()=>{Re(e,1)})),we()}m?(u=new m({}),Ne(u.$$.fragment),_e(u.$$.fragment,1),De(u,a,null)):u=null}(!f||256&s[0])&&j(a,"style",e[8]),(!f||128&s[0])&&j(r,"style",e[7]),(!f||64&s[0])&&j(n,"style",e[6]),(!f||32&s[0])&&j(t,"style",e[5])},i(n){f||(_e(p),u&&_e(u.$$.fragment,n),ue((()=>{c||(c=Te(r,e[11],e[0].transitionWindowProps,!0)),c.run(1)})),ue((()=>{l||(l=Te(t,e[10],e[0].transitionBgProps,!0)),l.run(1)})),f=!0)},o(n){ke(p),u&&ke(u.$$.fragment,n),c||(c=Te(r,e[11],e[0].transitionWindowProps,!1)),c.run(0),l||(l=Te(t,e[10],e[0].transitionBgProps,!1)),l.run(0),f=!1},d(n){n&&$(t),p&&p.d(),u&&Re(u),e[37](null),n&&c&&c.end(),e[38](null),e[39](null),n&&l&&l.end(),h=!1,i(d)}}}function Wr(e){let t,n,r,o,i;const s=[Mr,Qr],a=[];function u(e,n){return 1&n[0]&&(t=!!e[16](e[0].closeButton)),t?0:1}return n=u(e,[-1]),r=a[n]=s[n](e),{c(){r.c(),o=O()},m(e,t){a[n].m(e,t),x(e,o,t),i=!0},p(e,t){let i=n;n=u(e,t),n===i?a[n].p(e,t):(be(),ke(a[i],1,1,(()=>{a[i]=null})),we(),r=a[n],r?r.p(e,t):(r=a[n]=s[n](e),r.c()),_e(r,1),r.m(o.parentNode,o))},i(e){i||(_e(r),i=!0)},o(e){ke(r),i=!1},d(e){a[n].d(e),e&&$(o)}}}function Qr(t){let n,r,o;return{c(){n=T("button"),j(n,"class","close svelte-2wx9ab"),j(n,"style",t[9])},m(e,i){x(e,n,i),r||(o=q(n,"click",t[17]),r=!0)},p(e,t){512&t[0]&&j(n,"style",e[9])},i:e,o:e,d(e){e&&$(n),r=!1,o()}}}function Mr(e){let t,n,r;var o=e[0].closeButton;function i(e){return{props:{onClose:e[17]}}}return o&&(t=new o(i(e))),{c(){t&&Ne(t.$$.fragment),n=O()},m(e,o){t&&De(t,e,o),x(e,n,o),r=!0},p(e,r){if(o!==(o=e[0].closeButton)){if(t){be();const e=t;ke(e.$$.fragment,1,0,(()=>{Re(e,1)})),we()}o?(t=new o(i(e)),Ne(t.$$.fragment),_e(t.$$.fragment,1),De(t,n.parentNode,n)):t=null}},i(e){r||(t&&_e(t.$$.fragment,e),r=!0)},o(e){t&&ke(t.$$.fragment,e),r=!1},d(e){e&&$(n),t&&Re(t,e)}}}function Lr(e){let t,n,r,o,i=e[1]&&Rr(e);const s=e[36].default,a=f(s,e,e[35],null);return{c(){i&&i.c(),t=E(),a&&a.c()},m(s,u){i&&i.m(s,u),x(s,t,u),a&&a.m(s,u),n=!0,r||(o=q(Dr,"keydown",e[18]),r=!0)},p(e,n){e[1]?i?(i.p(e,n),2&n[0]&&_e(i,1)):(i=Rr(e),i.c(),_e(i,1),i.m(t.parentNode,t)):i&&(be(),ke(i,1,1,(()=>{i=null})),we()),a&&a.p&&16&n[1]&&d(a,s,e,e[35],n,null,null)},i(e){n||(_e(i),_e(a,e),n=!0)},o(e){ke(i),ke(a,e),n=!1},d(e){i&&i.d(e),e&&$(t),a&&a.d(e),r=!1,o()}}}function Br(e,t,n){let{$$slots:r={},$$scope:o}=t;const i=z(),s=X;let{show:a=null}=t,{key:u="simple-modal"}=t,{closeButton:c=!0}=t,{closeOnEsc:l=!0}=t,{closeOnOuterClick:f=!0}=t,{styleBg:h={}}=t,{styleWindowWrap:d={}}=t,{styleWindow:p={}}=t,{styleContent:m={}}=t,{styleCloseButton:y={}}=t,{setContext:g=s}=t,{transitionBg:v=Xt}=t,{transitionBgProps:b={duration:250}}=t,{transitionWindow:w=v}=t,{transitionWindowProps:_=b}=t;const k={closeButton:c,closeOnEsc:l,closeOnOuterClick:f,styleBg:h,styleWindowWrap:d,styleWindow:p,styleContent:m,styleCloseButton:y,transitionBg:v,transitionBgProps:b,transitionWindow:w,transitionWindowProps:_};let x,$,C,T,S,E,O,q,j,A,I,N,D,R={...k},W=null;const Q=e=>Object.keys(e).reduce(((t,n)=>`${t}; ${(e=>e.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase())(n)}: ${e[n]}`),""),M=e=>!!(e&&e.constructor&&e.call&&e.apply),L=()=>{};let B=L,P=L,F=L,U=L;const V=(e,t={},r={},o={})=>{n(1,W=function(e,t={}){return function(n){return new e({...n,props:{...t,...n.props}})}}(e,t)),n(0,R={...k,...r}),n(5,S=Q(R.styleBg)),n(6,E=Q(R.styleWindowWrap)),n(7,O=Q(R.styleWindow)),n(8,q=Q(R.styleContent)),n(9,j=Q(R.styleCloseButton)),n(10,A=R.transitionBg),n(11,I=R.transitionWindow),J(),n(12,B=e=>{o.onOpen&&o.onOpen(e),i("open"),i("opening")}),n(13,P=e=>{o.onClose&&o.onClose(e),i("close"),i("closing")}),n(14,F=e=>{o.onOpened&&o.onOpened(e),i("opened")}),n(15,U=e=>{o.onClosed&&o.onClosed(e),i("closed")})},G=(e={})=>{n(13,P=e.onClose||P),n(15,U=e.onClosed||U),n(1,W=null),K()},J=()=>{T=window.scrollY,N=document.body.style.position,D=document.body.style.overflow,document.body.style.position="fixed",document.body.style.top=`-${T}px`,document.body.style.overflow="hidden"},K=()=>{document.body.style.position=N||"",document.body.style.top="",document.body.style.overflow=D||"",window.scrollTo(0,T)};return g(u,{open:V,close:G}),Y((()=>{G()})),e.$$set=e=>{"show"in e&&n(20,a=e.show),"key"in e&&n(21,u=e.key),"closeButton"in e&&n(22,c=e.closeButton),"closeOnEsc"in e&&n(23,l=e.closeOnEsc),"closeOnOuterClick"in e&&n(24,f=e.closeOnOuterClick),"styleBg"in e&&n(25,h=e.styleBg),"styleWindowWrap"in e&&n(26,d=e.styleWindowWrap),"styleWindow"in e&&n(27,p=e.styleWindow),"styleContent"in e&&n(28,m=e.styleContent),"styleCloseButton"in e&&n(29,y=e.styleCloseButton),"setContext"in e&&n(30,g=e.setContext),"transitionBg"in e&&n(31,v=e.transitionBg),"transitionBgProps"in e&&n(32,b=e.transitionBgProps),"transitionWindow"in e&&n(33,w=e.transitionWindow),"transitionWindowProps"in e&&n(34,_=e.transitionWindowProps),"$$scope"in e&&n(35,o=e.$$scope)},e.$$.update=()=>{1048576&e.$$.dirty[0]&&(M(a)?V(a):G())},[R,W,x,$,C,S,E,O,q,j,A,I,B,P,F,U,M,G,e=>{if(R.closeOnEsc&&W&&"Escape"===e.key&&(e.preventDefault(),G()),W&&"Tab"===e.key){const t=C.querySelectorAll("*"),n=Array.from(t).filter((e=>e.tabIndex>=0));let r=n.indexOf(document.activeElement);-1===r&&e.shiftKey&&(r=0),r+=n.length+(e.shiftKey?-1:1),r%=n.length,n[r].focus(),e.preventDefault()}},e=>{!R.closeOnOuterClick||e.target!==x&&e.target!==$||(e.preventDefault(),G())},a,u,c,l,f,h,d,p,m,y,g,v,b,w,_,o,r,function(e){te[e?"unshift":"push"]((()=>{C=e,n(4,C)}))},function(e){te[e?"unshift":"push"]((()=>{$=e,n(3,$)}))},function(e){te[e?"unshift":"push"]((()=>{x=e,n(2,x)}))}]}class Pr extends Qe{constructor(e){super(),We(this,e,Br,Lr,a,{show:20,key:21,closeButton:22,closeOnEsc:23,closeOnOuterClick:24,styleBg:25,styleWindowWrap:26,styleWindow:27,styleContent:28,styleCloseButton:29,setContext:30,transitionBg:31,transitionBgProps:32,transitionWindow:33,transitionWindowProps:34},[-1,-1])}}var Fr="%[a-f0-9]{2}",Ur=new RegExp(Fr,"gi"),Vr=new RegExp("("+Fr+")+","gi");function Gr(e,t){try{return decodeURIComponent(e.join(""))}catch(e){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],Gr(n),Gr(r))}function Jr(e){try{return decodeURIComponent(e)}catch(r){for(var t=e.match(Ur),n=1;n<t.length;n++)t=(e=Gr(t,n).join("")).match(Ur);return e}}var Kr=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"ï¿½ï¿½","%FF%FE":"ï¿½ï¿½"},n=Vr.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch(e){var r=Jr(n[0]);r!==n[0]&&(t[n[0]]=r)}n=Vr.exec(e)}t["%C2"]="ï¿½";for(var o=Object.keys(t),i=0;i<o.length;i++){var s=o[i];e=e.replace(new RegExp(s,"g"),t[s])}return e}(e)}},Hr=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const n=e.indexOf(t);return-1===n?[e]:[e.slice(0,n),e.slice(n+t.length)]},Yr=function(e,t){for(var n={},r=Object.keys(e),o=Array.isArray(t),i=0;i<r.length;i++){var s=r[i],a=e[s];(o?-1!==t.indexOf(s):t(s,a,e))&&(n[s]=a)}return n},zr=St((function(e,t){function n(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function r(e,t){return t.encode?t.strict?encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`)):encodeURIComponent(e):e}function o(e,t){return t.decode?Kr(e):e}function i(e){return Array.isArray(e)?e.sort():"object"==typeof e?i(Object.keys(e)).sort(((e,t)=>Number(e)-Number(t))).map((t=>e[t])):e}function s(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function a(e){const t=(e=s(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function u(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function c(e,t){n((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const r=function(e){let t;switch(e.arrayFormat){case"index":return(e,n,r)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return(e,n,r)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};case"comma":case"separator":return(t,n,r)=>{const i="string"==typeof n&&n.includes(e.arrayFormatSeparator),s="string"==typeof n&&!i&&o(n,e).includes(e.arrayFormatSeparator);n=s?o(n,e):n;const a=i||s?n.split(e.arrayFormatSeparator).map((t=>o(t,e))):null===n?n:o(n,e);r[t]=a};case"bracket-separator":return(t,n,r)=>{const i=/(\[\])$/.test(t);if(t=t.replace(/\[\]$/,""),!i)return void(r[t]=n?o(n,e):n);const s=null===n?[]:n.split(e.arrayFormatSeparator).map((t=>o(t,e)));void 0!==r[t]?r[t]=[].concat(r[t],s):r[t]=s};default:return(e,t,n)=>{void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t),s=Object.create(null);if("string"!=typeof e)return s;if(!(e=e.trim().replace(/^[?#&]/,"")))return s;for(const n of e.split("&")){if(""===n)continue;let[e,i]=Hr(t.decode?n.replace(/\+/g," "):n,"=");i=void 0===i?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?i:o(i,t),r(o(e,t),i,s)}for(const e of Object.keys(s)){const n=s[e];if("object"==typeof n&&null!==n)for(const e of Object.keys(n))n[e]=u(n[e],t);else s[e]=u(n,t)}return!1===t.sort?s:(!0===t.sort?Object.keys(s).sort():Object.keys(s).sort(t.sort)).reduce(((e,t)=>{const n=s[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=i(n):e[t]=n,e}),Object.create(null))}t.extract=a,t.parse=c,t.stringify=(e,t)=>{if(!e)return"";n((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const o=n=>t.skipNull&&null==e[n]||t.skipEmptyString&&""===e[n],i=function(e){switch(e.arrayFormat){case"index":return t=>(n,o)=>{const i=n.length;return void 0===o||e.skipNull&&null===o||e.skipEmptyString&&""===o?n:null===o?[...n,[r(t,e),"[",i,"]"].join("")]:[...n,[r(t,e),"[",r(i,e),"]=",r(o,e)].join("")]};case"bracket":return t=>(n,o)=>void 0===o||e.skipNull&&null===o||e.skipEmptyString&&""===o?n:null===o?[...n,[r(t,e),"[]"].join("")]:[...n,[r(t,e),"[]=",r(o,e)].join("")];case"comma":case"separator":case"bracket-separator":{const t="bracket-separator"===e.arrayFormat?"[]=":"=";return n=>(o,i)=>void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?o:(i=null===i?"":i,0===o.length?[[r(n,e),t,r(i,e)].join("")]:[[o,r(i,e)].join(e.arrayFormatSeparator)])}default:return t=>(n,o)=>void 0===o||e.skipNull&&null===o||e.skipEmptyString&&""===o?n:null===o?[...n,r(t,e)]:[...n,[r(t,e),"=",r(o,e)].join("")]}}(t),s={};for(const t of Object.keys(e))o(t)||(s[t]=e[t]);const a=Object.keys(s);return!1!==t.sort&&a.sort(t.sort),a.map((n=>{const o=e[n];return void 0===o?"":null===o?r(n,t):Array.isArray(o)?0===o.length&&"bracket-separator"===t.arrayFormat?r(n,t)+"[]":o.reduce(i(n),[]).join("&"):r(n,t)+"="+r(o,t)})).filter((e=>e.length>0)).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[n,r]=Hr(e,"#");return Object.assign({url:n.split("?")[0]||"",query:c(a(e),t)},t&&t.parseFragmentIdentifier&&r?{fragmentIdentifier:o(r,t)}:{})},t.stringifyUrl=(e,n)=>{n=Object.assign({encode:!0,strict:!0},n);const o=s(e.url).split("?")[0]||"",i=t.extract(e.url),a=t.parse(i,{sort:!1}),u=Object.assign(a,e.query);let c=t.stringify(u,n);c&&(c=`?${c}`);let l=function(e){let t="";const n=e.indexOf("#");return-1!==n&&(t=e.slice(n)),t}(e.url);return e.fragmentIdentifier&&(l=`#${r(e.fragmentIdentifier,n)}`),`${o}${c}${l}`},t.pick=(e,n,r)=>{r=Object.assign({parseFragmentIdentifier:!0},r);const{url:o,query:i,fragmentIdentifier:s}=t.parseUrl(e,r);return t.stringifyUrl({url:o,query:Yr(i,n),fragmentIdentifier:s},r)},t.exclude=(e,n,r)=>{const o=Array.isArray(n)?e=>!n.includes(e):(e,t)=>!n(e,t);return t.pick(e,o,r)}}));function Xr(t){return{c:e,m:e,p:e,i:e,o:e,d:e}}function Zr(e){let t,n,r,o;const i=[to,eo],s=[];function a(e,t){return e[0]?1:0}return t=a(e),n=s[t]=i[t](e),{c(){n.c(),r=O()},m(e,n){s[t].m(e,n),x(e,r,n),o=!0},p(e,o){let u=t;t=a(e),t!==u&&(be(),ke(s[u],1,1,(()=>{s[u]=null})),we(),n=s[t],n||(n=s[t]=i[t](e),n.c()),_e(n,1),n.m(r.parentNode,r))},i(e){o||(_e(n),o=!0)},o(e){ke(n),o=!1},d(e){s[t].d(e),e&&$(r)}}}function eo(e){let t,n;return t=new wr({}),{c(){Ne(t.$$.fragment)},m(e,r){De(t,e,r),n=!0},i(e){n||(_e(t.$$.fragment,e),n=!0)},o(e){ke(t.$$.fragment,e),n=!1},d(e){Re(t,e)}}}function to(e){let t,n;return t=new Nr({}),{c(){Ne(t.$$.fragment)},m(e,r){De(t,e,r),n=!0},i(e){n||(_e(t.$$.fragment,e),n=!0)},o(e){ke(t.$$.fragment,e),n=!1},d(e){Re(t,e)}}}function no(t){let n;return{c(){n=S("checking spotify access!")},m(e,t){x(e,n,t)},p:e,i:e,o:e,d(e){e&&$(n)}}}function ro(e){let t,n,r,o,i={ctx:e,current:null,token:null,hasCatch:!1,pending:no,then:Zr,catch:Xr,blocks:[,,,]};return Se(e[2],i),r=new dn({props:{options:e[1]}}),{c(){t=T("main"),i.block.c(),n=E(),Ne(r.$$.fragment),j(t,"class","svelte-ocq6f6")},m(e,s){x(e,t,s),i.block.m(t,i.anchor=null),i.mount=()=>t,i.anchor=null,x(e,n,s),De(r,e,s),o=!0},p(t,n){{const r=(e=t).slice();i.block.p(r,n)}},i(e){o||(_e(i.block),_e(r.$$.fragment,e),o=!0)},o(e){for(let e=0;e<3;e+=1){ke(i.blocks[e])}ke(r.$$.fragment,e),o=!1},d(e){e&&$(t),i.block.d(),i.token=null,i=null,e&&$(n),Re(r,e)}}}function oo(e){let t,n;return t=new Pr({props:{$$slots:{default:[ro]},$$scope:{ctx:e}}}),{c(){Ne(t.$$.fragment)},m(e,r){De(t,e,r),n=!0},p(e,[n]){const r={};33&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(_e(t.$$.fragment,e),n=!0)},o(e){ke(t.$$.fragment,e),n=!1},d(e){Re(t,e)}}}function io(e,t,n){let r;const o=async function(){await async function(){if("undefined"!=typeof window){const e=zr.parse(window.location.search);if(e.code){if(await async function(e){if(e.state!=localStorage.getItem("state"))return!1;{let t=[];const n={client_id:gt,grant_type:"authorization_code",code:e.code,redirect_uri:vt,code_verifier:localStorage.getItem("verifier")};for(let e in n){const r=encodeURIComponent(e),o=encodeURIComponent(n[e]);t.push(r+"="+o)}t=t.join("&");const r="https://accounts.spotify.com/api/token",o=await fetch(r,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t});if(200!=o.status)return!1;{const e=await o.json();return bt=e.access_token,wt=e.refresh_token,_t=1e3*e.expires_in,localStorage.removeItem("verifier"),kt=setInterval($t,_t-.1*_t),!0}}}(e))return!0}}return!1}()?n(0,r=!0):n(0,r=!1)}();return[r,{duration:1e4},o]}return new class extends Qe{constructor(e){super(),We(this,e,io,oo,a,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
