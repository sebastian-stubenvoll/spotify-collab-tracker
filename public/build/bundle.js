var app=function(){"use strict";function t(){}const n=t=>t;function e(t,n){for(const e in n)t[e]=n[e];return t}function r(t){return t()}function i(){return Object.create(null)}function o(t){t.forEach(r)}function s(t){return"function"==typeof t}function a(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function u(n,e,r){n.$$.on_destroy.push(function(n,...e){if(null==n)return t;const r=n.subscribe(...e);return r.unsubscribe?()=>r.unsubscribe():r}(e,r))}function c(t,n,e,r){if(t){const i=h(t,n,e,r);return t[0](i)}}function h(t,n,r,i){return t[1]&&i?e(r.ctx.slice(),t[1](i(n))):r.ctx}function l(t,n,e,r,i,o,s){const a=function(t,n,e,r){if(t[2]&&r){const i=t[2](r(e));if(void 0===n.dirty)return i;if("object"==typeof i){const t=[],e=Math.max(n.dirty.length,i.length);for(let r=0;r<e;r+=1)t[r]=n.dirty[r]|i[r];return t}return n.dirty|i}return n.dirty}(n,r,i,o);if(a){const i=h(n,e,r,s);t.p(i,a)}}const f="undefined"!=typeof window;let p=f?()=>window.performance.now():()=>Date.now(),d=f?t=>requestAnimationFrame(t):t;const y=new Set;function g(t){y.forEach((n=>{n.c(t)||(y.delete(n),n.f())})),0!==y.size&&d(g)}function m(t){let n;return 0===y.size&&d(g),{promise:new Promise((e=>{y.add(n={c:t,f:e})})),abort(){y.delete(n)}}}function b(t,n){t.appendChild(n)}function v(t,n,e){t.insertBefore(n,e||null)}function w(t){t.parentNode.removeChild(t)}function E(t){return document.createElement(t)}function S(t){return document.createTextNode(t)}function k(){return S(" ")}function x(){return S("")}function N(t,n,e,r){return t.addEventListener(n,e,r),()=>t.removeEventListener(n,e,r)}function T(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function C(t,n){n=""+n,t.wholeText!==n&&(t.data=n)}function $(t,n){const e=document.createEvent("CustomEvent");return e.initCustomEvent(t,!1,!1,n),e}const j=new Set;let O,q=0;function _(t,n,e,r,i,o,s,a=0){const u=16.666/r;let c="{\n";for(let t=0;t<=1;t+=u){const r=n+(e-n)*o(t);c+=100*t+`%{${s(r,1-r)}}\n`}const h=c+`100% {${s(e,1-e)}}\n}`,l=`__svelte_${function(t){let n=5381,e=t.length;for(;e--;)n=(n<<5)-n^t.charCodeAt(e);return n>>>0}(h)}_${a}`,f=t.ownerDocument;j.add(f);const p=f.__svelte_stylesheet||(f.__svelte_stylesheet=f.head.appendChild(E("style")).sheet),d=f.__svelte_rules||(f.__svelte_rules={});d[l]||(d[l]=!0,p.insertRule(`@keyframes ${l} ${h}`,p.cssRules.length));const y=t.style.animation||"";return t.style.animation=`${y?`${y}, `:""}${l} ${r}ms linear ${i}ms 1 both`,q+=1,l}function A(t,n){const e=(t.style.animation||"").split(", "),r=e.filter(n?t=>t.indexOf(n)<0:t=>-1===t.indexOf("__svelte")),i=e.length-r.length;i&&(t.style.animation=r.join(", "),q-=i,q||d((()=>{q||(j.forEach((t=>{const n=t.__svelte_stylesheet;let e=n.cssRules.length;for(;e--;)n.deleteRule(e);t.__svelte_rules={}})),j.clear())})))}function I(e,r,i,o){if(!r)return t;const s=e.getBoundingClientRect();if(r.left===s.left&&r.right===s.right&&r.top===s.top&&r.bottom===s.bottom)return t;const{delay:a=0,duration:u=300,easing:c=n,start:h=p()+a,end:l=h+u,tick:f=t,css:d}=i(e,{from:r,to:s},o);let y,g=!0,b=!1;function v(){d&&A(e,y),g=!1}return m((t=>{if(!b&&t>=h&&(b=!0),b&&t>=l&&(f(1,0),v()),!g)return!1;if(b){const n=0+1*c((t-h)/u);f(n,1-n)}return!0})),d&&(y=_(e,0,1,u,a,c,d)),a||(b=!0),f(0,1),v}function M(t){const n=getComputedStyle(t);if("absolute"!==n.position&&"fixed"!==n.position){const{width:e,height:r}=n,i=t.getBoundingClientRect();t.style.position="absolute",t.style.width=e,t.style.height=r,R(t,i)}}function R(t,n){const e=t.getBoundingClientRect();if(n.left!==e.left||n.top!==e.top){const r=getComputedStyle(t),i="none"===r.transform?"":r.transform;t.style.transform=`${i} translate(${n.left-e.left}px, ${n.top-e.top}px)`}}function B(t){O=t}function D(){if(!O)throw new Error("Function called outside component initialization");return O}function P(t){D().$$.on_mount.push(t)}function W(t){D().$$.on_destroy.push(t)}function L(){const t=D();return(n,e)=>{const r=t.$$.callbacks[n];if(r){const i=$(n,e);r.slice().forEach((n=>{n.call(t,i)}))}}}function F(t,n){D().$$.context.set(t,n)}const U=[],z=[],G=[],H=[],J=Promise.resolve();let X=!1;function Y(){X||(X=!0,J.then(tt))}function K(){return Y(),J}function V(t){G.push(t)}let Z=!1;const Q=new Set;function tt(){if(!Z){Z=!0;do{for(let t=0;t<U.length;t+=1){const n=U[t];B(n),nt(n.$$)}for(B(null),U.length=0;z.length;)z.pop()();for(let t=0;t<G.length;t+=1){const n=G[t];Q.has(n)||(Q.add(n),n())}G.length=0}while(U.length);for(;H.length;)H.pop()();X=!1,Z=!1,Q.clear()}}function nt(t){if(null!==t.fragment){t.update(),o(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(V)}}let et;function rt(){return et||(et=Promise.resolve(),et.then((()=>{et=null}))),et}function it(t,n,e){t.dispatchEvent($(`${n?"intro":"outro"}${e}`))}const ot=new Set;let st;function at(){st={r:0,c:[],p:st}}function ut(){st.r||o(st.c),st=st.p}function ct(t,n){t&&t.i&&(ot.delete(t),t.i(n))}function ht(t,n,e,r){if(t&&t.o){if(ot.has(t))return;ot.add(t),st.c.push((()=>{ot.delete(t),r&&(e&&t.d(1),r())})),t.o(n)}}const lt={duration:0};function ft(e,r,i){let o,a,u=r(e,i),c=!1,h=0;function l(){o&&A(e,o)}function f(){const{delay:r=0,duration:i=300,easing:s=n,tick:f=t,css:d}=u||lt;d&&(o=_(e,0,1,i,r,s,d,h++)),f(0,1);const y=p()+r,g=y+i;a&&a.abort(),c=!0,V((()=>it(e,!0,"start"))),a=m((t=>{if(c){if(t>=g)return f(1,0),it(e,!0,"end"),l(),c=!1;if(t>=y){const n=s((t-y)/i);f(n,1-n)}}return c}))}let d=!1;return{start(){d||(A(e),s(u)?(u=u(),rt().then(f)):f())},invalidate(){d=!1},end(){c&&(l(),c=!1)}}}function pt(e,r,i){let a,u=r(e,i),c=!0;const h=st;function l(){const{delay:r=0,duration:i=300,easing:s=n,tick:l=t,css:f}=u||lt;f&&(a=_(e,1,0,i,r,s,f));const d=p()+r,y=d+i;V((()=>it(e,!1,"start"))),m((t=>{if(c){if(t>=y)return l(0,1),it(e,!1,"end"),--h.r||o(h.c),!1;if(t>=d){const n=s((t-d)/i);l(1-n,n)}}return c}))}return h.r+=1,s(u)?rt().then((()=>{u=u(),l()})):l(),{end(t){t&&u.tick&&u.tick(1,0),c&&(a&&A(e,a),c=!1)}}}function dt(e,r,i,a){let u=r(e,i),c=a?0:1,h=null,l=null,f=null;function d(){f&&A(e,f)}function y(t,n){const e=t.b-c;return n*=Math.abs(e),{a:c,b:t.b,d:e,duration:n,start:t.start,end:t.start+n,group:t.group}}function g(r){const{delay:i=0,duration:s=300,easing:a=n,tick:g=t,css:b}=u||lt,v={start:p()+i,b:r};r||(v.group=st,st.r+=1),h||l?l=v:(b&&(d(),f=_(e,c,r,s,i,a,b)),r&&g(0,1),h=y(v,s),V((()=>it(e,r,"start"))),m((t=>{if(l&&t>l.start&&(h=y(l,s),l=null,it(e,h.b,"start"),b&&(d(),f=_(e,c,h.b,h.duration,0,a,u.css))),h)if(t>=h.end)g(c=h.b,1-c),it(e,h.b,"end"),l||(h.b?d():--h.group.r||o(h.group.c)),h=null;else if(t>=h.start){const n=t-h.start;c=h.a+h.d*a(n/h.duration),g(c,1-c)}return!(!h&&!l)})))}return{run(t){s(u)?rt().then((()=>{u=u(),g(t)})):g(t)},end(){d(),h=l=null}}}function yt(t,n){const e=n.token={};function r(t,r,i,o){if(n.token!==e)return;n.resolved=o;let s=n.ctx;void 0!==i&&(s=s.slice(),s[i]=o);const a=t&&(n.current=t)(s);let u=!1;n.block&&(n.blocks?n.blocks.forEach(((t,e)=>{e!==r&&t&&(at(),ht(t,1,1,(()=>{n.blocks[e]===t&&(n.blocks[e]=null)})),ut())})):n.block.d(1),a.c(),ct(a,1),a.m(n.mount(),n.anchor),u=!0),n.block=a,n.blocks&&(n.blocks[r]=a),u&&tt()}if((i=t)&&"object"==typeof i&&"function"==typeof i.then){const e=D();if(t.then((t=>{B(e),r(n.then,1,n.value,t),B(null)}),(t=>{if(B(e),r(n.catch,2,n.error,t),B(null),!n.hasCatch)throw t})),n.current!==n.pending)return r(n.pending,0),!0}else{if(n.current!==n.then)return r(n.then,1,n.value,t),!0;n.resolved=t}var i}const gt="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function mt(t,n){t.f(),function(t,n){ht(t,1,1,(()=>{n.delete(t.key)}))}(t,n)}function bt(t,n,e,r,i,o,s,a,u,c,h,l){let f=t.length,p=o.length,d=f;const y={};for(;d--;)y[t[d].key]=d;const g=[],m=new Map,b=new Map;for(d=p;d--;){const t=l(i,o,d),a=e(t);let u=s.get(a);u?r&&u.p(t,n):(u=c(a,t),u.c()),m.set(a,g[d]=u),a in y&&b.set(a,Math.abs(d-y[a]))}const v=new Set,w=new Set;function E(t){ct(t,1),t.m(a,h),s.set(t.key,t),h=t.first,p--}for(;f&&p;){const n=g[p-1],e=t[f-1],r=n.key,i=e.key;n===e?(h=n.first,f--,p--):m.has(i)?!s.has(r)||v.has(r)?E(n):w.has(i)?f--:b.get(r)>b.get(i)?(w.add(r),E(n)):(v.add(i),f--):(u(e,s),f--)}for(;f--;){const n=t[f];m.has(n.key)||u(n,s)}for(;p;)E(g[p-1]);return g}function vt(t){t&&t.c()}function wt(t,n,e,i){const{fragment:a,on_mount:u,on_destroy:c,after_update:h}=t.$$;a&&a.m(n,e),i||V((()=>{const n=u.map(r).filter(s);c?c.push(...n):o(n),t.$$.on_mount=[]})),h.forEach(V)}function Et(t,n){const e=t.$$;null!==e.fragment&&(o(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function St(n,e,r,s,a,u,c=[-1]){const h=O;B(n);const l=n.$$={fragment:null,ctx:null,props:u,update:t,not_equal:a,bound:i(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(h?h.$$.context:e.context||[]),callbacks:i(),dirty:c,skip_bound:!1};let f=!1;if(l.ctx=r?r(n,e.props||{},((t,e,...r)=>{const i=r.length?r[0]:e;return l.ctx&&a(l.ctx[t],l.ctx[t]=i)&&(!l.skip_bound&&l.bound[t]&&l.bound[t](i),f&&function(t,n){-1===t.$$.dirty[0]&&(U.push(t),Y(),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}(n,t)),e})):[],l.update(),f=!0,o(l.before_update),l.fragment=!!s&&s(l.ctx),e.target){if(e.hydrate){const t=function(t){return Array.from(t.childNodes)}(e.target);l.fragment&&l.fragment.l(t),t.forEach(w)}else l.fragment&&l.fragment.c();e.intro&&ct(n.$$.fragment),wt(n,e.target,e.anchor,e.customElement),tt()}B(h)}class kt{$destroy(){Et(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(t){var n;this.$$set&&(n=t,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function xt(t){let n;return{c(){n=E("i"),T(n,"class","loading-default svelte-10h86fq")},m(t,e){v(t,n,e)},d(t){t&&w(n)}}}function Nt(t){let n;return{c(){n=E("span"),n.innerHTML='<span class="wave-item svelte-10h86fq"></span> \n\t\t<span class="wave-item svelte-10h86fq"></span> \n\t\t<span class="wave-item svelte-10h86fq"></span> \n\t\t<span class="wave-item svelte-10h86fq"></span> \n\t\t<span class="wave-item svelte-10h86fq"></span>',T(n,"class","loading-wave-dots svelte-10h86fq")},m(t,e){v(t,n,e)},d(t){t&&w(n)}}}function Tt(t){let n;return{c(){n=E("i"),T(n,"class","loading-spiral svelte-10h86fq")},m(t,e){v(t,n,e)},d(t){t&&w(n)}}}function Ct(t){let n;return{c(){n=E("span"),n.innerHTML='<span class="circle-item svelte-10h86fq"></span> \n\t\t<span class="circle-item svelte-10h86fq"></span> \n\t\t<span class="circle-item svelte-10h86fq"></span> \n\t\t<span class="circle-item svelte-10h86fq"></span> \n\t\t<span class="circle-item svelte-10h86fq"></span> \n\t\t<span class="circle-item svelte-10h86fq"></span> \n\t\t<span class="circle-item svelte-10h86fq"></span> \n\t\t<span class="circle-item svelte-10h86fq"></span>',T(n,"class","loading-circles svelte-10h86fq")},m(t,e){v(t,n,e)},d(t){t&&w(n)}}}function $t(t){let n;return{c(){n=E("span"),n.innerHTML='<span class="bubble-item svelte-10h86fq"></span> \n\t\t<span class="bubble-item svelte-10h86fq"></span> \n\t\t<span class="bubble-item svelte-10h86fq"></span> \n\t\t<span class="bubble-item svelte-10h86fq"></span> \n\t\t<span class="bubble-item svelte-10h86fq"></span> \n\t\t<span class="bubble-item svelte-10h86fq"></span> \n\t\t<span class="bubble-item svelte-10h86fq"></span> \n\t\t<span class="bubble-item svelte-10h86fq"></span>',T(n,"class","loading-bubbles svelte-10h86fq")},m(t,e){v(t,n,e)},d(t){t&&w(n)}}}function jt(n){let e;function r(t,n){return"bubbles"===t[0]?$t:"circles"===t[0]?Ct:"spiral"===t[0]?Tt:"wavedots"===t[0]?Nt:xt}let i=r(n),o=i(n);return{c(){o.c(),e=x()},m(t,n){o.m(t,n),v(t,e,n)},p(t,[n]){i!==(i=r(t))&&(o.d(1),o=i(t),o&&(o.c(),o.m(e.parentNode,e)))},i:t,o:t,d(t){o.d(t),t&&w(e)}}}function Ot(t,n,e){let{spinner:r=""}=n;return t.$$set=t=>{"spinner"in t&&e(0,r=t.spinner)},[r]}class qt extends kt{constructor(t){super(),St(this,t,Ot,jt,a,{spinner:0})}}const _t=t=>({}),At=t=>({attemptLoad:t[7]}),It=t=>({}),Mt=t=>({}),Rt=t=>({}),Bt=t=>({}),Dt=t=>({isFirstLoad:2&t}),Pt=t=>({isFirstLoad:t[1]});function Wt(t){let n,e;const r=t[15].spinner,i=c(r,t,t[14],Pt),o=i||function(t){let n,e;return n=new qt({props:{spinner:t[0]}}),{c(){vt(n.$$.fragment)},m(t,r){wt(n,t,r),e=!0},p(t,e){const r={};1&e&&(r.spinner=t[0]),n.$set(r)},i(t){e||(ct(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){Et(n,t)}}}(t);return{c(){n=E("div"),o&&o.c(),T(n,"class","infinite-status-prompt")},m(t,r){v(t,n,r),o&&o.m(n,null),e=!0},p(t,n){i?i.p&&16386&n&&l(i,r,t,t[14],n,Dt,Pt):o&&o.p&&1&n&&o.p(t,n)},i(t){e||(ct(o,t),e=!0)},o(t){ht(o,t),e=!1},d(t){t&&w(n),o&&o.d(t)}}}function Lt(t){let n,e;const r=t[15].noResults,i=c(r,t,t[14],Bt),o=i||function(t){let n;return{c(){n=S("No results :(")},m(t,e){v(t,n,e)},d(t){t&&w(n)}}}();return{c(){n=E("div"),o&&o.c(),T(n,"class","infinite-status-prompt")},m(t,r){v(t,n,r),o&&o.m(n,null),e=!0},p(t,n){i&&i.p&&16384&n&&l(i,r,t,t[14],n,Rt,Bt)},i(t){e||(ct(o,t),e=!0)},o(t){ht(o,t),e=!1},d(t){t&&w(n),o&&o.d(t)}}}function Ft(t){let n,e;const r=t[15].noMore,i=c(r,t,t[14],Mt),o=i||function(t){let n;return{c(){n=S("No more data :)")},m(t,e){v(t,n,e)},d(t){t&&w(n)}}}();return{c(){n=E("div"),o&&o.c(),T(n,"class","infinite-status-prompt")},m(t,r){v(t,n,r),o&&o.m(n,null),e=!0},p(t,n){i&&i.p&&16384&n&&l(i,r,t,t[14],n,It,Mt)},i(t){e||(ct(o,t),e=!0)},o(t){ht(o,t),e=!1},d(t){t&&w(n),o&&o.d(t)}}}function Ut(n){let e,r;const i=n[15].error,o=c(i,n,n[14],At),s=o||function(n){let e,r,i,o,s,a;return{c(){e=S("Oops, something went wrong :(\n\t\t\t\t"),r=E("br"),i=k(),o=E("button"),o.textContent="Retry",T(o,"class","btn-try-infinite svelte-o3w4bf")},m(t,u){v(t,e,u),v(t,r,u),v(t,i,u),v(t,o,u),s||(a=N(o,"click",n[7]),s=!0)},p:t,d(t){t&&w(e),t&&w(r),t&&w(i),t&&w(o),s=!1,a()}}}(n);return{c(){e=E("div"),s&&s.c(),T(e,"class","infinite-status-prompt")},m(t,n){v(t,e,n),s&&s.m(e,null),r=!0},p(t,n){o&&o.p&&16384&n&&l(o,i,t,t[14],n,_t,At)},i(t){r||(ct(s,t),r=!0)},o(t){ht(s,t),r=!1},d(t){t&&w(e),s&&s.d(t)}}}function zt(t){let n,e,r,i,o,s=t[3]&&Wt(t),a=t[5]&&Lt(t),u=t[6]&&Ft(t),c=t[4]&&Ut(t);return{c(){n=E("div"),s&&s.c(),e=k(),a&&a.c(),r=k(),u&&u.c(),i=k(),c&&c.c(),T(n,"class","infinite-loading-container svelte-o3w4bf")},m(h,l){v(h,n,l),s&&s.m(n,null),b(n,e),a&&a.m(n,null),b(n,r),u&&u.m(n,null),b(n,i),c&&c.m(n,null),t[16](n),o=!0},p(t,[o]){t[3]?s?(s.p(t,o),8&o&&ct(s,1)):(s=Wt(t),s.c(),ct(s,1),s.m(n,e)):s&&(at(),ht(s,1,1,(()=>{s=null})),ut()),t[5]?a?(a.p(t,o),32&o&&ct(a,1)):(a=Lt(t),a.c(),ct(a,1),a.m(n,r)):a&&(at(),ht(a,1,1,(()=>{a=null})),ut()),t[6]?u?(u.p(t,o),64&o&&ct(u,1)):(u=Ft(t),u.c(),ct(u,1),u.m(n,i)):u&&(at(),ht(u,1,1,(()=>{u=null})),ut()),t[4]?c?(c.p(t,o),16&o&&ct(c,1)):(c=Ut(t),c.c(),ct(c,1),c.m(n,null)):c&&(at(),ht(c,1,1,(()=>{c=null})),ut())},i(t){o||(ct(s),ct(a),ct(u),ct(c),o=!0)},o(t){ht(s),ht(a),ht(u),ht(c),o=!1},d(e){e&&w(n),s&&s.d(),a&&a.d(),u&&u.d(),c&&c.d(),t[16](null)}}}const Gt=["executed the callback function more than 10 times for a short time, it looks like searched a wrong scroll wrapper that doest not has fixed height or maximum height, please check it. If you want to force to set a element as scroll wrapper rather than automatic searching, you can do this:","\x3c!-- add a special attribute for the real scroll wrapper (can also be data-infinite-wrapper) --\x3e","<div infinite-wrapper>","  ...","  \x3c!-- set forceUseInfiniteWrapper --\x3e","  <InfiniteLoading forceUseInfiniteWrapper>","</div>","or",'<div class="infinite-wrapper">',"  ...","  \x3c!-- set forceUseInfiniteWrapper as css selector of the real scroll wrapper --\x3e",'  <InfiniteLoading forceUseInfiniteWrapper=".infinite-wrapper" />',"</div>"].join("\n"),Ht=(()=>{let t=!1;try{const n=Object.defineProperty({},"passive",{get:()=>(t={passive:!0},!0)});window.addEventListener("testpassive",n,n),window.remove("testpassive",n,n)}catch(t){}return t})(),Jt={timers:[],caches:[],throttle(t){-1===this.caches.indexOf(t)&&(this.caches.push(t),this.timers.push(setTimeout((()=>{t(),this.caches.splice(this.caches.indexOf(t),1),this.timers.shift()}),50)))},reset(){this.timers.forEach((t=>{clearTimeout(t)})),this.timers.length=0,this.caches=[]}},Xt={isChecked:!1,timer:null,times:0,track(){this.times+=1,clearTimeout(this.timer),this.timer=setTimeout((()=>{this.isChecked=!0}),1e3),this.times>10&&(console.error(Gt),this.isChecked=!0)}},Yt={key:"_infiniteScrollHeight",getScrollElement:t=>t===window?document.documentElement:t,save(t){const n=this.getScrollElement(t);n[this.key]=n.scrollHeight},restore(t){const n=this.getScrollElement(t);"number"==typeof n[this.key]&&(n.scrollTop=n.scrollHeight-n[this.key]+n.scrollTop),this.remove(n)},remove(t){void 0!==t[this.key]&&delete t[this.key]}};function Kt(t){return t.offsetWidth+t.offsetHeight>0}function Vt(t,n,e){let r,i,o,s,{$$slots:a={},$$scope:u}=n;const c=L(),h=0,l=1,f=2,p=3;let d,y,{distance:g=100}=n,{spinner:m="default"}=n,{direction:b="bottom"}=n,{forceUseInfiniteWrapper:v=!1}=n,{identifier:w=+new Date}=n,E=!0,S=h,k=!1;const x={loaded:async()=>{e(1,E=!1),"top"===b&&(await K(),Yt.restore(y)),S===l&&(await K(),await T(!0))},complete:async()=>{e(12,S=f),await K(),y.removeEventListener("scroll",N,Ht)},reset:async()=>{e(12,S=h),e(1,E=!0),Yt.remove(y),y.addEventListener("scroll",N,Ht),setTimeout((()=>{Jt.reset(),N()}),1)},error:()=>{e(12,S=p),Jt.reset()}};function N(t){S===h&&(t&&t.constructor===Event&&Kt(d)?Jt.throttle(T):T())}async function T(t){S!==f&&Kt(d)&&function(){let t;if("top"===b)t="number"==typeof y.scrollTop?y.scrollTop:y.pageYOffset;else{t=d.getBoundingClientRect().top-(y===window?window.innerHeight:y.getBoundingClientRect().bottom)}return t}()<=g?(e(12,S=l),"top"===b&&(await K(),Yt.save(y)),c("infinite",x),!t||v||Xt.isChecked||Xt.track()):S===l&&e(12,S=h)}function C(t=d){let n;return"string"==typeof v&&(n=document.querySelector(v)),n||("BODY"===t.tagName?n=window:(!v&&["scroll","auto"].indexOf(getComputedStyle(t).overflowY)>-1||t.hasAttribute("infinite-wrapper")||t.hasAttribute("data-infinite-wrapper"))&&(n=t)),n||C(t.parentNode)}function $(){k&&(y=C())}return P((async()=>{e(13,k=!0),setTimeout((()=>{N(),y.addEventListener("scroll",N,Ht)}),1)})),W((()=>{k&&S!==f&&(Jt.reset(),Yt.remove(y),y.removeEventListener("scroll",N,Ht))})),t.$$set=t=>{"distance"in t&&e(8,g=t.distance),"spinner"in t&&e(0,m=t.spinner),"direction"in t&&e(9,b=t.direction),"forceUseInfiniteWrapper"in t&&e(10,v=t.forceUseInfiniteWrapper),"identifier"in t&&e(11,w=t.identifier),"$$scope"in t&&e(14,u=t.$$scope)},t.$$.update=()=>{4096&t.$$.dirty&&e(3,r=S===l),4096&t.$$.dirty&&e(4,i=S===p),4098&t.$$.dirty&&e(5,o=S===f&&E),4098&t.$$.dirty&&e(6,s=S===f&&!E),9216&t.$$.dirty&&$(),10240&t.$$.dirty&&k&&x.reset()},[m,E,d,r,i,o,s,T,g,b,v,w,S,k,u,a,function(t){z[t?"unshift":"push"]((()=>{d=t,e(2,d)}))}]}class Zt extends kt{constructor(t){super(),St(this,t,Vt,zt,a,{distance:8,spinner:0,direction:9,forceUseInfiniteWrapper:10,identifier:11})}}function Qt(t){var n={exports:{}};return t(n,n.exports),n.exports}function tn(t){return("0"+t.toString(16)).substr(-2)}function nn(){const t=new Uint32Array(28);return window.crypto.getRandomValues(t),Array.from(t,tn).join("")}async function en(t){const n=await function(t){const n=(new TextEncoder).encode(t);return window.crypto.subtle.digest("SHA-256",n)}(t);var e;return e=n,btoa(String.fromCharCode.apply(null,new Uint8Array(e))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}Qt((function(t){self.window||(window=self),function(){function n(t){return function(n){this[t]=n}}function e(t){return function(){return this[t]}}function r(t){return function(){return t}}var i,o=this;function s(t){return void 0!==t}function a(){}function u(t){var n=typeof t;if("object"==n){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return n;var e=Object.prototype.toString.call(t);if("[object Window]"==e)return"object";if("[object Array]"==e||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==e||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==n&&void 0===t.call)return"object";return n}function c(t){return null!=t}function h(t){var n=u(t);return"array"==n||"object"==n&&"number"==typeof t.length}function l(t){return"string"==typeof t}function f(t){return"function"==u(t)}function p(t){return t[d]||(t[d]=++y)}var d="closure_uid_"+(1e9*Math.random()>>>0),y=0;function g(t,n,e){return t.call.apply(t.bind,arguments)}function m(t,n,e){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(e,r),t.apply(n,e)}}return function(){return t.apply(n,arguments)}}function b(t,n,e){return(b=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?g:m).apply(null,arguments)}function v(t,n){var e=Array.prototype.slice.call(arguments,1);return function(){var n=e.slice();return n.push.apply(n,arguments),t.apply(this,n)}}function w(t,n){t=t.split(".");var e,r=o;t[0]in r||!r.execScript||r.execScript("var "+t[0]);for(;t.length&&(e=t.shift());)!t.length&&s(n)?r[e]=n:r=r[e]&&Object.prototype.hasOwnProperty.call(r,e)?r[e]:r[e]={}}function E(t,n){function e(){}e.prototype=n.prototype,t.hb=n.prototype,t.prototype=new e,t.prototype.constructor=t,t.Vg=function(t,e,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return n.prototype[e].apply(t,i)}}function S(t){if(Error.captureStackTrace)Error.captureStackTrace(this,S);else{var n=Error().stack;n&&(this.stack=n)}t&&(this.message=String(t))}E(S,Error),S.prototype.name="CustomError";var k=String.prototype.trim?function(t){return t.trim()}:function(t){return t.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};function x(t,n){var e=0;t=k(String(t)).split("."),n=k(String(n)).split(".");for(var r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var o=t[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;e=N(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||N(0==o[2].length,0==s[2].length)||N(o[2],s[2]),o=o[3],s=s[3]}while(0==e)}return e}function N(t,n){return t<n?-1:t>n?1:0}function T(t,n,e){this.pg=e,this.Of=t,this.Kg=n,this.qd=0,this.fd=null}T.prototype.get=function(){var t;return 0<this.qd?(this.qd--,t=this.fd,this.fd=t.next,t.next=null):t=this.Of(),t},T.prototype.put=function(t){this.Kg(t),this.qd<this.pg&&(this.qd++,t.next=this.fd,this.fd=t)};var C,$,j=Array.prototype.indexOf?function(t,n,e){return Array.prototype.indexOf.call(t,n,e)}:function(t,n,e){if(e=null==e?0:0>e?Math.max(0,t.length+e):e,l(t))return l(n)&&1==n.length?t.indexOf(n,e):-1;for(;e<t.length;e++)if(e in t&&t[e]===n)return e;return-1},O=Array.prototype.forEach?function(t,n,e){Array.prototype.forEach.call(t,n,e)}:function(t,n,e){for(var r=t.length,i=l(t)?t.split(""):t,o=0;o<r;o++)o in i&&n.call(e,i[o],o,t)},q=Array.prototype.map?function(t,n,e){return Array.prototype.map.call(t,n,e)}:function(t,n,e){for(var r=t.length,i=Array(r),o=l(t)?t.split(""):t,s=0;s<r;s++)s in o&&(i[s]=n.call(e,o[s],s,t));return i},_=Array.prototype.reduce?function(t,n,e,r){return r&&(n=b(n,r)),Array.prototype.reduce.call(t,n,e)}:function(t,n,e,r){var i=e;return O(t,(function(e,o){i=n.call(r,i,e,o,t)})),i},A=Array.prototype.some?function(t,n,e){return Array.prototype.some.call(t,n,e)}:function(t,n,e){for(var r=t.length,i=l(t)?t.split(""):t,o=0;o<r;o++)if(o in i&&n.call(e,i[o],o,t))return!0;return!1};function I(t,n,e){return 2>=arguments.length?Array.prototype.slice.call(t,n):Array.prototype.slice.call(t,n,e)}function M(t){for(var n=[],e=0;e<t;e++)n[e]=0;return n}function R(t){for(var n=[],e=0;e<arguments.length;e++){var r=arguments[e];if("array"==u(r))for(var i=0;i<r.length;i+=8192)for(var o=R.apply(null,I(r,i,i+8192)),s=0;s<o.length;s++)n.push(o[s]);else n.push(r)}return n}function B(t){var n,e=[],r=0;for(n in t)e[r++]=t[n];return e}t:{var D=o.navigator;if(D){var P=D.userAgent;if(P){C=P;break t}}C=""}function W(t){return-1!=C.indexOf(t)}function L(){return W("Safari")&&!(F()||W("Coast")||W("Opera")||W("Edge")||W("Silk")||W("Android"))}function F(){return(W("Chrome")||W("CriOS"))&&!W("Edge")}function U(t){o.setTimeout((function(){throw t}),0)}function z(){this.Bd=this.oc=null}var G,H=new T((function(){return new J}),(function(t){t.reset()}),100);function J(){this.next=this.scope=this.Td=null}function X(t,n){G||function(){if(-1!=String(o.Promise).indexOf("[native code]")){var t=o.Promise.resolve(void 0);G=function(){t.then(V)}}else G=function(){var t=V;!f(o.setImmediate)||o.Window&&o.Window.prototype&&!W("Edge")&&o.Window.prototype.setImmediate==o.setImmediate?($||($=function(){var t=o.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!W("Presto")&&(t=function(){(r=document.createElement("IFRAME")).style.display="none",r.src="",document.documentElement.appendChild(r);var t=r.contentWindow;(r=t.document).open(),r.write(""),r.close();var n="callImmediate"+Math.random(),e="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host,r=b((function(t){"*"!=e&&t.origin!=e||t.data!=n||this.port1.onmessage()}),this);t.addEventListener("message",r,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(n,e)}}}),void 0!==t&&!W("Trident")&&!W("MSIE")){var n=new t,e={},r=e;return n.port1.onmessage=function(){if(s(e.next)){var t=(e=e.next).Fe;e.Fe=null,t()}},function(t){r.next={Fe:t},r=r.next,n.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(t){var n=document.createElement("SCRIPT");n.onreadystatechange=function(){n.onreadystatechange=null,n.parentNode.removeChild(n),n=null,t(),t=null},document.documentElement.appendChild(n)}:function(t){o.setTimeout(t,0)}}()),$(t)):o.setImmediate(t)}}(),Y||(G(),Y=!0),K.add(t,n)}z.prototype.add=function(t,n){var e=H.get();e.set(t,n),this.Bd?this.Bd.next=e:this.oc=e,this.Bd=e},z.prototype.remove=function(){var t=null;return this.oc&&(t=this.oc,this.oc=this.oc.next,this.oc||(this.Bd=null),t.next=null),t},J.prototype.set=function(t,n){this.Td=t,this.scope=n,this.next=null},J.prototype.reset=function(){this.next=this.scope=this.Td=null};var Y=!1,K=new z;function V(){for(var t;t=K.remove();){try{t.Td.call(t.scope)}catch(t){U(t)}H.put(t)}Y=!1}function Z(t,n){if(this.Ta=0,this.nf=void 0,this.Vc=this.dc=this.D=null,this.ed=this.Rd=!1,t!=a)try{var e=this;t.call(n,(function(t){ct(e,2,t)}),(function(t){ct(e,3,t)}))}catch(t){ct(this,3,t)}}function Q(){this.next=this.context=this.ic=this.Ic=this.child=null,this.Ed=!1}Q.prototype.reset=function(){this.context=this.ic=this.Ic=this.child=null,this.Ed=!1};var tt=new T((function(){return new Q}),(function(t){t.reset()}),100);function nt(t,n,e){var r=tt.get();return r.Ic=t,r.ic=n,r.context=e,r}function et(t){if(t instanceof Z)return t;var n=new Z(a);return ct(n,2,t),n}function rt(t){return new Z((function(n,e){e(t)}))}function it(t,n,e){ht(t,n,e,null)||X(v(n,t))}function ot(t){return new Z((function(n,e){var r=t.length,i=[];if(r)for(var o=function(t,e){r--,i[t]=e,0==r&&n(i)},s=function(t){e(t)},a=0;a<t.length;a++)it(t[a],v(o,a),s);else n(i)}))}function st(){var t,n;return new gt(new Z((function(e,r){t=e,n=r})),t,n)}function at(t,n){t.dc||2!=t.Ta&&3!=t.Ta||lt(t),t.Vc?t.Vc.next=n:t.dc=n,t.Vc=n}function ut(t,n,e,r){var i=nt(null,null,null);return i.child=new Z((function(t,o){i.Ic=n?function(e){try{var i=n.call(r,e);t(i)}catch(t){o(t)}}:t,i.ic=e?function(n){try{var i=e.call(r,n);!s(i)&&n instanceof yt?o(n):t(i)}catch(t){o(t)}}:o})),i.child.D=t,at(t,i),i.child}function ct(t,n,e){0==t.Ta&&(t===e&&(n=3,e=new TypeError("Promise cannot resolve to itself")),t.Ta=1,ht(e,t.Qg,t.Rg,t)||(t.nf=e,t.Ta=n,t.D=null,lt(t),3!=n||e instanceof yt||function(t,n){t.ed=!0,X((function(){t.ed&&dt.call(null,n)}))}(t,e)))}function ht(t,n,e,r){if(t instanceof Z)return at(t,nt(n||a,e||null,r)),!0;var i;if(t)try{i=!!t.$goog_Thenable}catch(t){i=!1}else i=!1;if(i)return t.then(n,e,r),!0;if("object"==(i=typeof t)&&null!=t||"function"==i)try{var o=t.then;if(f(o))return function(t,n,e,r,i){function o(t){a||(a=!0,r.call(i,t))}function s(t){a||(a=!0,e.call(i,t))}var a=!1;try{n.call(t,s,o)}catch(t){o(t)}}(t,o,n,e,r),!0}catch(t){return e.call(r,t),!0}return!1}function lt(t){t.Rd||(t.Rd=!0,X(t.Vf,t))}function ft(t){var n=null;return t.dc&&(n=t.dc,t.dc=n.next,n.next=null),t.dc||(t.Vc=null),n}function pt(t,n,e){2==n?t.Ic.call(t.context,e):t.ic&&t.ic.call(t.context,e)}Z.prototype.then=function(t,n,e){return ut(this,f(t)?t:null,f(n)?n:null,e)},Z.prototype.then=Z.prototype.then,Z.prototype.$goog_Thenable=!0,Z.prototype.ve=function(t,n){return ut(this,null,t,n)},Z.prototype.Qg=function(t){this.Ta=0,ct(this,2,t)},Z.prototype.Rg=function(t){this.Ta=0,ct(this,3,t)},Z.prototype.Vf=function(){for(var t;t=ft(this);){var n,e=this.Ta,r=this.nf;if(3==e&&t.ic&&!t.Ed)for(n=this;n&&n.ed;n=n.D)n.ed=!1;if(t.child)t.child.D=null,pt(t,e,r);else try{t.Ed?t.Ic.call(t.context):pt(t,e,r)}catch(t){dt.call(null,t)}tt.put(t)}this.Rd=!1};var dt=U;function yt(t){S.call(this,t)}function gt(t,n,e){this.ha=t,this.resolve=n,this.reject=e}function mt(t,n,e,r){e=e||function(t,n){return t==n},r=r||function(n){return t[n]};for(var i=t.length,o=n.length,s=[],a=0;a<i+1;a++)s[a]=[],s[a][0]=0;for(var u=0;u<o+1;u++)s[0][u]=0;for(a=1;a<=i;a++)for(u=1;u<=o;u++)e(t[a-1],n[u-1])?s[a][u]=s[a-1][u-1]+1:s[a][u]=Math.max(s[a-1][u],s[a][u-1]);var c=[];for(a=i,u=o;0<a&&0<u;)e(t[a-1],n[u-1])?(c.unshift(r(a-1,u-1)),a--,u--):s[a-1][u]>s[a][u-1]?a--:u--;return c}function bt(t){return _(arguments,(function(t,n){return t+n}),0)}function vt(t){return bt.apply(null,arguments)/arguments.length}function wt(t){var n=arguments.length;if(2>n)return 0;var e=vt.apply(null,arguments);return bt.apply(null,q(arguments,(function(t){return Math.pow(t-e,2)})))/(n-1)}function Et(t){return Math.sqrt(wt.apply(null,arguments))}E(yt,S),yt.prototype.name="cancel";var St="StopIteration"in o?o.StopIteration:{message:"StopIteration",stack:""};function kt(){}function xt(t,n){if(h(t))try{O(t,n,void 0)}catch(t){if(t!==St)throw t}else{t=function(t){if(t instanceof kt)return t;if("function"==typeof t.pc)return t.pc(!1);if(h(t)){var n=0,e=new kt;return e.next=function(){for(;;){if(n>=t.length)throw St;if(n in t)return t[n++];n++}},e}throw Error("Not implemented")}(t);try{for(;;)n.call(void 0,t.next(),void 0,t)}catch(t){if(t!==St)throw t}}}function Nt(t){if(A(arguments,(function(t){return!t.length}))||!arguments.length)return new kt;var n=new kt,e=arguments,r=M(e.length);return n.next=function(){if(r){for(var t=q(r,(function(t,n){return e[n][t]})),n=r.length-1;0<=n;n--){if(r[n]<e[n].length-1){r[n]++;break}if(0==n){r=null;break}r[n]=0}return t}throw St},n}function Tt(t,n){this.l={},this.a=[],this.Ua=this.Eb=0;var e=arguments.length;if(1<e){if(e%2)throw Error("Uneven number of arguments");for(var r=0;r<e;r+=2)this.set(arguments[r],arguments[r+1])}else t&&this.addAll(t)}function Ct(t){return $t(t),t.a.concat()}function $t(t){if(t.Eb!=t.a.length){for(var n=0,e=0;n<t.a.length;){var r=t.a[n];jt(t.l,r)&&(t.a[e++]=r),n++}t.a.length=e}if(t.Eb!=t.a.length){var i={};for(e=n=0;n<t.a.length;)jt(i,r=t.a[n])||(t.a[e++]=r,i[r]=1),n++;t.a.length=e}}function jt(t,n){return Object.prototype.hasOwnProperty.call(t,n)}function Ot(){return W("iPhone")&&!W("iPod")&&!W("iPad")}kt.prototype.next=function(){throw St},kt.prototype.pc=function(){return this},(i=Tt.prototype).zc=e("Eb"),i.qa=function(){$t(this);for(var t=[],n=0;n<this.a.length;n++)t.push(this.l[this.a[n]]);return t},i.Pa=function(t){return jt(this.l,t)},i.jd=function(){return 0==this.Eb},i.clear=function(){this.l={},this.Ua=this.Eb=this.a.length=0},i.remove=function(t){return!!jt(this.l,t)&&(delete this.l[t],this.Eb--,this.Ua++,this.a.length>2*this.Eb&&$t(this),!0)},i.get=function(t,n){return jt(this.l,t)?this.l[t]:n},i.set=function(t,n){jt(this.l,t)||(this.Eb++,this.a.push(t),this.Ua++),this.l[t]=n},i.addAll=function(t){var n;if(t instanceof Tt)n=Ct(t),t=t.qa();else{n=[];var e,r=0;for(e in t)n[r++]=e;t=B(t)}for(r=0;r<n.length;r++)this.set(n[r],t[r])},i.forEach=function(t,n){for(var e=Ct(this),r=0;r<e.length;r++){var i=e[r],o=this.get(i);t.call(n,o,i,this)}},i.clone=function(){return new Tt(this)},i.pc=function(t){$t(this);var n=0,e=this.Ua,r=this,i=new kt;return i.next=function(){if(e!=r.Ua)throw Error("The map has changed since the iterator was created");if(n>=r.a.length)throw St;var i=r.a[n++];return t?i:r.l[i]},i};var qt,_t,At=W("Opera"),It=W("Trident")||W("MSIE"),Mt=W("Edge"),Rt=W("Gecko")&&!(-1!=C.toLowerCase().indexOf("webkit")&&!W("Edge"))&&!(W("Trident")||W("MSIE"))&&!W("Edge"),Bt=-1!=C.toLowerCase().indexOf("webkit")&&!W("Edge"),Dt=W("Macintosh"),Pt=W("Windows"),Wt=W("Android"),Lt=Ot(),Ft=W("iPad"),Ut=W("iPod");t:{var zt="",Gt=(_t=C,Rt?/rv\:([^\);]+)(\)|;)/.exec(_t):Mt?/Edge\/([\d\.]+)/.exec(_t):It?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(_t):Bt?/WebKit\/(\S+)/.exec(_t):At?/(?:Version)[ \/]?(\S+)/.exec(_t):void 0);if(Gt&&(zt=Gt?Gt[1]:""),It){var Ht,Jt=o.document;if(null!=(Ht=Jt?Jt.documentMode:void 0)&&Ht>parseFloat(zt)){qt=String(Ht);break t}}qt=zt}var Xt=qt,Yt={};function Kt(t){return function(t,n){var e=Yt;return Object.prototype.hasOwnProperty.call(e,t)?e[t]:e[t]=n(t)}(t,(function(){return 0<=x(Xt,t)}))}var Vt,Zt=function(){var t;return Pt?(t=(t=/Windows NT ([0-9.]+)/).exec(C))?t[1]:"0":Dt?(t=(t=/10[_.][0-9_.]+/).exec(C))?t[0].replace(/_/g,"."):"10":Wt?(t=(t=/Android\s+([^\);]+)(\)|;)/).exec(C))?t[1]:"":Lt||Ft||Ut?(t=(t=/(?:iPhone|CPU)\s+OS\s+(\S+)/).exec(C))?t[1].replace(/_/g,"."):"":""}(),Qt=Ot()||W("iPod"),tn=W("iPad");function nn(){var t;!(t=L()&&!Kt(10))&&(t=tn||Qt)&&(t=!(0<=x(Zt,10))),this.ae=t,this.fg=!(this.ae||It&&!Kt(10)),!It||Kt(11),this.Ug=F()||L(),this.ug=s(window.Map)&&s(window.Map.prototype.values)&&s(window.Map.prototype.forEach)&&!this.ae,this.vg=s(window.Set)&&s(window.Set.prototype.values)&&s(window.Set.prototype.forEach)&&!this.ae}function en(){return s(Vt)||(Vt=new nn),Vt}function rn(){this.l=new Tt,Object.defineProperty(this,"size",{get:function(){return this.l.zc()}})}rn.prototype.clear=function(){this.l.clear()},rn.prototype.clear=rn.prototype.clear,rn.prototype.delete=function(t){return this.l.remove(t)},rn.prototype.delete=rn.prototype.delete,rn.prototype.forEach=function(t,n){return this.l.forEach(t,n)},rn.prototype.forEach=rn.prototype.forEach,rn.prototype.get=function(t){return this.l.get(t)},rn.prototype.get=rn.prototype.get,rn.prototype.has=function(t){return this.l.Pa(t)},rn.prototype.has=rn.prototype.has,rn.prototype.set=function(t,n){return this.l.set(t,n)},rn.prototype.set=rn.prototype.set;var on=en().ug;function sn(){return on?new window.Map:new rn}function an(t){if(t instanceof rn)return Ct(t.l);var n=0,e=Array(t.size);return t.forEach((function(t,r){e[n++]=r})),e}function un(t){if(t instanceof rn)return t.l.qa();var n=0,e=Array(t.size);return t.forEach((function(t){e[n++]=t})),e}function cn(t,n){this.sa=t,this.m=n||this.Ke()}var hn=0;function ln(t){return new cn(t.id,t.value)}function fn(t){return new cn(hn++,t||{})}function pn(t){if(null==t)return null;t=new Uint8Array(t);for(var n="",e=0;e<t.length;++e){var r=t[e].toString(16);n=n+(2>r.length?"0"+r:r)}return n}(i=cn.prototype).id=e("sa"),i.Ke=function(){return{}},i.wf=e("m"),i.Ja=function(){return{id:this.sa,value:this.wf()}},i.nb=function(t){return"#"==t.substr(-1)?this.sa:null};var dn={};function yn(t,n,e,r,i){this.wd=t,this.jg=n,this.Tg=e,this.Qf=r,this.Jf=i}function gn(t,n){this.yd=t,this.Ra=n||null,this.S=st(),this.wd=!1,this.za=null}function mn(t){this.Lg=t}w("lf.TransactionType",dn),dn.READ_ONLY=0,dn.READ_WRITE=1,w("lf.TransactionStats",yn),yn.prototype.Og=e("wd"),yn.prototype.success=yn.prototype.Og,yn.prototype.ig=e("jg"),yn.prototype.insertedRowCount=yn.prototype.ig,yn.prototype.Sg=e("Tg"),yn.prototype.updatedRowCount=yn.prototype.Sg,yn.prototype.Pf=e("Qf"),yn.prototype.deletedRowCount=yn.prototype.Pf,yn.prototype.If=e("Jf"),yn.prototype.changedTableCount=yn.prototype.If,gn.prototype.ka=function(){return(0==this.yd?this.sc():function(t){try{!function(t){t.ib.forEach((function(t){var n=this.aa.get(t.getName());ne(this.Aa,n,un(t.wa),1),re(this.Aa,n,un(t.xa),1),ee(this.Aa,n,un(t.la),1)}),t)}(t.Ra)}catch(t){return rt(t)}return function(t){return function(t){t.Ra.ib.forEach((function(t,n){n=this.Ra.da().get(n),n=this.I(n.getName(),n.kb.bind(n),0);var e=un(t.xa).map((function(t){return t.id()}));0<e.length&&n.remove(e).ve(this.Te,this),t=un(t.la).map((function(t){return t[1]})).concat(un(t.wa)),n.put(t).ve(this.Te,this)}),t)}(t),function(t){(function(t){var n=[];return an(t.ib).map((function(t){return this.aa.get(t)}),t).forEach((function(t){t.Cb()&&(t.Da().forEach((function(t){n.push(this.C.get(t.j()))}),this),n.push(this.C.get(t.getName()+".#")))}),t),n})(t.Ra).forEach((function(t){var n=this.I(t.getName(),ln,1);n.remove([]),n.put(t.Ja())}),t)}(t),t.sc()}(t).then(function(t){return this.Ra.ka(),t}.bind(t))}(this)).then(function(t){return this.wd=!0,t}.bind(this))},gn.prototype.Te=function(t){this.S.reject(t)},gn.prototype.Y=function(){if(null===this.za)if(this.wd)if(0==this.yd)this.za=new yn(!0,0,0,0,0);else{var t=0,n=0,e=0,r=0;this.Ra.ib.forEach((function(i){r++,t+=i.wa.size,e+=i.la.size,n+=i.xa.size})),this.za=new yn(!0,t,e,n,r)}else this.za=new yn(!1,0,0,0,0);return this.za},mn.prototype.toString=e("Lg");var bn=new mn("backstore"),vn=new mn("cache"),wn=new mn("indexstore"),En=new mn("engine"),Sn=new mn("runner"),kn=new mn("observerregistry"),xn=new mn("schema");function Nn(t){this.l=new Tt,t&&this.addAll(t)}function Tn(t){var n=typeof t;return"object"==n&&t||"function"==n?"o"+p(t):n.substr(0,1)+t}function Cn(t){this.Xb=new Nn(t),Object.defineProperty(this,"size",{get:function(){return this.Xb.zc()}})}(i=Nn.prototype).zc=function(){return this.l.zc()},i.add=function(t){this.l.set(Tn(t),t)},i.addAll=function(t){for(var n=(t=function(t){if(t.qa&&"function"==typeof t.qa)return t.qa();if(l(t))return t.split("");if(h(t)){for(var n=[],e=t.length,r=0;r<e;r++)n.push(t[r]);return n}return B(t)}(t)).length,e=0;e<n;e++)this.add(t[e])},i.remove=function(t){return this.l.remove(Tn(t))},i.clear=function(){this.l.clear()},i.jd=function(){return this.l.jd()},i.contains=function(t){return this.l.Pa(Tn(t))},i.qa=function(){return this.l.qa()},i.clone=function(){return new Nn(this)},i.pc=function(){return this.l.pc(!1)},Cn.prototype.add=function(t){this.Xb.add(t)},Cn.prototype.add=Cn.prototype.add,Cn.prototype.clear=function(){this.Xb.clear()},Cn.prototype.clear=Cn.prototype.clear,Cn.prototype.delete=function(t){return this.Xb.remove(t)},Cn.prototype.delete=Cn.prototype.delete,Cn.prototype.forEach=function(t,n){this.Xb.qa().forEach(t,n)},Cn.prototype.has=function(t){return this.Xb.contains(t)},Cn.prototype.has=Cn.prototype.has;var $n=en().vg;function jn(t){return $n?s(t)?new window.Set(t):new window.Set:new Cn(t)}function On(t){if(t instanceof Cn)return t.Xb.qa();var n=0,e=Array(t.size);return t.forEach((function(t){e[n++]=t})),e}function qn(t,n){this.sa=t,this.m=n||{}}function _n(t,n){n.forEach((function(t){this.m[t.id()]=t.Ja()}),t)}function An(t){return new qn(t.id,JSON.parse(t.value))}function In(t,n,e){this.Z=t,this.Gb=n,this.pf=e}function Mn(t,n,e){var r=[e<<9,(e+1<<9)-1];return n=(t=t.b(vn)).Va(n,r[0],r[1]),_n(e=new qn(e),n),e}function Rn(t,n){return new qn(n)}function Bn(t){this.V=t.b(vn),this.C=t.b(wn),this.g=t.b(xn)}function Dn(t,n,e){var r=t.C.lc.get(n.getName())||[],i=0;r.forEach((function(t){try{Pn(t,e),i++}catch(t){throw r.slice(0,i).forEach((function(t){Pn(t,[e[1],e[0]])}),this),t}}),t)}function Pn(t,n){var e=null===n[1]?void 0:n[1].nb(t.getName()),r=null===n[0]?void 0:n[0].nb(t.getName());if(!s(r)&&s(e))t.add(e,n[1].id());else if(s(r)&&s(e)){if(null===e||null===r){if(e==r)return}else if(0==t.jb().compare(r,e))return;t.add(e,n[1].id()),t.remove(r,n[0].id())}else s(r)&&!s(e)&&t.remove(r,n[0].id())}qn.prototype.W=e("sa"),qn.prototype.Ja=function(){return{id:this.sa,value:JSON.stringify(this.m)}},(i=In.prototype).get=function(t){if(0==t.length)return this.Vd();var n=this.Gb;return function(t,n){var e=sn(),r=st();return ot(t=function(t){var n=jn();return t.forEach((function(t){n.add(t>>9)})),On(n)}(n).map((function(t){return new Z((function(n,r){var i;try{i=this.Z.get(t)}catch(t){return void r(t)}i.onerror=r,i.onsuccess=function(t){t=An(t.target.result),e.set(t.W(),t),n()}}),this)}),t)).then((function(){r.resolve(e)})),r.ha}(this,t).then((function(e){return t.map((function(t){var r=e.get(t>>9);return n(r.m[t])}))}))},i.Vd=function(){return new Z((function(t,n){var e,r=[];try{e=this.Z.openCursor()}catch(t){return void n(t)}e.onerror=n,e.onsuccess=function(){var n=e.result;if(n){var i,o=An(n.value).m;for(i in o)r.push(this.Gb(o[i]));n.continue()}else t(r)}.bind(this)}),this)},i.Tb=function(t){return new Z((function(n,e){var r;try{r=t()}catch(t){return void e(t)}r.onsuccess=n,r.onerror=e}),this)},i.put=function(t){if(0==t.length)return et();var n=sn();return t.forEach((function(t){var e=t.id()>>9,r=n.get(e)||null;null===r&&(r=this.pf(this.Z.name,e)),_n(r,[t]),n.set(e,r)}),this),ot(t=un(n).map((function(t){return this.Tb(function(){return this.Z.put(t.Ja())}.bind(this))}),this))},i.remove=function(t){if(0==t.length)return this.Tb(function(){return this.Z.clear()}.bind(this));var n=sn();return t.forEach((function(t){var e=t>>9,r=n.get(e)||null;null===r&&(r=this.pf(this.Z.name,e)),function(t,n){n.forEach((function(t){delete this.m[t]}),t)}(r,[t]),n.set(e,r)}),this),ot(t=un(n).map((function(t){return this.Tb(function(){return 0==Object.keys(t.m).length?this.Z.delete(t.W()):this.Z.put(t.Ja())}.bind(this))}),this))},Bn.prototype.update=function(t){t.forEach((function(t){!function(t,n){var e=t.g.table(n.getName());(function(t){var n=[];return t.wa.forEach((function(t){n.push([null,t])})),t.la.forEach((function(t){n.push(t)})),t.xa.forEach((function(t){n.push([t,null])})),n})(n).forEach((function(t){Dn(this,e,t)}),t)}(this,t),function(t,n){var e=n.getName();n.xa.forEach((function(t,n){this.V.remove(e,n)}),t),n.wa.forEach((function(t){this.V.set(e,t)}),t),n.la.forEach((function(t){this.V.set(e,t[1])}),t)}(this,t)}),this)};var Wn={};w("lf.ConstraintAction",Wn),Wn.RESTRICT=0,Wn.CASCADE=1;var Ln={};w("lf.ConstraintTiming",Ln),Ln.IMMEDIATE=0,Ln.DEFERRABLE=1;var Fn={};w("lf.Order",Fn),Fn.DESC=0,Fn.ASC=1;var Un={};w("lf.Type",Un),Un.ARRAY_BUFFER=0,Un.BOOLEAN=1,Un.DATE_TIME=2,Un.INTEGER=3,Un.NUMBER=4,Un.STRING=5,Un.OBJECT=6;var zn={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};function Gn(t,n){if(this.code=t,this.message="http://google.github.io/lovefield/error_lookup/src/error_lookup.html?c="+t,1<arguments.length)for(var e=1;e<=Math.min(4,arguments.length-1);++e)this.message+="&p"+(e-1)+"="+encodeURIComponent(String(arguments[e]).slice(0,64))}function Hn(){this.l=sn(),this.size=0}function Jn(t){this.C=t.b(wn),this.g=t.b(xn),this.V=t.b(vn),this.$c=null}function Xn(t,n,e){var r=n.Mb.xg;e.forEach((function(t){r.forEach((function(n){if(null==t.m[n.getName()])throw new Gn(202,n.j())}),this)}),t)}function Yn(t,n,e,r){n.Mb.Ud.forEach((function(t){t.timing==r&&function(t,n,e){var r=Kn(t,n);e.forEach((function(t){if(Vn(t[0],t[1],n.name)&&(null!==(t=t[1].nb(n.name))&&!r.Pa(t)))throw new Gn(203,n.name)}),t)}(this,t,e)}),t)}function Kn(t,n){null===t.$c&&(t.$c=sn());var e=t.$c.get(n.name)||null;return null===e&&(e=t.g.table(n.Xa)[n.Jc].Ca(),e=t.C.get(e.j()),t.$c.set(n.name,e)),e}function Vn(t,n,e){return(null===t?null!==n:null===n)||t.nb(e)!=n.nb(e)}function Zn(t,n,e,r){null!==(n=ka(t.g.info(),n.getName(),0))&&(0!=(n=n.filter((function(t){return t.timing==r}))).length&&te(t,n,e,(function(t,n,e){if(n.Pa(e))throw new Gn(203,t.name)})))}function Qn(t,n,e){if(null===(n=ka(t.g.info(),n.getName(),1)))return null;var r=new Hn;return te(t,n,e,(function(t,n,e){0<(n=n.get(e)).length&&r.Wb(t.Ge,n)})),r}function te(t,n,e,r){n.forEach((function(t){var n=this.C.get(t.name),i=Kn(this,t);e.forEach((function(e){if(Vn(e[0],e[1],i.getName())){var o=e[0].nb(i.getName());r(t,n,o,e)}}),this)}),t)}function ne(t,n,e,r){0!=e.length&&Yn(t,n,e=e.map((function(t){return[null,t]})),r)}function ee(t,n,e,r){0!=e.length&&(Yn(t,n,e,r),Zn(t,n,e,r))}function re(t,n,e,r){0!=e.length&&Zn(t,n,e=e.map((function(t){return[t,null]})),r)}function ie(t){this.wa=sn(),this.la=sn(),this.xa=sn(),this.A=t}function oe(t,n){this.aa=sn(),n.forEach((function(t){this.aa.set(t.getName(),t)}),this),this.g=t.b(xn),this.V=t.b(vn),this.C=t.b(wn),this.Aa=new Jn(t),this.gd=new Bn(t),this.ib=sn()}function se(t,n,e){var r=n.getName(),i=t.ib.get(r)||new ie(r);t.ib.set(r,i);try{Dn(t.gd,n,e)}catch(t){throw t}n=e[0];var o=e[1];null===n&&null!==o?(t.V.set(r,o),i.add(o)):null!==n&&null!==o?(t.V.set(r,o),i.modify(e)):null!==n&&null===o&&(t.V.remove(r,n.id()),i.delete(n))}function ae(t,n){if(!t.aa.has(n.getName()))throw new Gn(106,n.getName())}function ue(t,n,e,r){this.from=t,this.o=n,this.ea=this.from!=ce&&e,this.na=this.o!=ce&&r}w("lf.type.DEFAULT_VALUES",zn),E(Gn,Error),(i=Hn.prototype).has=function(t){return this.l.has(t)},i.set=function(t,n){var e=this.l.get(t)||null;return null===e&&(e=jn(),this.l.set(t,e)),e.has(n)||(e.add(n),this.size++),this},i.Wb=function(t,n){var e=this.l.get(t)||null;return null===e&&(e=jn(),this.l.set(t,e)),n.forEach((function(t){e.has(t)||(e.add(t),this.size++)}),this),this},i.be=function(t){return t.keys().forEach((function(n){var e=t.get(n);this.Wb(n,e)}),this),this},i.delete=function(t,n){var e=this.l.get(t)||null;return null!==e&&((n=e.delete(n))&&(--this.size,0==e.size&&this.l.delete(t)),n)},i.get=function(t){return null===(t=this.l.get(t)||null)?null:On(t)},i.clear=function(){this.l.clear(),this.size=0},i.keys=function(){return an(this.l)},i.values=function(){var t=[];return this.l.forEach((function(n){t.push.apply(t,On(n))})),t},(i=ie.prototype).getName=e("A"),i.add=function(t){if(this.xa.has(t.id())){var n=[this.xa.get(t.id()),t];this.la.set(t.id(),n),this.xa.delete(t.id())}else this.wa.set(t.id(),t)},i.modify=function(t){var n=t[1],e=t[0].id();this.wa.has(e)?this.wa.set(e,n):(this.la.has(e)&&(t=[this.la.get(t[0].id())[0],n]),this.la.set(e,t))},i.delete=function(t){if(this.wa.has(t.id()))this.wa.delete(t.id());else if(this.la.has(t.id())){var n=this.la.get(t.id())[0];this.la.delete(t.id()),this.xa.set(t.id(),n)}else this.xa.set(t.id(),t)},i.be=function(t){t.wa.forEach((function(t){this.add(t)}),this),t.la.forEach((function(t){this.modify(t)}),this),t.xa.forEach((function(t){this.delete(t)}),this)},i.toString=function(){return"["+an(this.wa).toString()+"], ["+an(this.la).toString()+"], ["+an(this.xa).toString()+"]"},i.jd=function(){return 0==this.wa.size&&0==this.xa.size&&0==this.la.size},(i=oe.prototype).da=e("aa"),i.Ab=function(t,n){ae(this,t),Xn(this.Aa,t,n),ne(this.Aa,t,n,0);for(var e=0;e<n.length;e++)se(this,t,[null,n[e]])},i.update=function(t,n){ae(this,t),Xn(this.Aa,t,n),n=n.map((function(t){return[this.V.get(t.id()),t]}),this),function(t,n,e){if(null!==(n=ka(t.g.info(),n.getName(),1))){var r=function(t,n,e){var r=new Hn;return te(t,e,n,(function(t,n,e,i){n.get(e).forEach((function(n){r.set(n,{Sd:t,Cg:i[1]})}))})),r}(t.Aa,e,n);r.keys().forEach((function(t){r.get(t).forEach((function(n){var e=this.g.table(n.Sd.Ge),r=this.V.get(t),i=e.kb(r.Ja());i.m[n.Sd.vb]=n.Cg.m[n.Sd.Jc],se(this,e,[r,i])}),this)}),t)}}(this,t,n),ee(this.Aa,t,n,0),n.forEach((function(n){se(this,t,n)}),this)},i.Wd=function(t,n){ae(this,t),Xn(this.Aa,t,n);for(var e=0;e<n.length;e++){var r,i=n[e],o=null;if(null===(s=t.Mb.sd))r=null;else{r=this.Aa;var s=s.j(),a=i.nb(s);r=0==(r=r.C.get(s).get(a)).length?null:r[0]}null!=r?(o=this.V.get(r),i.sa=r,ee(this.Aa,t,[[o,i]],0)):ne(this.Aa,t,[i],0),se(this,t,[o,i])}},i.remove=function(t,n){ae(this,t),function(t,n,e){if(null!==ka(t.g.info(),n.getName(),1)){var r=(n=function(t,n,e){var r={ue:[],rf:new Hn},i=new Hn;i.Wb(n.getName(),e.map((function(t){return t.id()})));do{var o=new Hn;i.keys().forEach((function(t){var n=this.g.table(t);null!==(n=Qn(this,n,t=i.get(t).map((function(t){return[this.V.get(t),null]}),this)))&&(r.ue.unshift.apply(r.ue,n.keys()),o.be(n))}),t),i=o,r.rf.be(i)}while(0<i.size);return r}(t.Aa,n,e)).rf;n.ue.forEach((function(t){var n=this.g.table(t);t=r.get(t).map((function(t){return this.V.get(t)}),this),re(this.Aa,n,t,0),t.forEach((function(t){se(this,n,[t,null])}),this)}),t)}}(this,t,n),re(this.Aa,t,n,0);for(var e=0;e<n.length;e++)se(this,t,[n[e],null])},i.ka=function(){},i.Jb=function(){var t=un(this.ib).map((function(t){return function(t){var n=new ie(t.A);return t.wa.forEach((function(t){n.delete(t)})),t.xa.forEach((function(t){n.add(t)})),t.la.forEach((function(t){n.modify([t[1],t[0]])})),n}(t)}));this.gd.update(t)};var ce=new function(){};function he(t,n){var e=de(t.from,n.from,!0,t.ea,n.ea);if(0==e)return!0;var r=-1==e?t:n;return t=1==e?t:n,r.o==ce||r.o>t.from||r.o==t.from&&!r.na&&!t.ea}function le(){return new ue(ce,ce,!1,!1)}function fe(t){return t.from==ce&&t.o==ce}function pe(t){return t.from==t.o&&t.from!=ce&&!t.ea&&!t.na}function de(t,n,e,r,i){function o(t){return e?t:1==t?-1:1}return r=r||!1,i=i||!1,t==ce?n==ce?(r?!i:i)?o(r?1:-1):0:o(-1):n==ce?o(1):t<n?-1:t==n?(r?!i:i)?o(r?1:-1):0:1}function ye(t,n){var e=de(t.from,n.from,!0,t.ea,n.ea);return 0==e&&(e=de(t.o,n.o,!1,t.na,n.na)),e}function ge(t){this.kc=[],s(t)&&this.add(t)}function me(t,n){this.entries=t,this.M=jn(n),this.$a=null}function be(t){return t.entries.map((function(t){return t.va.m}))}function ve(t){return t.entries.map((function(t){return t.va.id()}))}function we(t,n){return t.$a.get(n.j())}ue.prototype.toString=function(){return(this.ea?"(":"[")+(this.from==ce?"unbound":this.from)+", "+(this.o==ce?"unbound":this.o)+(this.na?")":"]")},ue.prototype.reverse=function(){return new ue(this.o,this.from,this.na,this.ea)},ue.prototype.contains=function(t){var n=this.o==ce||t<this.o||t==this.o&&!this.na;return(this.from==ce||t>this.from||t==this.from&&!this.ea)&&n},ge.prototype.toString=function(){return this.kc.map((function(t){return t.toString()})).join(",")},ge.prototype.Pa=function(t){return this.kc.some((function(n){return n.contains(t)}))},ge.prototype.qa=e("kc"),ge.prototype.add=function(t){if(0!=t.length)if(1==(t=this.kc.concat(t)).length)this.kc=t;else{t.sort(ye);for(var n=[],e=t[0],r=1;r<t.length;++r)if(he(e,t[r])){var i=t[r],o=le();if(e.from!=ce&&i.from!=ce){var s=de(e.from,i.from,!0);1!=s?(o.from=e.from,o.ea=0!=s?e.ea:e.ea&&i.ea):(o.from=i.from,o.ea=i.ea)}e.o!=ce&&i.o!=ce&&(-1!=(s=de(e.o,i.o,!1))?(o.o=e.o,o.na=0!=s?e.na:e.na&&i.na):(o.o=i.o,o.na=i.na)),e=o}else n.push(e),e=t[r];n.push(e),this.kc=n}},me.prototype.u=function(){return On(this.M)};var Ee=null;function Se(){return null===Ee&&(Ee=new me([],[])),Ee}function ke(t,n){var e=1<n.length;return new me(t=t.map((function(t){return new xe(t,e)})),n)}function xe(t,n){this.va=t,this.id=Te++,this.Yd=n}var Ne,Te=0;function Ce(t,n){var e=n.Ka;return null!==e&&t.va.m.hasOwnProperty(e)?t.va.m[e]:t.Yd?t.va.m[Fi(n.I())][n.getName()]:t.va.m[n.getName()]}function $e(t,n,e){if(null!=(r=n.Ka))t.va.m[r]=e;else if(t.Yd){var r=Fi(n.I()),i=t.va.m[r];null==i&&(i={},t.va.m[r]=i),i[n.getName()]=e}else t.va.m[n.getName()]=e}function je(t,n,e,r){function i(t,n){if(t.Yd)for(var e in t=t.va.m)o[e]=t[e];else o[n[0]]=t.va.m}var o={};return i(t,n),i(e,r),new xe(t=new cn(-1,o),!0)}function Oe(t){this.fa=t}function qe(){this.Ze=function(){function t(t){return t}var n=sn();return n.set(1,(function(t){return null===t?null:t?1:0})),n.set(2,(function(t){return null===t?null:t.getTime()})),n.set(3,t),n.set(4,t),n.set(5,t),n}();var t=Me();this.Ob=sn(),this.Ob.set(1,Ie()),this.Ob.set(2,function(){var t=sn();return t.set("between",(function(t,n){return null!==t&&null!==n[0]&&null!==n[1]&&(t.getTime()>=n[0].getTime()&&t.getTime()<=n[1].getTime())})),t.set("eq",(function(t,n){return(null===t?-1:t.getTime())==(null===n?-1:n.getTime())})),t.set("gte",(function(t,n){return null!==t&&null!==n&&t.getTime()>=n.getTime()})),t.set("gt",(function(t,n){return null!==t&&null!==n&&t.getTime()>n.getTime()})),t.set("in",(function(t,n){return n.some((function(n){return n.getTime()==t.getTime()}))})),t.set("lte",(function(t,n){return null!==t&&null!==n&&t.getTime()<=n.getTime()})),t.set("lt",(function(t,n){return null!==t&&null!==n&&t.getTime()<n.getTime()})),t.set("neq",(function(t,n){return(null===t?-1:t.getTime())!=(null===n?-1:n.getTime())})),t}()),this.Ob.set(4,t),this.Ob.set(3,t),this.Ob.set(5,function(){var t=Me();return t.set("match",(function(t,n){return null!==t&&null!==n&&new RegExp(n).test(t)})),t}()),this.Ob.set(6,function(){var t=sn();return t.set("eq",(function(t,n){if(null!==n)throw new Gn(550);return null===t})),t.set("neq",(function(t,n){if(null!==n)throw new Gn(550);return null!==t})),t}())}function _e(){return null!=Ne||(Ne=new qe),Ne}function Ae(t,n,e){if(null===(t=t.Ob.get(n)||null))throw new Gn(550);if(null===(e=t.get(e)||null))throw new Gn(550);return e}function Ie(){var t=sn();return t.set("eq",(function(t,n){return t==n})),t.set("neq",(function(t,n){return t!=n})),t}function Me(){var t=Ie();return t.set("between",(function(t,n){return null!==t&&null!==n[0]&&null!==n[1]&&(t>=n[0]&&t<=n[1])})),t.set("gte",(function(t,n){return null!==t&&null!==n&&t>=n})),t.set("gt",(function(t,n){return null!==t&&null!==n&&t>n})),t.set("in",(function(t,n){return-1!=n.indexOf(t)})),t.set("lte",(function(t,n){return null!==t&&null!==n&&t<=n})),t.set("lt",(function(t,n){return null!==t&&null!==n&&t<n})),t}function Re(){this.h=this.D=null}w("lf.bind",(function(t){return new Oe(t)})),w("lf.Binder",Oe),Oe.prototype.Ca=e("fa");var Be=[];function De(t){for(var n=0;null!==t.getParent();)n++,t=t.getParent();return n}function Pe(t){return t.h||Be}function We(t,n){return Pe(t)[n]||null}function Le(t,n,e){n.D=t,null===t.h?t.h=[n]:t.h.splice(e,0,n)}function Fe(t,n){n.D=t,null===t.h?t.h=[n]:t.h.push(n)}function Ue(t,n){var e=t.h&&t.h[n];return e?(e.D=null,t.h.splice(n,1),0==t.h.length&&(t.h=null),e):null}function ze(t,n,e){!1!==n.call(e,t)&&Pe(t).forEach((function(t){ze(t,n,e)}))}function Ge(){Re.call(this),this.sa=He++}Re.prototype.getParent=e("D"),Re.prototype.bb=function(){for(var t=this;null!==t.getParent();)t=t.getParent();return t},Re.prototype.removeChild=function(t){return Ue(this,Pe(this).indexOf(t))},E(Ge,Re);var He=0;function Je(t,n,e){Ge.call(this),this.J=t,this.value=n,this.F=e,this.vc=Ae(_e(),this.J.G(),this.F),this.Wa=!1,this.cc=n}function Xe(t){var n=!1;if(t.value instanceof Oe||(n="array"!=u(t.value)||!t.value.some((function(t){return t instanceof Oe}))),!n)throw new Gn(501)}function Ye(t,n){return 2==t.J.G()?n.getTime():n}function Ke(t){this.ba=t,this.Wc=this.Ga=null}function Ve(t,n){return null===t.Ga&&null!=t.w&&(t.Ga=function(t){var n=sn();return ze(t,(function(t){n.set(t.W(),t)})),n}(t.w)),t.Ga.get(n)||null}function Ze(t,n){n.w&&(t.w=n.w.Nb()),t.Wc=n}function Qe(t,n){null!=(t=t.w)&&ze(t,(function(t){t instanceof Je&&t.bind(n)}))}function tr(t){Ke.call(this,t)}function nr(t){var n="";return t.forEach((function(e,r){n+=e.J.j()+" ",n+=1==e.order?"ASC":"DESC",r<t.length-1&&(n+=", ")})),n}function er(t,n){this.Ha=t,this.aa=n}function rr(t,n){this.global=t,this.Oa=t.b(bn),this.td=n.map((function(t){return t.context})),this.jf=n.map((function(t){return t.je})),this.Md=function(t){var n=jn();return t.forEach((function(t){t.da().forEach(n.add.bind(n))})),n}(this.jf),this.xe=function(t){return t.td.some((function(t){return!(t instanceof tr)}))?1:0}(this),this.Db=st()}function ir(t,n){rr.call(this,t,n),this.Ib=t.b(kn)}function or(t,n){this.c=t,this.Ib=t.b(kn),this.Ia=t.b(Sn),this.gd=new Bn(t),this.ib=n;var e=t.b(xn);t=this.ib.map((function(t){return e.table(t.getName())})),this.aa=jn(t),this.Db=st()}function sr(t){this.c=t,this.Oa=t.b(bn),this.Ia=t.b(Sn)}function ar(t,n){this.Ua=t,this.i=n,this.Za=sn()}function ur(t,n){var e=st(),r=t;return n.length&&(r=t.child(n)),r.once("value",(function(t){e.resolve(t.val())}),(function(t){e.reject(t)})),e.ha}function cr(t,n,e){function r(t){t?i.reject(t):i.resolve()}e=e||!1;var i=st();return e?t.set(n,r):t.update(n,r),i.ha}function hr(t,n,e){var r=t.Za.get(n);return null!=r?function(){var t={},n=st();return this.i.orderByChild("T").equalTo(r).once("value",(function(r){r.forEach((function(n){var r=e(n.val());t[parseInt(n.key(),10)]=r})),n.resolve(t)})),n.ha}.call(t).then(function(t){return t["@rev"]={R:++this.Sa},cr(this.i,t)}.bind(t)):et()}function lr(t,n,e){gn.call(this,n,e),this.i=t}function fr(){this.Ba=sn()}function pr(t,n){if(0==n.length)return un(t.Ba);var e=[];return n.forEach((function(t){null===(t=this.Ba.get(t)||null)||e.push(t)}),t),e}function dr(t,n){n.forEach((function(t){this.Ba.set(t.id(),t)}),t)}function yr(t,n){0==n.length||n.length==t.Ba.size?t.Ba.clear():n.forEach((function(t){this.Ba.delete(t)}),t)}function gr(t,n){this.g=t,this.Df=n,this.Kc=sn(),this.Sa=-1,this.M=sn(),this.Za=sn(),this.Jd=null}function mr(t){t.i.off(),t.i.on("child_removed",t.zg.bind(t)),t.Kd&&(t.Kd.off(),t.Kc.clear()),t.Kd=t.i.orderByChild("R").startAt(t.Sa+1),t.Kd.on("value",t.ee.bind(t))}function br(t,n){var e=st(),r=t.Za.get(n),i=t.g.table(n);return t.i.orderByChild("T").equalTo(r).once("value",function(t){var r=new fr,o=[];t.forEach((function(t){o.push(i.kb({id:parseInt(t.key(),10),value:t.val().P}))})),dr(r,o),this.M.set(n,r),e.resolve()}.bind(t)),e.ha}function vr(t,n,e,r){this.i=n,this.ja=e,this.Ua=t,this.Uc=r}function wr(t){return t instanceof ArrayBuffer?pn(t):t instanceof Date?t.getTime():t}function Er(t,n,e){return function(t,n,e,r){return new Z((function(t,i){var o;try{var s=this.ja.objectStore(n);o=s.openCursor()}catch(t){return void i(t)}o.onsuccess=function(){var n=o.result;n?(e(n),n.continue()):(r(s),t())},o.onerror=i}),t)}(t,n,t.Uc?function(t){var n,r=An(t.value),i=r.m;for(n in i){var o=ln(i[n]);e(o),i[n]=o.Ja()}t.update(r.Ja())}:function(t){var n=ln(t.value);e(n),t.update(n.Ja())},(function(){}))}function Sr(t,n){this.Z=t,this.Gb=n}function kr(t,n,e,r,i){gn.call(this,e,i),this.c=t,this.ja=n,this.Uc=r,this.ja.oncomplete=this.S.resolve.bind(this.S),this.ja.onabort=this.S.reject.bind(this.S)}function xr(t,n){this.c=t,this.g=n,this.Gd=n.ke.Sf||!1}function Nr(t,n){t.objectStoreNames.contains(n)||t.createObjectStore(n,{keyPath:"id"})}function Tr(t,n,e){gn.call(this,n,e),this.Z=t,0==n&&this.S.resolve()}function Cr(t){this.g=t,this.M=sn()}function $r(t,n){if(!t.M.has(n)){var e=new fr;t.M.set(n,e)}}function jr(t){Cr.call(this,t),this.pd=null}function Or(t,n,e){this.ja=t,this.A='"'+n+'"',this.Gb=e}function qr(t,n,e){gn.call(this,n,e),this.i=t,this.M=sn(),this.Nd=[]}function _r(t){return t.replace(".","__d__").replace("#","__s__")}function Ar(t,n,e,r){var i=st();return t.Nd.push({Ng:n,Dg:e,transform:r,S:i}),i.ha}function Ir(t,n,e){this.i=e,this.c=t,this.Ua=n}function Mr(t){return new qr(t.i,1,new oe(t.c,jn()))}function Rr(t,n,e){var r=Mr(t),i="UPDATE "+n+" SET value=? WHERE id=?";return t.ec(n).then((function(t){return t.forEach((function(t){t=e(t),Ar(r,i,[JSON.stringify(t.value),t.id])})),r.ka()}))}function Br(t){Ar(t,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],(function(t){for(var n=Array(t.rows.length),e=0;e<n.length;++e)n[e]=t.rows.item(e).tbl_name;return n}))}function Dr(t,n,e){this.c=t,this.g=n,this.Mg=e||1}function Pr(t){this.l=sn(),this.$b=sn(),t.oa().forEach((function(t){this.$b.set(t.getName(),jn())}),this)}function Wr(t,n){return n.map((function(t){return this.get(t)}),t)}function Lr(t,n,e){var r=0,i=t.length;for(e=e||Fr;r<i;){var o=r+i>>1;0>e(t[o],n)?r=o+1:i=o}return r==i&&t[r]==n?r:~r}function Fr(t,n){return t-n}function Ur(t,n,e){return 0>(e=Lr(t,n,e))&&(t.splice(-(e+1),0,n),!0)}function zr(t,n,e,r){return t=n?t.reverse():t,null==e&&null==r?t:0==(e=Math.min(s(e)?e:t.length,t.length))?[]:(r=Math.min(r||0,t.length),t.slice(r,r+e))}function Gr(){this.ia=0,this.Fc=null}function Hr(t,n,e,r){if(this.A=t,this.$=n,this.yf=e,this.za=new Gr,r){if(t=511,t*=t*t,r.length>=t)throw new Gn(6,t);r=function(t,n){for(var e=n.length,r=0,i=t=Vr(t);0<e;){var o=768<=e?511:257<=e&&511>=e?e:257,s=n.slice(r,r+o);t.a=s.map((function(t){return t.key})),t.B=s.map((function(t){return t.value})),r+=o,0<(e-=o)&&(ei(t,o=Vr(t.s)),t=o)}return i}(this,r),this.ua=r=ii(r)}else this.clear()}Ge.prototype.W=e("sa"),E(Je,Ge),(i=Je.prototype).Nb=function(){var t=new Je(this.J,this.value,this.F);t.cc=this.cc,t.vd(this.Wa);var n=this.W();return t.sa=n,t},i.lb=function(t){return null!=t?(t.push(this.J),t):[this.J]},i.u=function(t){return(t=null!=t?t:jn()).add(this.J.I()),t},i.vd=n("Wa"),i.eval=function(t){return Xe(this),"in"==this.F?function(t,n){var e=jn(t.value),r=function(t){return null!==t&&e.has(t)!=this.Wa}.bind(t);return new me(t=n.entries.filter((function(t){return r(Ce(t,this.J))}),t),n.u())}(this,t):new me(t.entries.filter((function(t){return this.vc(Ce(t,this.J),this.value)!=this.Wa}),this),t.u())},i.bind=function(t){if(this.cc instanceof Oe){var n=this.cc.Ca();if(t.length<=n)throw new Gn(510);this.value=t[n]}else"array"==u(this.cc)&&(this.value=this.cc.map((function(n){if(n instanceof Oe){var e=n.Ca();if(t.length<=e)throw new Gn(510);return t[n.Ca()]}return n})))},i.toString=function(){return"value_pred("+this.J.j()+" "+this.F+(this.Wa?"(complement)":"")+" "+this.value+")"},i.ld=function(){return Xe(this),null!==this.value&&("between"==this.F||"in"==this.F||"eq"==this.F||"gt"==this.F||"gte"==this.F||"lt"==this.F||"lte"==this.F)},i.we=function(){var t=null;if("between"==this.F)t=new ue(Ye(this,this.value[0]),Ye(this,this.value[1]),!1,!1);else{if("in"==this.F)return t=this.value.map((function(t){return new ue(t,t,!1,!1)})),new ge(this.Wa?function(t){if(0==t.length)return[];t.sort(ye);for(var n=Array(t.length+1),e=0;e<n.length;e++)n[e]=0==e?new ue(ce,t[e].from,!1,!0):e==n.length-1?new ue(t[e-1].o,ce,!0,!1):new ue(t[e-1].o,t[e].from,!0,!0);return n}(t):t);t=Ye(this,this.value),t="eq"==this.F?new ue(t,t,!1,!1):"gte"==this.F?new ue(t,ce,!1,!1):"gt"==this.F?new ue(t,ce,!0,!1):"lte"==this.F?new ue(ce,t,!1,!1):new ue(ce,t,!1,!0)}return new ge(this.Wa?function(t){if(fe(t))return[];var n=null,e=null;return t.from==ce||(n=new ue(ce,t.from,!1,!t.ea)),t.o==ce||(e=new ue(t.o,ce,!t.na,!1)),[n,e].filter((function(t){return null!==t}))}(t):[t])},Ke.prototype.bind=function(){return this},E(tr,Ke),tr.prototype.da=function(){return jn(this.from)},tr.prototype.clone=function(){var t=new tr(this.ba);return Ze(t,this),this.f&&(t.f=this.f.slice()),this.from&&(t.from=this.from.slice()),t.X=this.X,t.L=this.L,this.N&&(t.N=this.N.slice()),this.ra&&(t.ra=this.ra.slice()),this.Sb&&(t.Sb=this.Sb),this.Zb&&(t.Zb=this.Zb),t.eb=this.eb,t},tr.prototype.bind=function(t){return tr.hb.bind.call(this,t),null!=this.Sb&&(this.X=t[this.Sb.Ca()]),null!=this.Zb&&(this.L=t[this.Zb.Ca()]),Qe(this,t),this},er.prototype.bb=e("Ha"),er.prototype.da=e("aa"),(i=rr.prototype).exec=function(){var t=0==this.xe?void 0:new oe(this.global,this.Md),n=[],e=this.jf.slice(),r=this.td;return function i(){var o=e.shift();if(o){var s=r[n.length];return o.bb().exec(t,s).then((function(t){return n.push(t[0]),i()}))}return et()}().then(function(){return this.ja=this.Oa.Fb(this.xe,On(this.Md),t),this.ja.ka()}.bind(this)).then(function(){return this.ge(n),n}.bind(this),(function(n){throw null!=t&&t.Jb(),n}))},i.G=e("xe"),i.da=e("Md"),i.W=function(){return p(this)},i.ge=function(){},i.Y=function(){var t=null;return null!=this.ja&&(t=this.ja.Y()),null===t?new yn(!1,0,0,0,0):t},E(ir,rr),ir.prototype.getPriority=r(0),ir.prototype.ge=function(t){this.td.forEach((function(n,e){la(this.Ib,n,t[e])}),this)},(i=or.prototype).exec=function(){return this.gd.update(this.ib),this.Mc(),et()},i.G=r(1),i.da=e("aa"),i.W=function(){return p(this)},i.getPriority=r(1),i.Mc=function(){var t=ha(this.Ib,this.aa);0!=t.length&&(t=new ir(this.c,t),Zs(this.Ia,t))},sr.prototype.ee=function(t){t=new or(this.c,t),Zs(this.Ia,t)},w("lf.backstore.FirebaseRawBackStore",ar),ar.prototype.cd=e("i"),ar.prototype.dd=function(){throw new Gn(351)},ar.prototype.Ea=function(t){return ur(this.i,"@rev/R").then(function(t){return this.Sa=t,ur(this.i,"@table")}.bind(this)).then(function(n){var e,r=0;for(e in n)this.Za.set(e,n[e]),n[e]>r&&(r=n[e]);return t.oa().forEach((function(t){this.Za.has(t.getName())||(n[t.getName()]=++r)}),this),cr(e=this.i.child("@table"),n)}.bind(this))},ar.prototype.tc=function(t){return hr(this,t,r(null)).then(function(){return this.Za.delete(t),cr(this.i.child("@table/"+t),null,!0)}.bind(this))},ar.prototype.dropTable=ar.prototype.tc,ar.prototype.qc=function(t,n,e){return hr(this,t,function(t){var r=t.P;return r[n]=e,{R:this.Sa+1,T:t.T,P:r}}.bind(this))},ar.prototype.addTableColumn=ar.prototype.qc,ar.prototype.uc=function(t,n){return hr(this,t,function(t){var e=t.P;return delete e[n],{R:this.Sa+1,T:t.T,P:e}}.bind(this))},ar.prototype.dropTableColumn=ar.prototype.uc,ar.prototype.Lc=function(t,n,e){return hr(this,t,function(t){var r=t.P;return r[e]=r[n],delete r[n],{R:this.Sa+1,T:t.T,P:r}}.bind(this))},ar.prototype.renameTableColumn=ar.prototype.Lc,ar.prototype.xb=function(){throw new Gn(351)},ar.prototype.createRow=ar.prototype.xb,ar.prototype.Cc=e("Ua"),ar.prototype.getVersion=ar.prototype.Cc,ar.prototype.ec=function(t){var n=st();return t=this.Za.get(t),this.i.orderByChild("T").equalTo(t).once("value",(function(t){var e=[];t.forEach((function(t){e.push(t.val().P)})),n.resolve(e)})),n.ha},ar.prototype.dump=function(){var t={};return ot(an(this.Za).map(function(n){return this.ec(n).then((function(e){t[n]=e}))}.bind(this))).then((function(){return t}))},ar.prototype.dump=ar.prototype.dump,E(lr,gn),lr.prototype.I=function(t){return this.i.Ac(t)},lr.prototype.sc=function(){if(0==this.yd)return this.S.resolve(),this.S.ha;var t=this.Ra.ib;if(0==t.size)this.S.resolve();else{var n=this.i.Sa+1;this.i.Sa=n;var e={"@rev":{R:n}};t.forEach((function(t,r){var i=this.i.Za.get(r);t.wa.forEach((function(t,r){e[r]={R:n,T:i,P:t.m}})),t.la.forEach((function(t,r){e[r]={R:n,T:i,P:t[1].m}})),t.xa.forEach((function(t,n){e[n]=null}))}),this),this.i.i.update(e,function(e){null===e?this.S.resolve():(this.i.Sa=n-1,ot(e=un(t).map((function(t){return br(this.i,t.getName())}),this)).then(this.S.reject.bind(this.S),this.S.reject.bind(this.S)))}.bind(this))}return this.S.ha},fr.prototype.getData=e("Ba"),fr.prototype.get=function(t){return et(pr(this,t))},fr.prototype.put=function(t){return dr(this,t),et()},fr.prototype.remove=function(t){return yr(this,t),et()},(i=gr.prototype).Ea=function(t){this.i=this.Df.child(this.g.name());var n=t||function(){return et()};return ur(this.i,"@db/version").then(function(t){return null===t?cr(this.i,function(t){var n={};return n["@db"]={version:t.g.version()},n["@rev"]={R:1},t.Sa=1,n["@table"]={},t.g.oa().forEach((function(t,e){t=t.getName(),n["@table"][t]=e,this.M.set(t,new fr),this.Za.set(t,e)}),t),n}(this),!0).then(function(){var t=new ar(0,this.i);return n(t)}.bind(this)).then(function(){return this.Ea()}.bind(this)):t==this.g.version()?ur(this.i,"@rev/R").then(function(t){return this.Sa=t,ur(this.i,"@table")}.bind(this)).then(function(t){for(var n in t)this.Za.set(n,t[n]);return ot(t=this.g.oa().map((function(t){return br(this,t.getName())}),this))}.bind(this)).then(function(){return function(t){hn=un(t.M).map((function(t){return function(t){return 0==t.Ba.size?0:an(t.Ba).reduce((function(t,n){return t>n?t:n}),0)}(t)})).reduce((function(t,n){return t>n?t:n}),0)+1}(this),mr(this),et()}.bind(this)):this.he(t,n).then(function(){return this.Ea()}.bind(this))}.bind(this))},i.he=function(t,n){var e=new ar(t,this.i);return e.Ea(this.g).then(function(){return et()}.bind(this)).then((function(){return n(e)})).then(function(){return cr(this.i.child("@db"),{version:this.g.version()},!0)}.bind(this))},i.zg=function(t){var n=t.val(),e=this.Kc.get(n.T)||null;null===e&&(e=jn(),this.Kc.set(n.T,e)),e.add(parseInt(t.key(),10))},i.ee=function(t){var n=t.child("@rev/R").val();null!=n&&n!=this.Sa&&(this.Sa=n,(t=function(t,n){var e=jn(),r=sn();return t.Za.forEach(function(t,n){var i=this.M.get(n),o=new ie(n);this.Kc.has(t)&&((n=On(this.Kc.get(t))).forEach((function(t){e.add(t)})),pr(i,n).forEach((function(t){o.delete(t)}))),r.set(t,o)}.bind(t)),n.forEach(function(t){if("@rev"!=t.key()){var n=parseInt(t.key(),10);if(!e.has(n)){var i=t.val();t=r.get(i.T);var o=this.M.get(t.getName());i=this.g.table(t.getName()).kb({id:n,value:i.P});o.getData().has(n)?t.modify([pr(o,[n])[0],i]):t.add(i)}}}.bind(t)),un(r).filter((function(t){return!t.jd()}))}(this,t)).forEach((function(t){var n=this.M.get(t.getName()),e=an(t.xa);0<e.length&&yr(n,e);var r=un(t.wa);t.la.forEach((function(t){r.push(t[1])})),dr(n,r)}),this),0<t.length&&this.Gc(t),mr(this))},i.Fb=function(t,n,e){return new lr(this,t,e)},i.Ac=function(t){var n=this.M.get(t)||null;if(null!==n)return n;throw new Gn(101,t)},i.close=function(){},i.subscribe=n("Jd"),i.Gc=function(t){null!=this.Jd&&this.Jd(t)},w("lf.backstore.IndexedDBRawBackStore",vr),vr.prototype.cd=e("i"),vr.prototype.getRawDBInstance=vr.prototype.cd,vr.prototype.dd=e("ja"),vr.prototype.getRawTransaction=vr.prototype.dd,vr.prototype.tc=function(t){return new Z((function(n,e){try{this.i.deleteObjectStore(t)}catch(t){return void e(t)}n()}),this)},vr.prototype.dropTable=vr.prototype.tc,vr.prototype.qc=function(t,n,e){var r=wr(e);return Er(this,t,(function(t){t.m[n]=r}))},vr.prototype.addTableColumn=vr.prototype.qc,vr.prototype.uc=function(t,n){return Er(this,t,(function(t){delete t.m[n]}))},vr.prototype.dropTableColumn=vr.prototype.uc,vr.prototype.Lc=function(t,n,e){return Er(this,t,(function(t){t.m[e]=t.m[n],delete t.m[n]}))},vr.prototype.renameTableColumn=vr.prototype.Lc,vr.prototype.xb=function(t){var n,e={};for(n in t)e[n]=wr(t[n]);return fn(e)},vr.prototype.createRow=vr.prototype.xb,vr.prototype.Cc=e("Ua"),vr.prototype.getVersion=vr.prototype.Cc,vr.prototype.dump=function(){for(var t=this.i.objectStoreNames,n=[],e=0;e<t.length;++e){var r=t.item(e);n.push(this.ec(r))}return ot(n).then((function(n){var e={};return n.forEach((function(n,r){e[t.item(r)]=n})),e}))},vr.prototype.dump=vr.prototype.dump,vr.prototype.ec=function(t){return function(t,n){var e=[];return new Z((function(t,r){var i;try{i=this.ja.objectStore(n).openCursor()}catch(t){return void r(t)}i.onsuccess=function(){var n=i.result;if(n){if(this.Uc){var r,o=An(n.value).m;for(r in o)e.push(o[r])}else e.push(n.value);n.continue()}else t(e)}.bind(this),i.onerror=r}),t)}(this,t).then((function(t){return t.map((function(t){return t.value}))}))},Sr.prototype.get=function(t){return 0==t.length?null!=this.Z.getAll?function(t){return new Z((function(t,n){var e;try{e=this.Z.getAll()}catch(t){return void n(t)}e.onerror=n,e.onsuccess=function(){var n=e.result.map((function(t){return this.Gb(t)}),this);t(n)}.bind(this)}),t)}(this):function(t){return new Z((function(t,n){var e,r=[];try{e=this.Z.openCursor()}catch(t){return void n(t)}e.onerror=n,e.onsuccess=function(){var n=e.result;n?(r.push(this.Gb(n.value)),n.continue()):t(r)}.bind(this)}),t)}(this):ot(t=t.map((function(t){return new Z((function(n,e){var r;try{r=this.Z.get(t)}catch(t){return void e(t)}r.onerror=e,r.onsuccess=function(t){n(this.Gb(t.target.result))}.bind(this)}),this)}),this))},Sr.prototype.Tb=function(t){return new Z((function(n,e){var r;try{r=t()}catch(t){return void e(t)}r.onsuccess=n,r.onerror=e}),this)},Sr.prototype.put=function(t){return 0==t.length?et():ot(t=t.map((function(t){return this.Tb(function(){return this.Z.put(t.Ja())}.bind(this))}),this))},Sr.prototype.remove=function(t){return new Z((function(n,e){var r=this.Z.count();r.onsuccess=function(r){if(0==t.length||r.target.result==t.length)return this.Tb(function(){return this.Z.clear()}.bind(this)).then(n,e);ot(r=t.map((function(t){return this.Tb(function(){return this.Z.delete(t)}.bind(this))}),this)).then(n,e)}.bind(this),r.onerror=e}),this)},E(kr,gn),kr.prototype.I=function(t,n,e){return this.Uc?(e=null!=e?e:0,new In(t=this.ja.objectStore(t),n,0==e?v(Mn,this.c):Rn)):new Sr(this.ja.objectStore(t),n)},kr.prototype.sc=function(){return this.S.ha},(i=xr.prototype).Ea=function(t){var n=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==n)throw new Gn(352);var e=t||function(){return et()};return new Z((function(t,r){var i;try{i=n.open(this.g.name(),this.g.version())}catch(t){return void r(t)}i.onerror=function(t){t=t.target.error,r(new Gn(361,t.name,t.message))},i.onupgradeneeded=function(t){(function(t,n,e){var r=e.target.result;return e=new vr(e.oldVersion,r,e.target.transaction,t.Gd),function(t){for(var n=[],e=0;e<t.objectStoreNames.length;++e){var r=t.objectStoreNames.item(e);-1!=r.indexOf(".")&&n.push(r)}n.forEach((function(n){try{t.deleteObjectStore(n)}catch(t){}}))}(r),t.g.oa().forEach(v(t.Lf,r),t),n(e)})(this,e,t).then((function(){}),r)}.bind(this),i.onsuccess=function(n){this.i=n.target.result,this.qe().then(function(n){hn=Math.max(hn,n+1),t(this.i)}.bind(this))}.bind(this)}),this)},i.Lf=function(t,n){t.objectStoreNames.contains(n.getName())||t.createObjectStore(n.getName(),{keyPath:"id"}),n.Cb()&&(n.Da().forEach((function(n){Nr(t,n.j())}),this),Nr(t,Ui(n)))},i.Fb=function(t,n,e){return n=this.i.transaction(function(t){var n=jn();return t.forEach((function(t){n.add(t.getName()),t.Cb()&&(t.Da().forEach((function(t){n.add(t.j())})),n.add(Ui(t)))})),On(n)}(n),0==t?"readonly":"readwrite"),new kr(this.c,n,t,this.Gd,e)},i.qe=function(t){function n(){return 0==r.length?et():e(r.shift()).then(n)}function e(n){return new Z((function(e,r){var a;try{a=(t||i.transaction([n])).objectStore(n).openCursor(null,"prev")}catch(t){return void r(t)}a.onsuccess=function(t){(t=t.target.result)&&(o=Math.max(o,s(t))),e(o)},a.onerror=function(){e(o)}}))}var r=this.g.oa().map((function(t){return t.getName()})),i=this.i,o=0,s=function(t){return this.Gd?(t=An(t.value),Object.keys(t.m).reduce((function(t,n){return Math.max(t,n)}),0)):t.key}.bind(this);return new Z((function(t){n().then((function(){t(o)}))}))},i.close=function(){this.i.close()},i.Ac=function(){throw new Gn(511)},i.subscribe=function(){},i.Gc=function(){},E(Tr,gn),Tr.prototype.I=function(t){return this.Z.Ac(t)},Tr.prototype.sc=function(){return this.S.resolve(),this.S.ha},(i=Cr.prototype).Ea=function(){return this.g.oa().forEach(this.gg,this),et()},i.Ac=function(t){var n=this.M.get(t)||null;if(null===n)throw new Gn(101,t);return n},i.Fb=function(t,n,e){return new Tr(this,t,e)},i.gg=function(t){$r(this,t.getName()),t.Cb()&&(t.Da().forEach((function(t){$r(this,t.j())}),this),$r(this,Ui(t)))},i.close=function(){},i.subscribe=function(){},i.Gc=function(){},E(jr,Cr),jr.prototype.subscribe=function(t){null===this.pd&&(this.pd=t)},jr.prototype.Gc=function(t){null===this.pd||this.pd(t)},Or.prototype.get=function(t){var n=this.Gb;return Ar(this.ja,"SELECT id, value FROM "+this.A+" "+(0==t.length?"":"WHERE id IN ("+t.join(",")+")"),[],(function(t){for(var e=t.rows.length,r=Array(e),i=0;i<e;++i)r[i]=n({id:t.rows.item(i).id,value:JSON.parse(t.rows.item(i).value)});return r}))},Or.prototype.put=function(t){if(0==t.length)return et();var n="INSERT OR REPLACE INTO "+this.A+"(id, value) VALUES (?, ?)";return t.forEach((function(t){Ar(this.ja,n,[t.id(),JSON.stringify(t.m)])}),this),et()},Or.prototype.remove=function(t){return Ar(this.ja,"DELETE FROM "+this.A+" "+(0==t.length?"":"WHERE id IN ("+t.join(",")+")"),[]),et()},E(qr,gn),qr.prototype.I=function(t,n){var e=this.M.get(t)||null;return null===e&&(e=new Or(this,_r(t),n),this.M.set(t,e)),e},qr.prototype.sc=function(){var t=null,n=this.S.reject.bind(this.S),e=function(t,n){this.S.reject(n)}.bind(this),r=[],i=function(n,o){if(null!==t){var s=o;null!=t.transform&&null!=o&&(s=t.transform(o)),r.push(s),t.S.resolve(s)}0<this.Nd.length?(t=o=this.Nd.shift(),n.executeSql(o.Ng,o.Dg,i,e)):this.S.resolve(r)}.bind(this);return 0==this.yd?this.i.readTransaction(i,n):this.i.transaction(i,n),this.S.ha},w("lf.backstore.WebSqlRawBackStore",Ir),Ir.prototype.cd=e("i"),Ir.prototype.getRawDBInstance=Ir.prototype.cd,Ir.prototype.dd=function(){throw new Gn(356)},Ir.prototype.getRawTransaction=Ir.prototype.dd,Ir.prototype.tc=function(t){var n=Mr(this);return Ar(n,"DROP TABLE "+t,[]),n.ka()},Ir.prototype.dropTable=Ir.prototype.tc,Ir.prototype.ec=function(t){var n=Mr(this);return Ar(n,"SELECT id, value FROM "+t,[]),n.ka().then((function(t){for(var n=t[0].rows.length,e=Array(n),r=0;r<n;++r)e[r]={id:t[0].rows.item(r).id,value:JSON.parse(t[0].rows.item(r).value)};return et(e)}))},Ir.prototype.qc=function(t,n,e){var r=wr(e);return Rr(this,t,(function(t){return t.value[n]=r,t}))},Ir.prototype.addTableColumn=Ir.prototype.qc,Ir.prototype.uc=function(t,n){return Rr(this,t,(function(t){return delete t.value[n],t}))},Ir.prototype.dropTableColumn=Ir.prototype.uc,Ir.prototype.Lc=function(t,n,e){return Rr(this,t,(function(t){return t.value[e]=t.value[n],delete t.value[n],t}))},Ir.prototype.renameTableColumn=Ir.prototype.Lc,Ir.prototype.xb=function(t){var n,e={};for(n in t)e[n]=wr(t[n]);return fn(e)},Ir.prototype.createRow=Ir.prototype.xb,Ir.prototype.Cc=e("Ua"),Ir.prototype.getVersion=Ir.prototype.Cc,Ir.prototype.dump=function(){var t=st(),n=Mr(this);Br(n);var e={};return n.ka().then(function(n){ot(n=n[0].filter((function(t){return"__lf_ver"!=t&&"__WebKitDatabaseInfoTable__"!=t})).map((function(t){return this.ec(t).then((function(n){e[t]=n}))}),this)).then((function(){t.resolve(e)}))}.bind(this)),t.ha},Ir.prototype.dump=Ir.prototype.dump,(i=Dr.prototype).Ea=function(t){if(null==window.openDatabase)throw new Gn(353);var n=t||function(){return et()};return new Z((function(t,e){var r=window.openDatabase(this.g.name(),"",this.g.name(),this.Mg);if(null==r)throw new Gn(354);this.i=r,function(t,n){var e=st(),r=new qr(t.i,1,new oe(t.c,jn()));return Ar(r,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]),Ar(r,"SELECT v FROM __lf_ver WHERE id = 0",[]),r.ka().then(function(t){var r=0;t[1].rows.length&&(r=t[1].rows.item(0).v),r<this.g.version()?this.he(n,r).then(e.resolve.bind(e)):r>this.g.version()?e.reject(new Gn(108)):e.resolve()}.bind(t),e.reject.bind(e)),e.ha}(this,n).then(function(){this.qe().then(t,e)}.bind(this),(function(t){if(t instanceof Gn)throw t;throw new Gn(354,t.message)}))}),this)},i.Fb=function(t,n,e){if(null!=this.i)return new qr(this.i,t,e);throw new Gn(2)},i.close=function(){},i.Ac=function(){throw new Gn(512)},i.subscribe=function(){throw new Gn(355)},i.Gc=function(){throw new Gn(355)},i.he=function(t,n){return function(t){var n=t.g.oa(),e=new qr(t.i,1,new oe(t.c,jn())),r=new qr(t.i,1,new oe(t.c,jn()));return Ar(e,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[t.g.version()]),Br(e),e.ka().then((function(t){var e=t[1];e.filter((function(t){return-1!=t.indexOf("__d__")})).forEach((function(t){Ar(r,'DROP TABLE "'+t+'"',[])}));var i=[],o=[];return n.map((function(t){-1==e.indexOf(t.getName())&&i.push(t.getName()),t.Cb&&(t.Da().forEach((function(t){t=_r(t.j()),i.push(t)})),t=_r(Ui(t)),i.push(t),o.push(t))})),i.forEach((function(t){Ar(r,'CREATE TABLE "'+t+'"(id INTEGER PRIMARY KEY, value TEXT)',[])})),r.ka()}))}(this).then(function(){return t(new Ir(this.c,n,this.i))}.bind(this))},i.qe=function(){var t=0,n=st(),e=function(n){var e=new qr(this.i,0);return Ar(e,'SELECT MAX(id) FROM "'+n+'"',[]),e.ka().then((function(n){n=n[0].rows.item(0)["MAX(id)"],t=Math.max(n,t)}))}.bind(this);return ot(this.g.oa().map((function(t){return e(t.getName())}))).then((function(){hn=Math.max(hn,t+1),n.resolve()}),(function(t){n.reject(t)})),n.ha},(i=Pr.prototype).set=function(t,n){this.l.set(n.id(),n),this.$b.get(t).add(n.id())},i.Wb=function(t,n){var e=this.$b.get(t);n.forEach((function(t){this.l.set(t.id(),t),e.add(t.id())}),this)},i.get=function(t){return this.l.get(t)||null},i.Va=function(t,n,e){var r=[],i=Math.min(n,e),o=Math.max(n,e);if((t=this.$b.get(t)).size<o-i)t.forEach((function(t){t>=i&&t<=o&&(t=this.l.get(t),r.push(t))}),this);else for(n=i;n<=o;++n)t.has(n)&&(e=this.l.get(n),r.push(e));return r},i.remove=function(t,n){this.l.delete(n),this.$b.get(t).delete(n)},i.zc=function(t){return null!=t?this.$b.get(t).size:this.l.size},i.clear=function(){this.l.clear(),this.$b.clear()},Gr.prototype.add=function(t,n){this.ia+=n,this.Fc=null===this.Fc||t>this.Fc?t:this.Fc},Gr.prototype.remove=function(t,n){this.ia-=n},Gr.prototype.clear=function(){this.ia=0};var Jr=[];function Xr(t,n,e){if(!t.$.Od(n.a[e])){if(!(1<n.a[e].length))return null;if(null===n.a[e][0])return null}return[n.a[e],t.yf?[n.B[e]]:n.B[e]]}function Yr(t,n,e,r){return r=function(t,n){var e=n.Y();t=t.map((function(t){var r=new Kr(t.id(),n);return r.a=t.m[0],r.B=t.m[1],r.a.forEach((function(t,i){e.add(t,n.Ma()?1:r.B[i].length)})),r}));for(var r=0;r<t.length-1;++r)ei(t[r],t[r+1]);return 1<t.length?ii(t[0]):t[0]}(r,t=new Hr(n,t,e)),t.ua=r,t}function Kr(t,n){this.sa=t,this.s=n,this.mb=0,this.ya=this.qb=this.D=null,this.a=[],this.B=[],this.h=[],this.Yf=1==n.jb().Zd()?this.Pe:this.Oe}function Vr(t){return new Kr(hn++,t)}function Zr(t){return 0==t.mb}function Qr(t){function n(t){return null!=t?t.sa.toString():"_"}var e=t.sa+"["+t.a.join("|")+"]",r=t.h.map((function(t){return t.sa})).join("|"),i=t.B.join("/"),o=n(t.qb)+"{";o=(o=Zr(t)?o+i:o+r)+"}"+n(t.D);return t.ya&&(e=e+"  "+(t=Qr(t.ya))[0],o=o+"  "+t[1]),[e,o]}function ti(t){return Zr(t)?t:ti(t.h[0])}function ni(t){return Zr(t)?t:ni(t.h[t.h.length-1])}function ei(t,n){n&&(n.qb=t),t&&(t.ya=n)}function ri(t){var n=t[0],e=Vr(n.s);for(e.mb=n.mb+1,e.h=t,n=0;n<t.length;++n)t[n].D=e,0<n&&e.a.push(t[n].a[0]);return e}function ii(t){var n=t,e=[];do{e.push(n),n=n.ya}while(n);if(512>=e.length)n=ri(e);else{var r=e.length,i=0;for((n=Vr(t.s)).mb=t.mb+2;0<r;){t=768<=r?511:257<=r&&511>=r?r:257;var o=e.slice(i,i+t),s=ri(o);s.D=n,n.h.length&&(n.a.push(o[0].a[0]),ei(n.h[n.h.length-1],s)),n.h.push(s),i+=t,r-=t}}return n}function oi(t){return Zr(t)?t.a[0]:oi(t.h[0])}function si(t){t.a=[];for(var n=1;n<t.h.length;++n)t.a.push(oi(t.h[n]))}function ai(t,n,e,r){var i=ui(t,n),o=Zr(t);if(o){if(!t.s.Qa(t.a[i],n))return!1}else{var a=t.s.Qa(t.a[i],n)?i+1:i;if(!ai(t.h[a],n,a,r))return!1;si(t)}if(t.a.length>i&&t.s.Qa(t.a[i],n)){if(s(r)&&!t.s.Ma()&&o&&(0>(r=Lr(a=t.B[i],r,void 0))?r=!1:(a.splice(r,1),r=!0),r&&t.s.Y().remove(n,1),t.B[i].length))return!1;t.a.splice(i,1),o&&(o=t.s.Ma()?1:t.B[i].length,t.B.splice(i,1),t.s.Y().remove(n,o))}if(256>t.a.length&&null!==t.D){t:{if(t.ya&&256<t.ya.a.length)n=t.ya,i=r=0,o=t.a.length+1;else{if(!(t.qb&&256<t.qb.a.length)){n=!1;break t}n=t.qb,r=t.qb.a.length-1,i=Zr(t)?r:r+1,o=0}t.a.splice(o,0,n.a[r]),n.a.splice(r,1),r=Zr(t)?t.B:t.h,Zr(t)?a=n.B:(a=n.h)[i].D=t,r.splice(o,0,a[i]),a.splice(i,1),Zr(n)||(si(n),si(t)),n=!0}n||function(t,n){var e,r,i;t.ya&&511>t.ya.a.length?(e=t.ya,i=r=0):t.qb&&(e=t.qb,r=e.a.length,i=Zr(e)?e.B.length:e.h.length),r=[r,0].concat(t.a),Array.prototype.splice.apply(e.a,r),r=null,Zr(t)?r=t.B:(r=t.h).forEach((function(t){t.D=e})),r=[i,0].concat(r),Array.prototype.splice.apply(Zr(e)?e.B:e.h,r),ei(t.qb,t.ya),Zr(e)||si(e),-1!=n&&(t.D.a.splice(n,1),t.D.h.splice(n,1))}(t,e)}return!0}function ui(t,n){for(var e=0,r=t.a.length,i=t.s.jb();e<r;){var o=e+r>>1;-1==i.compare(t.a[o],n)?e=o+1:r=o}return e}function ci(t,n,e,r){if(t.s.Ma())!n.reverse&&n.L?n.L--:e[n.count++]=t.B[r];else for(var i=0;i<t.B[r].length&&n.count<e.length;++i)!n.reverse&&n.L?n.L--:e[n.count++]=t.B[r][i]}function hi(t){this.Xc=0==t?fi:li,this.ce=0==t?function(t){return null!=t?t.reverse():null}:function(t){return t||null},this.ie=0==t?di:pi}function li(t,n){return t>n?1:t<n?-1:0}function fi(t,n){return li(n,t)}function pi(t,n){return ye(t,n)}function di(t,n){return ye(n,t)}function yi(t){hi.call(this,t),this.Xc=0==t?mi:gi}function gi(t,n){return null===t?null===n?0:-1:null===n?1:li(t,n)}function mi(t,n){return gi(n,t)}function bi(t){this.pa=t.map((function(t){return new hi(t)}))}function vi(t,n,e,r){for(var i=0,o=0;o<t.pa.length&&0==i;++o)i=r(t.pa[o],n[o],e[o]);return i}function wi(t){bi.call(this,t),this.pa=t.map((function(t){return new yi(t)}))}function Ei(t){if(1==t.f.length)return new hi(t.f[0].order);var n=t.f.map((function(t){return t.order}));return t.f.some((function(t){return t.ba.hc()}))?new wi(n):new bi(n)}function Si(t){this.fa=t,this.ob=jn(),this.Oc=new Gr,this.za=new Gr}function ki(t){this.A=t,this.sb=jn(),this.$=new hi(1)}function xi(t){this.Oa=t.b(bn),this.C=t.b(wn),this.V=t.b(vn)}function Ni(){this.Z=sn(),this.lc=sn()}function Ti(t,n){var e=[],r=null,i=null;return ze(t,(function(t){var o=n(t);null==t.getParent()?i=o:Fe(r,o);var s=t.getParent();null!==s&&Pe(s).length==Pe(r).length&&(-1!=(s=e.indexOf(r))&&e.splice(s,1)),1<Pe(t).length&&e.push(o),r=null===t.h?e[e.length-1]:o})),i}function Ci(t){var n=t.getParent(),e=0;null!==n&&(e=Pe(n).indexOf(t),n.removeChild(t));var r=Pe(t).slice();return r.forEach((function(r,i){t.removeChild(r),null===n||Le(n,r,e+i)})),{parent:n,children:r}}function $i(t){var n=We(t,0);return Ci(t),function(t,n){Pe(t).slice().forEach((function(e){t.removeChild(e),Fe(n,e)})),Fe(t,n)}(n,t),n}function ji(t,n,e,r){var i=t.getParent();return null!==i&&(Ue(i,t=Pe(i).indexOf(t)),Le(i,e,t)),Pe(n).slice().forEach((function(t){n.removeChild(t),Fe(r,t)})),e}function Oi(t,n,e){var r=[];return function t(i){n(i)&&r.push(i),null!=e&&e(i)||Pe(i).forEach(t)}(t),r}function qi(t){Ge.call(this),this.pb=t,this.Wa=!1}function _i(t,n,e){Ge.call(this),this.ga=t,this.ma=n,this.F=e,this.de=null,t=_e(),this.vc=Ae(t,this.ga.G(),this.F),this.ng=t.Ze.get(this.ga.G())||null}function Ai(t,n,e){var r;if(-1!=n.u().indexOf(Fi(t.ga.I()))?(r=n,n=e):r=e,r.entries.length>n.entries.length){t:{switch(e=t.ga,t.ga=t.ma,t.ma=e,t.F){case"gt":e="lt";break;case"lt":e="gt";break;case"gte":e="lte";break;case"lte":e="gte";break;default:break t}t.F=e,t.vc=Ae(_e(),t.ga.G(),t.F)}return[n,r]}return[r,n]}function Ii(t,n,e){return null===t.de&&(t.de=function(t){var n={};return t.lb().forEach((function(t){n[t.getName()]=null})),n}(t.ma.I())),je(n,e,new xe(new cn(-1,t.de),!1),[Fi(t.ma.I())])}function Mi(t,n,e,r){var i=[n,e];r||(i=Ai(t,n,e)),n=i[0],e=i[1];i=n;var o=e,s=t.ga,a=t.ma;r&&(i=e,o=n,s=t.ma,a=t.ga);var u=new Hn,c=[];i.entries.forEach((function(t){var n=String(Ce(t,s));u.set(n,t)}));var h=i.u(),l=o.u();return o.entries.forEach(function(t){var n=Ce(t,a),e=String(n);null!==n&&u.has(e)?u.get(e).forEach((function(n){n=je(t,l,n,h),c.push(n)})):r&&c.push(Ii(this,t,l))}.bind(t)),t=n.u().concat(e.u()),new me(c,t)}function Ri(t,n,e,r,i){function o(t,n){n=new xe(n,1<h.length),t=je(t,l,n,h),c.push(t)}var s=r.dg.I(),a=n,u=e;-1!=n.u().indexOf(Fi(s))&&(a=e,u=n);var c=[],h=u.u(),l=a.u();return a.entries.forEach((function(t){var n=this.ng(Ce(t,r.wg));0!=(n=r.index.get(n)).length&&(r.index.Ma()?o(t,i.get(n[0])):Wr(i,n).forEach(o.bind(null,t)))}),t),t=a.u().concat(u.u()),new me(c,t)}function Bi(t,n,e){return null===n?new Je(t,n,e):s(n.j)?new _i(t,n,e):new Je(t,n,e)}(i=Hr.prototype).getName=e("A"),i.toString=function(){return this.ua.toString()},i.add=function(t,n){this.ua=this.ua.Ab(t,n)},i.set=function(t,n){this.ua=this.ua.Ab(t,n,!0)},i.remove=function(t,n){this.ua=this.ua.remove(t,n)},i.get=function(t){return this.ua.get(t)},i.Zc=function(t){if(null==t)return this.Y().ia;if(t instanceof ue){if(fe(t))return this.Y().ia;if(pe(t))return this.get(t.from).length}return this.Va([t]).length},i.Y=e("za"),i.Vd=function(t,n,e,r){return e=Array(t),this.ua.fill({offset:n?this.za.ia-t-r:r,count:t,te:0},e),n?e.reverse():e},i.Va=function(t,n,e,r){var i=ti(this.ua).a[0];if(!s(i)||0==e)return Jr;n=n||!1,e=null!=e?Math.min(e,this.za.ia):this.za.ia,r=r||0;var o=Math.min(Math.max(this.za.ia-r,0),e);if(0==o)return Jr;if(!s(t)||1==t.length&&t[0]instanceof ue&&fe(t[0]))return this.Vd(o,n,e,r);t=this.$.uf(t);var a=Array(n?this.za.ia:o),u={count:0,X:a.length,reverse:n,L:r},c=1<this.jb().Zd();return t.forEach((function(t){for(var n=this.$.ud(t),e=(n=this.$.Xd(t)?i:n[0],n=this.ua.Yf(n),0);null!=n&&u.count<u.X;){if(c){for(var r=n,o=t,s=u,h=a,l=r.s.jb(),f=-1,p=0;p<r.a.length;++p)if(l.Bb(r.a[p],o)){f=p;break}if(-1!=f)for(p=f;p<r.a.length&&s.count<s.X;++p)l.Bb(r.a[p],o)&&ci(r,s,h,p)}else n.Va(t,u,a);0!=u.L||n.kd(t)?e=0:e++,n=2==e?null:n.next()}}),this),a.length>u.count&&a.splice(u.count,a.length-u.count),n?zr(a,n,e,r):a},i.clear=function(){this.ua=Vr(this),this.za.clear()},i.Pa=function(t){return this.ua.Pa(t)},i.min=function(){return this.Hb(this.$.min.bind(this.$))},i.max=function(){return this.Hb(this.$.max.bind(this.$))},i.Hb=function(t){var n;t:{n=ti(this.ua);var e=0;do{if(e>=n.a.length)n=n.ya,e=0;else{var r=Xr(this,n,e);if(null!==r){n=r;break t}e++}}while(null!==n);n=null}t:{r=(e=ni(this.ua)).a.length-1;do{if(0>r)e=e.qb,r=0;else{var i=Xr(this,e,r);if(null!==i){e=i;break t}r--}}while(null!==e);e=null}return null===n||null===e?null:1==t(n[0],e[0])?n:e},i.Ma=e("yf"),i.jb=e("$"),i.Qa=function(t,n){return null!=t&&0==this.$.compare(t,n)},i.Ja=function(){for(var t=[],n=ti(this.ua);n;)t.push(new cn(n.sa,[n.a,n.B])),n=n.ya;return t},(i=Kr.prototype).next=e("ya"),i.toString=function(){var t="",n=Qr(this);t=t+(n[0]+"\n")+n[1]+"\n";return this.h.length&&(t+=this.h[0].toString()),t},i.get=function(t){var n=ui(this,t);if(Zr(this)){var e=Jr;return this.s.Qa(this.a[n],t)&&(e=e.concat(this.B[n])),e}return n=this.s.Qa(this.a[n],t)?n+1:n,this.h[n].get(t)},i.Pa=function(t){var n=ui(this,t);return!!this.s.Qa(this.a[n],t)||!Zr(this)&&this.h[n].Pa(t)},i.remove=function(t,n){return ai(this,t,-1,n),null===this.D?(t=this,1==this.h.length&&((t=this.h[0]).D=null),t):this},i.Ab=function(t,n,e){var r=ui(this,t);if(Zr(this)){if(this.s.Qa(this.a[r],t)){if(e)this.s.Y().remove(t,this.s.Ma()?1:this.B[r].length),this.B[r]=this.s.Ma()?n:[n];else{if(this.s.Ma())throw new Gn(201,this.s.getName(),JSON.stringify(t));if(!Ur(this.B[r],n))throw new Gn(109)}return this.s.Y().add(t,1),this}return this.a.splice(r,0,t),this.B.splice(r,0,this.s.Ma()?n:[n]),this.s.Y().add(t,1),512==this.a.length?(r=Vr(this.s),(t=Vr(this.s)).mb=1,t.a=[this.a[256]],t.h=[this,r],t.D=this.D,this.D=t,r.a=this.a.splice(256),r.B=this.B.splice(256),r.D=t,ei(r,this.ya),ei(this,r),r=t):r=this,r}return r=this.s.Qa(this.a[r],t)?r+1:r,Zr(t=this.h[r].Ab(t,n,e))||1!=t.a.length||(this.a.splice(r,0,t.a[0]),t.h[1].D=this,t.h[0].D=this,this.h.splice(r,1,t.h[1]),this.h.splice(r,0,t.h[0])),512==this.a.length?function(t){var n=Vr(t.s),e=Vr(t.s);return n.D=t.D,n.mb=t.mb+1,n.a=[t.a[256]],n.h=[t,e],t.a.splice(256,1),e.D=n,e.mb=t.mb,e.a=t.a.splice(256),e.h=t.h.splice(257),e.h.forEach((function(t){t.D=e})),t.D=n,ei(e,t.ya),ei(t,e),n}(this):this},i.Pe=function(t){if(!Zr(this)){var n=ui(this,t);return this.s.Qa(this.a[n],t)&&n++,this.h[n].Pe(t)}return this},i.Oe=function(t){if(!Zr(this)){var n=ui(this,t);return this.s.Qa(this.a[n],t)&&(t.some((function(t){return t==ce}))||n++),this.h[n].Oe(t)}return this},i.Va=function(t,n,e){function r(t){return t[0]?t[1]?0:1:-1}var i=this.s.jb(),o=0,s=this.a.length-1,a=this.a,u=r(i.wb(a[o],t)),c=r(i.wb(a[s],t));if(1!=u&&(-1!=u||-1!=c)){var h=function(t,n){return(n=t+n>>1)==t?n+1:n},l=function(n,e,o){if(n>=e)return 0==o?e:-1;var s=r(i.wb(a[n],t));if(0==s)return n;if(1==s)return-1;if((s=h(n,e))==e)return 0==o?e:-1;var u=r(i.wb(a[s],t));return 0==u?l(n,s,u):-1==u?l(s+1,e,o):l(n+1,s,u)},f=function(n,e){if(n>=e)return n;var o=r(i.wb(a[e],t));if(0==o)return e;if(-1==o)return n;if((o=h(n,e))==e)return n;var s=r(i.wb(a[o],t));return 0==s?f(o,e):1==s?f(n,o-1):-1};0!=u&&(o=l(o+1,s,c)),-1!=o&&(-1!=(s=f(o,s))&&s>=o&&function(t,n,e,r,i){for(;r<i&&(n.reverse||!(n.count>=n.X));++r)ci(t,n,e,r)}(this,n,e,o,s+1))}},i.fill=function(t,n){if(Zr(this))for(var e=0;e<this.B.length&&0<t.count;++e)if(0<t.offset){if(t.offset-=this.s.Ma()?1:this.B[e].length,0>t.offset)for(var r=this.B[e].length+t.offset;r<this.B[e].length&&0<t.count;++r)n[t.te++]=this.B[e][r],t.count--}else if(this.s.Ma())n[t.te++]=this.B[e],t.count--;else for(r=0;r<this.B[e].length&&0<t.count;++r)n[t.te++]=this.B[e][r],t.count--;else for(e=0;e<this.h.length&&0<t.count;++e)this.h[e].fill(t,n)},i.kd=function(t){return this.s.jb().kd(this.a[0],t)},(i=hi.prototype).wb=function(t,n){var e=[(n=this.ce(n)).from==ce,n.o==ce];if(!e[0]){var r=this.Xc(t,n.from);e[0]=n.ea?1==r:-1!=r}return e[1]||(r=this.Xc(t,n.o),e[1]=n.na?-1==r:1!=r),e},i.compare=function(t,n){return this.Xc(t,n)},i.min=function(t,n){return t<n?1:t==n?0:-1},i.max=function(t,n){return t>n?1:t==n?0:-1},i.Bb=function(t,n){return(t=this.wb(t,n))[0]&&t[1]},i.kd=function(t,n){return this.Bb(t,n)},i.uf=function(t){return t.filter((function(t){return null!==t})).sort(function(t,n){return this.ie(t,n)}.bind(this))},i.Xd=function(t){return this.ce(t).from==ce},i.ud=function(t){return[(t=this.ce(t)).from,t.o]},i.Od=function(t){return null!==t},i.Zd=r(1),i.toString=function(){return this.compare==fi?"SimpleComparator_DESC":"SimpleComparator_ASC"},E(yi,hi),yi.prototype.Bb=function(t,n){return null===t?fe(n):yi.hb.Bb.call(this,t,n)},yi.prototype.Hb=function(t,n){return null===t?null===n?0:-1:null===n?1:null},yi.prototype.min=function(t,n){var e=this.Hb(t,n);return null===e&&(e=yi.hb.min.call(this,t,n)),e},yi.prototype.max=function(t,n){var e=this.Hb(t,n);return null===e&&(e=yi.hb.max.call(this,t,n)),e},(i=bi.prototype).compare=function(t,n){return vi(this,t,n,(function(t,n,e){return n==ce||e==ce?0:t.compare(n,e)}))},i.min=function(t,n){return vi(this,t,n,(function(t,n,e){return t.min(n,e)}))},i.max=function(t,n){return vi(this,t,n,(function(t,n,e){return t.max(n,e)}))},i.wb=function(t,n){for(var e=[!0,!0],r=0;r<this.pa.length&&(e[0]||e[1]);++r){var i=this.pa[r].wb(t[r],n[r]);e[0]=e[0]&&i[0],e[1]=e[1]&&i[1]}return e},i.Bb=function(t,n){for(var e=!0,r=0;r<this.pa.length&&e;++r)e=this.pa[r].Bb(t[r],n[r]);return e},i.kd=function(t,n){return this.pa[0].Bb(t[0],n[0])},i.uf=function(t){var n=t.filter((function(t){return t.every(c)}));t=Array(this.pa.length);for(var e=0;e<t.length;e++)t[e]=n.map((function(t){return t[e]}));for(t.forEach((function(t,n){t.sort(function(t,e){return this.pa[n].ie(t,e)}.bind(this))}),this),n=Array(n.length),e=0;e<n.length;e++)n[e]=t.map((function(t){return t[e]}));return n.sort(function(t,n){for(var e=0,r=0;r<this.pa.length&&0==e;++r)e=this.pa[r].ie(t[r],n[r]);return e}.bind(this))},i.Xd=function(t){return this.pa[0].Xd(t[0])},i.ud=function(t){return[t.map((function(t,n){return this.pa[n].ud(t)[0]}),this),t=t.map((function(t,n){return this.pa[n].ud(t)[1]}),this)]},i.Od=function(t){return t.every((function(t,n){return this.pa[n].Od(t)}),this)},i.Zd=function(){return this.pa.length},E(wi,bi),(i=Si.prototype).getName=function(){return this.fa.getName()},i.add=function(t,n){null===t?(this.ob.add(n),this.Oc.add(t,1)):this.fa.add(t,n)},i.set=function(t,n){null===t?(this.ob.clear(),this.Oc.clear(),this.add(t,n)):this.fa.set(t,n)},i.remove=function(t,n){null===t?n?(this.ob.delete(n),this.Oc.remove(t,1)):(this.ob.clear(),this.Oc.clear()):this.fa.remove(t,n)},i.get=function(t){return null===t?On(this.ob):this.fa.get(t)},i.Zc=function(t){return this.fa.Zc(t)},i.Y=function(){return function(t,n){t.clear(),n.forEach((function(t){this.ia+=t.ia}),t)}(this.za,[this.fa.Y(),this.Oc]),this.za},i.Va=function(t,n,e,r){return n=this.fa.Va(t,n,e,r),null!=t?n:n.concat(On(this.ob))},i.clear=function(){this.ob.clear(),this.fa.clear()},i.Pa=function(t){return null===t?0!=this.ob.size:this.fa.Pa(t)},i.min=function(){return this.fa.min()},i.max=function(){return this.fa.max()},i.Ja=function(){return[new cn(-2,On(this.ob))].concat(this.fa.Ja())},i.jb=function(){return this.fa.jb()},i.Ma=function(){return this.fa.Ma()},(i=ki.prototype).getName=e("A"),i.add=function(t){if("number"!=typeof t)throw new Gn(103);this.sb.add(t)},i.set=function(t,n){this.add(t,n)},i.remove=function(t){this.sb.delete(t)},i.get=function(t){return this.Pa(t)?[t]:[]},i.min=function(){return this.Hb(this.$.min.bind(this.$))},i.max=function(){return this.Hb(this.$.max.bind(this.$))},i.Hb=function(t){if(0==this.sb.size)return null;var n=On(this.sb).reduce((function(n,e){return null===n||1==t(e,n)?e:n}),null);return[n,[n]]},i.Zc=function(){return this.sb.size},i.Va=function(t,n,e,r){var i=t||[le()];return zr(t=On(this.sb).filter((function(t){return i.some((function(n){return this.$.Bb(t,n)}),this)}),this),n,e,r)},i.clear=function(){this.sb.clear()},i.Pa=function(t){return this.sb.has(t)},i.Ja=function(){return[new cn(0,On(this.sb))]},i.jb=e("$"),i.Ma=r(!0),i.Y=function(){var t=new Gr;return t.ia=this.sb.size,t},xi.prototype.Ea=function(t){var n=t.oa(),e=function(){if(0==n.length)return et();var t=n.shift();return(t.Cb()?function(t,n){var e=t.Oa.Fb(0,[n]),r=e.I(n.getName(),n.kb,0).get([]).then(function(t){this.V.Wb(n.getName(),t)}.bind(t));return t=n.Da().map((function(t){return function(t,n,e){e=e.I(n.j(),ln,1);var r=Ei(n);return e.get([]).then(function(t){if(0<t.length){if(Wi(n))t=function(t,n){for(var e=-1,r=0;r<n.length;++r)if(-2==n[r].id()){e=r;break}if(-1==e)throw new Gn(102);r=n[e].m,(n=n.slice(0)).splice(e,1);var i=new Si(t=t(n));return r.forEach((function(t){i.ob.add(t)})),i}(Yr.bind(void 0,r,n.j(),n.Dc),t);else t=Yr(r,n.j(),n.Dc,t);this.C.set(n.mc,t)}}.bind(t))}(this,t,e)}),t).concat(function(t,n,e){return e.I(Ui(n),ln,1).get([]).then(function(t){0<t.length&&(t=function(t,n){var e=new ki(t);return n[0].m.forEach((function(t){e.add(t,t)})),e}(Ui(n),t),this.C.set(n.getName(),t))}.bind(t))}(t,n,e)),e.ka(),ot(t.concat(r))}(this,t):function(t,n){var e=t.Oa.Fb(0,[n]);return t=e.I(n.getName(),n.kb.bind(n),0).get([]).then(function(t){this.V.Wb(n.getName(),t),function(t,n,e){var r=t.C.lc.get(n.getName())||[];e.forEach((function(t){r.forEach((function(n){var e=t.nb(n.getName());n.add(e,t.id())}))}))}(this,n,t)}.bind(t)),e.ka(),t}(this,t)).then(e)}.bind(this);return e()},Ni.prototype.Ea=function(t){return t.oa().forEach((function(t){var n=[];this.lc.set(t.getName(),n);var e=Ui(t);if(null===this.get(e)){var r=new ki(e);n.push(r),this.Z.set(e,r)}t.Da().forEach((function(t){var e;e=Ei(t),e=new Hr(t.j(),e,t.Dc),e=Wi(t)&&1==t.f.length?new Si(e):e,n.push(e),this.Z.set(t.j(),e)}),this)}),this),et()},Ni.prototype.get=function(t){return this.Z.get(t)||null},Ni.prototype.set=function(t,n){var e=this.lc.get(t)||null;null===e&&(e=[],this.lc.set(t,e)),t=null;for(var r=0;r<e.length;r++)if(e[r].getName()==n.getName()){t=r;break}null!==t&&0<e.length?e.splice(t,1,n):e.push(n),this.Z.set(n.getName(),n)},E(qi,Ge),(i=qi.prototype).Nb=function(){return Ti(this,(function(t){if(t instanceof qi){var n=new qi(t.pb);return n.Wa=t.Wa,t=t.W(),n.sa=t,n}return t.Nb()}))},i.lb=function(t){var n=t||[];return ze(this,function(t){t!=this&&t.lb(n)}.bind(this)),On(t=jn(n))},i.u=function(t){var n=null!=t?t:jn();return ze(this,function(t){t!=this&&t.u(n)}.bind(this)),n},i.vd=function(t){this.Wa!=t&&(this.Wa=t,this.pb="and"==this.pb?"or":"and",Pe(this).forEach((function(n){return n.vd(t)})))},i.eval=function(t){return function(t,n){return"and"==t.pb?function(t){if(0==t.length)return Se();for(var n=t.reduce((function(t,n){return t+n.entries.length}),0),e=Array(n),r=0,i=(n=t.map((function(t){var n=sn();return t.entries.forEach((function(t){e[r++]=t,n.set(t.id,t)})),n})),sn()),o=0;o<e.length;o++)n.every((function(t){return t.has(e[o].id)}))&&i.set(e[o].id,e[o]);return new me(un(i),On(t[0].M))}(n):function(t){if(0==t.length)return Se();var n=sn();return t.forEach((function(t){t.entries.forEach((function(t){n.set(t.id,t)}))})),new me(un(n),On(t[0].M))}(n)}(this,Pe(this).map((function(n){return n.eval(t)})))},i.toString=function(){return"combined_pred_"+this.pb.toString()},i.we=function(){if("or"==this.pb){var t=new ge;return Pe(this).forEach((function(n){n=n.we().qa(),t.add(n)})),t}return new ge},i.ld=function(){return"or"==this.pb&&function(t){var n=null;return Pe(t).every((function(t){return!!(t instanceof Je&&t.ld())&&(null===n&&(n=t.J),n.j()==t.J.j())}))}(this)},E(_i,Ge),(i=_i.prototype).Nb=function(){var t=new _i(this.ga,this.ma,this.F),n=this.W();return t.sa=n,t},i.lb=function(t){return null!=t?(t.push(this.ga),t.push(this.ma),t):[this.ga,this.ma]},i.u=function(t){return(t=null!=t?t:jn()).add(this.ga.I()),t.add(this.ma.I()),t},i.reverse=function(){var t=this.F;switch(this.F){case"gt":t="lt";break;case"lt":t="gt";break;case"gte":t="lte";break;case"lte":t="gte"}return new _i(this.ma,this.ga,t)},i.eval=function(t){return new me(t.entries.filter((function(t){var n=Ce(t,this.ga);return t=Ce(t,this.ma),this.vc(n,t)}),this),t.u())},i.toString=function(){return"join_pred("+this.ga.j()+" "+this.F+" "+this.ma.j()+")"};var Di={};function Pi(t,n,e,r){this.mc=t,this.name=n,this.Dc=e,this.f=r}function Wi(t){return t.f.some((function(t){return t.ba.hc()}))}function Li(t,n,e,r){this.A=t,this.ta=e,this.K=n,this.rd=r,this.Ka=null}function Fi(t){return t.Ka||t.A}function Ui(t){return t.A+".#"}function zi(t,n){this.child=t,this.Lb=n,this.Ka=null}function Gi(t){for(var n=[t];t instanceof zi;)n.push(t.child),t=t.child;return n}function Hi(t){this.Ka=t||null,this.U=new Li("#UnknownTable",[],[],!1)}function Ji(t){return new zi(t||new Hi,"COUNT")}function Xi(t){return new zi(t,"DISTINCT")}function Yi(t,n){Re.call(this),this.Uf=n}function Ki(t){Yi.call(this,0,1),this.Ce=t}function Vi(t,n){this.Na=t,this.K=n}function Zi(t,n,e){var r=null;switch(t){case"MIN":r=Qi(n,e,(function(t,n){return n<t?n:t}));break;case"MAX":r=Qi(n,e,(function(t,n){return n>t?n:t}));break;case"DISTINCT":r=function(t,n){var e=sn();return t.entries.forEach((function(t){var r=Ce(t,n);e.set(r,t)})),new me(un(e),t.u())}(n,e);break;case"COUNT":r=to(n,e);break;case"SUM":r=no(n,e);break;case"AVG":0<(t=to(n,e))&&(r=no(n,e)/t);break;case"GEOMEAN":r=function(t,n){var e=0;return t=t.entries.reduce((function(t,r){return 0==(r=Ce(r,n))||null===r?t:(e++,t+Math.log(r))}),0),0==e?null:Math.pow(Math.E,t/e)}(n,e);break;default:r=function(t,n){var e=[];return t.entries.forEach((function(t){null===(t=Ce(t,n))||e.push(t)})),0==e.length?null:Et.apply(null,e)}(n,e)}return r}function Qi(t,n,e){return t.entries.reduce((function(t,r){return null===(r=Ce(r,n))?t:null===t?r:e(t,r)}),null)}function to(t,n){return n instanceof Hi?t.entries.length:t.entries.reduce((function(t,e){return t+(null===Ce(e,n)?0:1)}),0)}function no(t,n){return Qi(t,n,(function(t,n){return n+t}))}function eo(t,n){this.Ha=t,this.aa=n}function ro(){Re.call(this)}function io(t,n){Re.call(this),this.table=t,this.values=n}function oo(t,n){io.call(this,t,n)}function so(t){Re.call(this),this.table=t}function ao(t){Re.call(this),this.table=t}function uo(t){Re.call(this),this.O=t}function co(t){Re.call(this),this.table=t}function ho(){Re.call(this)}function lo(t,n){Re.call(this),this.f=t,this.Pb=n}function fo(t){Re.call(this),this.N=t}function po(t){Re.call(this),this.f=t}function yo(t){Re.call(this),this.f=t}function go(t){Re.call(this),this.X=t}function mo(t){Re.call(this),this.L=t}function bo(t,n){Re.call(this),this.O=t,this.Rb=n}function vo(){}function wo(){}function Eo(t,n){return 0==Pe(n).length||"and"!=n.pb?[n]:R(t=Pe(n).slice().map((function(t){return n.removeChild(t),Eo(this,t)}),t))}function So(){}function ko(){Yi.call(this,0,0)}function xo(t,n){rr.call(this,t,n),this.Ia=t.b(Sn),this.Ib=t.b(kn)}function No(t){Ke.call(this,t)}function To(t,n,e){var r=Na(t.ba.info(),n,1);Na(t.ba.info(),n).forEach(e.add.bind(e)),r.forEach((function(t){To(this,t.getName(),e)}),t)}function Co(t){Ke.call(this,t)}function $o(t){Ke.call(this,t)}function jo(t,n){if(null==n)return"NULL";switch(t){case 1:return n?1:0;case 3:case 4:return n;case 0:return"'"+pn(n)+"'";default:return"'"+n.toString()+"'"}}function Oo(t){switch(t){case"between":return"BETWEEN";case"eq":return"=";case"gte":return">=";case"gt":return">";case"in":return"IN";case"lte":return"<=";case"lt":return"<";case"match":return"LIKE";case"neq":return"<>";default:return"UNKNOWN"}}function qo(t){return[t.ga.j(),Oo(t.F),t.ma.j()].join(" ")}function _o(t,n){if(t instanceof Je){var e=t.J.j(),r=Oo(t.F);return t=function(t,n,e,r){return t instanceof Oe?"?"+t.Ca().toString():r?null!=t?"#":"NULL":"match"==n?"'"+t.toString()+"'":"in"==n?"("+t.map((function(t){return jo(e,t)})).join(", ")+")":"between"==n?jo(e,t[0])+" AND "+jo(e,t[1]):jo(e,t).toString()}(t.value,t.F,t.J.G(),n),"="==r&&"NULL"==t?[e,"IS NULL"].join(" "):"<>"==r&&"NULL"==t?[e,"IS NOT NULL"].join(" "):[e,r,t].join(" ")}if(t instanceof qi)return function(t,n){return Pe(t).map((function(t){return"("+_o(t,n)+")"})).join("and"==t.pb?" AND ":" OR ")}(t,n);if(t instanceof _i)return qo(t);throw new Gn(357,typeof t)}function Ao(t,n){return(t=_o(t,n))?" WHERE "+t:""}function Io(t,n){var e="*";return t.f.length&&(e=t.f.map((function(t){return t.Ka?t.j()+" AS "+t.Ka:t.j()})).join(", ")),e="SELECT "+e+" FROM ",null!=t.eb&&0!=t.eb.size?e+=function(t,n){for(var e=Oi(t.w,(function(t){return t instanceof _i})),r=e.map(qo),i=Mo(t.from[0]),o=1;o<t.from.length;o++){var s=Mo(t.from[o]);i=(i=t.eb.has(e[r.length-o].W())?i+" LEFT OUTER JOIN "+s:i+" INNER JOIN "+s)+" ON ("+r[r.length-o]+")"}return(t=0<Pe(t=t.w).length?We(t,0):t)instanceof _i||(i+=" WHERE "+_o(t,n)),i}(t,n):(e+=t.from.map(Mo).join(", "),t.w&&(e+=Ao(t.w,n))),t.N&&(e+=" ORDER BY "+(n=t.N.map((function(t){return t.J.j()+(0==t.order?" DESC":" ASC")})).join(", "))),t.ra&&(e+=" GROUP BY "+(n=t.ra.map((function(t){return t.j()})).join(", "))),t.X&&(e+=" LIMIT "+t.X.toString()),t.L&&(e+=" SKIP "+t.L.toString()),e+";"}function Mo(t){return Fi(t)!=t.getName()?t.getName()+" AS "+Fi(t):t.getName()}function Ro(t,n){if(n=n||!1,(t=t.query.clone())instanceof Co)return function(t,n){var e=t.ac?"INSERT OR REPLACE":"INSERT",r=t.La.lb();return e=(e=(e=e+" INTO "+t.La.getName()+"(")+r.map((function(t){return t.getName()})).join(", "))+") VALUES (",t.values.map((function(t){var i=r.map((function(e){var r=t.m[e.getName()];return n?null!=r?"#":"NULL":jo(e.G(),r)}));return e+i.join(", ")+");"})).join("\n")}(t,n);if(t instanceof No){var e="DELETE FROM "+t.from.getName();return t.w&&(e+=Ao(t.w,n)),e+";"}if(t instanceof $o)return function(t,n){var e=(e="UPDATE "+t.table.getName()+" SET ")+t.set.map((function(t){var n=t.J.j()+" = ";return-1!=t.Tc?n+"?"+t.Tc.toString():n+jo(t.J.G(),t.value).toString()})).join(", ");return t.w&&(e+=Ao(t.w,n)),e+";"}(t,n);if(t instanceof tr)return Io(t,n);throw new Gn(358,typeof t)}function Bo(t,n){this.global=t,this.Hg=t.b(En),this.Ia=t.b(Sn),this.query=n}function Do(t){if(null==t.hf){var n;n=t.Hg;var e=t.query,r=n.qg.create(e);n=n.Eg.create(r,e),t.hf=n}return t.hf}function Po(t){Bo.call(this,t,new No(t.b(xn)))}function Wo(t,n){Bo.call(this,t,new Co(t.b(xn))),this.query.ac=n||!1}function Lo(t){return Fo("and",Array.prototype.slice.call(arguments))}function Fo(t,n){var e=new qi(t);return n.forEach((function(t){Fe(e,t)})),e}function Uo(t,n){Bo.call(this,t,new tr(t.b(xn))),this.Me=this.Ad=!1,this.query.f=n,function(t){var n=t.query.f.filter((function(t){return t instanceof zi&&"DISTINCT"==t.Lb}),t);if(0!=n.length&&(1!=n.length||1!=t.query.f.length))throw new Gn(524)}(this),function(t){t.query.f.forEach((function(t){if(t instanceof zi&&!function(t,n){switch(t){case"COUNT":case"DISTINCT":return!0;case"AVG":case"GEOMEAN":case"STDDEV":case"SUM":return 4==n||3==n;case"MAX":case"MIN":return 4==n||3==n||5==n||2==n}return!1}(t.Lb,t.G()))throw new Gn(527,t.j())}),t)}(this)}function zo(t,n){if(null==t.query.from)throw new Gn(n)}function Go(t,n){null!=t.query.w&&(n=Lo(n,t.query.w)),t.query.w=n}function Ho(t,n){Bo.call(this,t,new $o(t.b(xn))),this.query.table=n}function Jo(t){this.query=t,this.Ha=null}function Xo(t){Jo.call(this,t)}function Yo(t){Jo.call(this,t)}function Ko(t,n,e){this.Ha=t,this.le=n,this.Vb=e}function Vo(t,n){Jo.call(this,t),this.Vb=n}function Zo(){}function Qo(){this.Sc=jn()}function ts(t,n,e,r){var i=e;if(function(t,n){var e=We(n,0);return e instanceof uo&&(null==t.eb||(n=n.O instanceof _i,t=t.eb.has(e.O.W()),n||!t))}(n,e))i=$i(e),ts(t,n,e,r);else if(function(t){return(t=We(t,0))instanceof ho||t instanceof bo}(e)){var o=[];i=function(t,n,e){var r=We(t,0),i=Pe(r).slice();return i.some((function(t){return n(t)}))?(Ci(t),i.forEach((function(i,o){if(n(i)){var s=e(t);Ue(r,o),Fe(s,i),Le(r,s,o)}})),r):t}(e,r,(function(t){return t=new uo(t.O),o.push(t),t}));o.forEach((function(t){ts(this,n,t,r)}),t)}return i}function ns(t,n){Jo.call(this,t),this.Vb=n,this.kf=this.cf=this.tf=this.ff=this.De=this.Se=this.sf=this.Je=this.vf=null}function es(){this.re=[new wo,new So,new Qo,new Zo],this.Pd=[new wo]}function rs(t){Yi.call(this,0,1),this.U=t}function is(t,n){Yi.call(this,0,-1),this.table=n,this.C=t.b(wn)}function os(t,n){Yi.call(this,0,-1),this.V=t.b(vn),this.C=t.b(wn),this.table=n}function ss(t){this.c=t}function as(t){Yi.call(this,0,1),this.Re=t}function us(t,n,e){Yi.call(this,0,0),this.C=t.b(wn),this.V=t.b(vn),this.O=n,this.Rb=e,this.Dd="eq"==this.O.F?0:2,this.Ue=null}w("lf.schema.DataStoreType",Di),Di.INDEXED_DB=0,Di.MEMORY=1,Di.LOCAL_STORAGE=2,Di.FIREBASE=3,Di.WEB_SQL=4,Di.OBSERVABLE_STORE=5,Pi.prototype.j=function(){return this.mc+"."+this.name},w("lf.schema.Table",Li),Li.prototype.getName=e("A"),Li.prototype.getName=Li.prototype.getName,Li.prototype.rc=function(t){var n=new this.constructor(this.A);return n.Ka=t,n.Ig=this.Ig,n},Li.prototype.as=Li.prototype.rc,Li.prototype.createRow=Li.prototype.xb,Li.prototype.deserializeRow=Li.prototype.kb,Li.prototype.Da=e("ta"),Li.prototype.getIndices=Li.prototype.Da,Li.prototype.lb=e("K"),Li.prototype.getColumns=Li.prototype.lb,Li.prototype.getConstraint=Li.prototype.Ne,Li.prototype.Cb=e("rd"),Li.prototype.persistentIndex=Li.prototype.Cb,(i=zi.prototype).getName=function(){return this.Lb+"("+this.child.getName()+")"},i.j=function(){return this.Lb+"("+this.child.j()+")"},i.I=function(){return this.child.I()},i.toString=function(){return this.j()},i.G=function(){return this.child.G()},i.Da=function(){return[]},i.Ca=r(null),i.hc=r(!1),i.rc=function(t){return this.Ka=t,this},zi.prototype.as=zi.prototype.rc,(i=Hi.prototype).getName=r("*"),i.j=function(){return this.getName()},i.toString=function(){return this.j()},i.I=e("U"),i.G=r(4),i.Da=function(){return[]},i.Ca=r(null),i.hc=r(!1),w("lf.fn.avg",(function(t){return new zi(t,"AVG")})),w("lf.fn.count",Ji),w("lf.fn.distinct",Xi),w("lf.fn.max",(function(t){return new zi(t,"MAX")})),w("lf.fn.min",(function(t){return new zi(t,"MIN")})),w("lf.fn.stddev",(function(t){return new zi(t,"STDDEV")})),w("lf.fn.sum",(function(t){return new zi(t,"SUM")})),w("lf.fn.geomean",(function(t){return new zi(t,"GEOMEAN")})),E(Yi,Re),Yi.prototype.exec=function(t,n){switch(this.Uf){case 1:return function(t,n,e){return We(t,0).exec(n,e).then(function(t){return this.ca(t,n,e)}.bind(t))}(this,t,n);case 0:return function(t,n,e){return ot(Pe(t).map((function(t){return t.exec(n,e)}))).then(function(t){var r=[];return t.forEach((function(t){for(var n=0;n<t.length;++n)r.push(t[n])})),this.ca(r,n,e)}.bind(t))}(this,t,n);default:return function(t,n,e){return new Z(function(t){t(this.ca([],n,e))}.bind(t))}(this,t,n)}},Yi.prototype.toString=r("dummy_node"),Yi.prototype.Pc=function(){return this.toString()},E(Ki,Yi),Ki.prototype.toString=function(){return"aggregation("+this.Ce.map((function(t){return t.j()})).toString()+")"},Ki.prototype.ca=function(t){return t.forEach((function(t){!function(t){t.K.forEach((function(t){t=Gi(t).reverse();for(var n=1;n<t.length;n++){var e=t[n],r=Gi(e).slice(-1)[0],i=e.child instanceof zi?we(this.Na,e.child):this.Na;if(null!==i.$a&&i.$a.has(e.j()))break;i=Zi(e.Lb,i,r),null===(r=this.Na).$a&&(r.$a=sn()),r.$a.set(e.j(),i)}}),t)}(new Vi(t,this.Ce))}),this),t},eo.prototype.bb=e("Ha"),eo.prototype.da=e("aa"),E(ro,Re),E(io,ro),E(oo,io),E(so,ro),so.prototype.toString=function(){return"delete("+this.table.getName()+")"},E(ao,ro),ao.prototype.toString=function(){return"update("+this.table.getName()+")"},E(uo,ro),uo.prototype.toString=function(){return"select("+this.O.toString()+")"},E(co,ro),co.prototype.toString=function(){var t="table_access("+this.table.getName();return null===this.table.Ka||(t+=" as "+this.table.Ka),t+")"},E(ho,ro),ho.prototype.toString=r("cross_product"),E(lo,ro),lo.prototype.toString=function(){var t="project("+this.f.toString();if(null!==this.Pb){var n=this.Pb.map((function(t){return t.j()})).join(", ");t=t+", groupBy("+n+")"}return t+")"},E(fo,ro),fo.prototype.toString=function(){return"order_by("+nr(this.N)+")"},E(po,ro),po.prototype.toString=function(){return"aggregation("+this.f.toString()+")"},E(yo,ro),yo.prototype.toString=function(){return"group_by("+this.f.toString()+")"},E(go,ro),go.prototype.toString=function(){return"limit("+this.X+")"},E(mo,ro),mo.prototype.toString=function(){return"skip("+this.L+")"},E(bo,ro),bo.prototype.toString=function(){return"join(type: "+(this.Rb?"outer":"inner")+", "+this.O.toString()+")"},E(wo,vo),wo.prototype.gb=function(t){return this.H=t,this.ub(this.H),this.H},wo.prototype.ub=function(t){if(t instanceof uo){var n=function(t,n){var e=null,r=null;return n.map((function(t,n){t=new uo(t),0==n?e=t:Fe(r,t),r=t}),t),[e,r]}(this,n=Eo(this,t.O));ji(t,t,n[0],n[1]),t==this.H&&(this.H=n[0]),t=n[0]}Pe(t).forEach((function(t){this.ub(t)}),this)},E(So,vo),So.prototype.gb=function(t,n){return 3>n.from.length?t:(this.H=t,this.ub(this.H),this.H)},So.prototype.ub=function(t){if(t instanceof ho)for(;2<Pe(t).length;){for(var n=new ho,e=0;2>e;e++){Fe(n,Ue(t,0))}Le(t,n,0)}Pe(t).forEach((function(t){this.ub(t)}),this)},E(ko,Yi),ko.prototype.toString=r("cross_product"),ko.prototype.ca=function(t){var n=t[0],e=t[1];t=[];for(var r=n.u(),i=e.u(),o=0;o<n.entries.length;o++)for(var s=0;s<e.entries.length;s++){var a=je(n.entries[o],r,e.entries[s],i);t.push(a)}return[new me(t,n=n.u().concat(e.u()))]},E(xo,rr),xo.prototype.getPriority=r(2),xo.prototype.ge=function(t){0==this.G()?function(t,n){t.td.forEach((function(t,e){t instanceof tr&&la(this.Ib,t,n[e])}),t)}(this,t):this.Mc()},xo.prototype.Mc=function(){var t=ha(this.Ib,this.da());0!=t.length&&(t=new ir(this.global,t),Zs(this.Ia,t))},E(No,Ke),No.prototype.da=function(){var t=jn();return t.add(this.from),To(this,this.from.getName(),t),t},No.prototype.clone=function(){var t=new No(this.ba);return Ze(t,this),t.from=this.from,t},No.prototype.bind=function(t){return No.hb.bind.call(this,t),Qe(this,t),this},E(Co,Ke),Co.prototype.da=function(){var t=jn();t.add(this.La);var n=this.ba.info();return xa(this.La.getName(),n.gf).forEach(t.add.bind(t)),this.ac&&Na(n,this.La.getName()).forEach(t.add.bind(t)),t},Co.prototype.clone=function(){var t=new Co(this.ba);return Ze(t,this),t.La=this.La,this.values&&(t.values=this.values instanceof Oe?this.values:this.values.slice()),t.ac=this.ac,t.bc=this.bc,t},Co.prototype.bind=function(t){return Co.hb.bind.call(this,t),this.bc&&(this.values=this.bc instanceof Oe?t[this.bc.Ca()]:this.bc.map((function(n){return n instanceof Oe?t[n.Ca()]:n}))),this},E($o,Ke),$o.prototype.da=function(){var t=jn();t.add(this.table);var n=this.set.map((function(t){return t.J.j()})),e=this.ba.info();return function(t,n){var e=jn();return n.forEach((function(t){(t=this.Ie.get(t))&&e.add(t)}),t),On(e).map((function(t){return this.g.table(t)}),t)}(e,n).forEach(t.add.bind(t)),function(t,n){var e=jn();return n.forEach((function(t){(t=this.He.get(t))&&t.forEach((function(t){e.add(t)}))}),t),On(e).map((function(t){return this.g.table(t)}),t)}(e,n).forEach(t.add.bind(t)),t},$o.prototype.clone=function(){var t=new $o(this.ba);return Ze(t,this),t.table=this.table,t.set=this.set?function(t){return t.map((function(t){var n,e={};for(n in t)e[n]=t[n];return e}))}(this.set):this.set,t},$o.prototype.bind=function(t){return $o.hb.bind.call(this,t),this.set.forEach((function(n){-1!=n.Tc&&(n.value=t[n.Tc])})),Qe(this,t),this},w("lf.query.BaseBuilder",Bo),Bo.prototype.exec=function(){try{this.ab()}catch(t){return rt(t)}return new Z((function(t,n){var e=new xo(this.global,[this.Bc()]);Zs(this.Ia,e).then((function(n){t(be(n[0]))}),n)}),this)},Bo.prototype.exec=Bo.prototype.exec,Bo.prototype.Wf=function(){var t=function(t){return t.Pc(this.query)+"\n"}.bind(this);return function(t,n){var e=n||function(t){return t.toString()+"\n"},r="";return ze(t,(function(t){for(var n=0;n<De(t);n++)r+="-";r+=e(t)})),r}(Do(this).bb(),t)},Bo.prototype.explain=Bo.prototype.Wf,Bo.prototype.bind=function(t){return this.query.bind(t),this},Bo.prototype.bind=Bo.prototype.bind,Bo.prototype.Pg=function(t){return Ro(this,t)},Bo.prototype.toSql=Bo.prototype.Pg,Bo.prototype.ab=function(){},Bo.prototype.Bc=function(){return{context:this.query.clone(),je:Do(this)}},E(Po,Bo),w("lf.query.DeleteBuilder",Po),Po.prototype.from=function(t){if(null!=this.query.from)throw new Gn(515);return this.query.from=t,this},Po.prototype.from=Po.prototype.from,Po.prototype.w=function(t){return this.Fd(),this.query.w=t,this},Po.prototype.where=Po.prototype.w,Po.prototype.Fd=function(){if(null==this.query.from)throw new Gn(548);if(null!=this.query.w)throw new Gn(516)},Po.prototype.ab=function(){if(Po.hb.ab.call(this),null==this.query.from)throw new Gn(517)},E(Wo,Bo),w("lf.query.InsertBuilder",Wo),Wo.prototype.ab=function(){Wo.hb.ab.call(this);var t=this.query;if(null==t.La||null==t.values)throw new Gn(518);if(t.ac&&null===t.La.Mb.sd)throw new Gn(519)},Wo.prototype.La=function(t){if(null!=this.query.La)throw new Gn(520);return this.query.La=t,this},Wo.prototype.into=Wo.prototype.La,Wo.prototype.values=function(t){if(null!=this.query.values)throw new Gn(521);return t instanceof Oe||t.some((function(t){return t instanceof Oe}))?this.query.bc=t:this.query.values=t,this},Wo.prototype.values=Wo.prototype.values,w("lf.op.and",Lo),w("lf.op.or",(function(t){return Fo("or",Array.prototype.slice.call(arguments))})),w("lf.op.not",(function(t){return t.vd(!0),t})),E(Uo,Bo),w("lf.query.SelectBuilder",Uo),Uo.prototype.ab=function(){Uo.hb.ab.call(this);var t=this.query;if(null==t.from)throw new Gn(522);if(s(t.Sb)&&!s(t.X)||s(t.Zb)&&!s(t.L))throw new Gn(523);null!=this.query.ra?function(t){if(t.query.ra.some((function(t){return 6==(t=t.G())||0==t})))throw new Gn(525)}(this):function(t){var n=t.query.f.some((function(t){return t instanceof zi}),t);if(t=t.query.f.some((function(t){return!(t instanceof zi)}),t)||0==t.query.f.length,n&&t)throw new Gn(526)}(this)},Uo.prototype.from=function(t){if(this.Me)throw new Gn(515);return this.Me=!0,null==this.query.from&&(this.query.from=[]),this.query.from.push.apply(this.query.from,Array.prototype.slice.call(arguments)),this},Uo.prototype.from=Uo.prototype.from,Uo.prototype.w=function(t){if(zo(this,548),this.Ad)throw new Gn(516);return this.Ad=!0,Go(this,t),this},Uo.prototype.where=Uo.prototype.w,Uo.prototype.hg=function(t,n){if(zo(this,542),this.Ad)throw new Gn(547);return this.query.from.push(t),Go(this,n),this},Uo.prototype.innerJoin=Uo.prototype.hg,Uo.prototype.og=function(t,n){if(zo(this,542),!(n instanceof _i))throw new Gn(541);if(this.Ad)throw new Gn(547);this.query.from.push(t),null==this.query.eb&&(this.query.eb=jn());var e=n;return Fi(t)!=Fi(n.ma.I())&&(e=n.reverse()),this.query.eb.add(e.W()),Go(this,e),this},Uo.prototype.leftOuterJoin=Uo.prototype.og,Uo.prototype.X=function(t){if(null!=(this.query.X||this.query.Sb))throw new Gn(528);if(t instanceof Oe)this.query.Sb=t;else{if(0>t)throw new Gn(531);this.query.X=t}return this},Uo.prototype.limit=Uo.prototype.X,Uo.prototype.L=function(t){if(null!=(this.query.L||this.query.Zb))throw new Gn(529);if(t instanceof Oe)this.query.Zb=t;else{if(0>t)throw new Gn(531);this.query.L=t}return this},Uo.prototype.skip=Uo.prototype.L,Uo.prototype.N=function(t,n){return zo(this,549),null==this.query.N&&(this.query.N=[]),this.query.N.push({J:t,order:null!=n?n:1}),this},Uo.prototype.orderBy=Uo.prototype.N,Uo.prototype.ra=function(t){if(zo(this,549),null!=this.query.ra)throw new Gn(530);return null==this.query.ra&&(this.query.ra=[]),this.query.ra.push.apply(this.query.ra,Array.prototype.slice.call(arguments)),this},Uo.prototype.groupBy=Uo.prototype.ra,Uo.prototype.clone=function(){var t=new Uo(this.global,this.query.f);return t.query=this.query.clone(),t.query.Wc=null,t},Uo.prototype.clone=Uo.prototype.clone,E(Ho,Bo),w("lf.query.UpdateBuilder",Ho),Ho.prototype.set=function(t,n){return t={Tc:n instanceof Oe?n.Ca():-1,J:t,value:n},null!=this.query.set?this.query.set.push(t):this.query.set=[t],this},Ho.prototype.set=Ho.prototype.set,Ho.prototype.w=function(t){return this.Fd(),this.query.w=t,this},Ho.prototype.where=Ho.prototype.w,Ho.prototype.Fd=function(){if(null!=this.query.w)throw new Gn(516)},Ho.prototype.ab=function(){if(Ho.hb.ab.call(this),null==this.query.set)throw new Gn(532);if(this.query.set.some((function(t){return t.value instanceof Oe})))throw new Gn(501)},Jo.prototype.gc=function(){return null===this.Ha&&(this.Ha=this.ad()),this.Ha},E(Xo,Jo),Xo.prototype.ad=function(){return this.query.ac?new oo(this.query.La,this.query.values):new io(this.query.La,this.query.values)},E(Yo,Jo),Yo.prototype.ad=function(){var t=new ao(this.query.table),n=null!=this.query.w?new uo(this.query.w.Nb()):null,e=new co(this.query.table);return null===n?Fe(t,e):(Fe(n,e),Fe(t,n)),t},Ko.prototype.gc=function(){return this.Vb.forEach((function(t){this.Ha=t.gb(this.Ha,this.le)}),this),this.Ha},E(Vo,Jo),Vo.prototype.ad=function(){var t=new so(this.query.from),n=null!=this.query.w?new uo(this.query.w.Nb()):null,e=new co(this.query.from);return null===n?Fe(t,e):(Fe(n,e),Fe(t,n)),new Ko(t,this.query,this.Vb).gc()},E(Zo,vo),Zo.prototype.gb=function(t,n){return 2>n.from.length?t:(this.H=t,this.ub(this.H,n),this.H)},Zo.prototype.ub=function(t,n){if(t instanceof uo&&t.O instanceof _i){var e=t.O.W(),r=We(t,0);r instanceof ho&&(e=null!=n.eb&&n.eb.has(e),ji(t,r,e=new bo(t.O,e),e),t==this.H&&(this.H=e),t=e)}Pe(t).forEach((function(t){this.ub(t,n)}),this)},E(Qo,vo),Qo.prototype.gb=function(t,n){return s(n.w)?(this.Sc.clear(),this.H=t,this.ub(this.H,n),this.Sc.clear(),this.H):t},Qo.prototype.ub=function(t,n){var e=function(t){Pe(t).forEach(r)}.bind(this),r=function(t){if(!this.Sc.has(t)){if(t instanceof uo){var i=t.O.u(),o=function(t){return function(t,n,e){var r=jn();return function(t){return Oi(t,(function(t){return null===t.h}))}(n).forEach((function(t){r.add(t.table)}),t),n instanceof co&&r.add(n.table),function(t,n){if(n.size>t.size)return!1;var e=!0;return n.forEach((function(n){e=e&&t.has(n)})),e}(r,e)}(this,t,i)}.bind(this);o=ts(this,n,t,o);this.Sc.add(t),o!=t&&(null===o.getParent()&&(this.H=o),r(o))}e(t)}}.bind(this);r(t)},E(ns,Jo),ns.prototype.ad=function(){return function(t){t.vf=t.query.from.map((function(t){return new co(t)}),t)}(this),2<=this.query.from.length&&(this.Je=new ho),this.sf=null!=this.query.w?new uo(this.query.w.Nb()):null,this.query.N&&(this.ff=new fo(this.query.N)),null!=this.query.L&&0<this.query.L&&(this.tf=new mo(this.query.L)),null!=this.query.X&&(this.cf=new go(this.query.X)),null!=this.query.ra&&(this.Se=new yo(this.query.ra)),function(t){var n=t.query.f.filter((function(t){return t instanceof zi}));null!=t.query.N&&t.query.N.forEach((function(t){t.J instanceof zi&&n.push(t.J)})),0<n.length&&(t.De=new po(n))}(this),this.kf=new lo(this.query.f||[],this.query.ra||null),new Ko(function(t){for(var n=[t.cf,t.tf,t.kf,t.ff,t.De,t.Se,t.sf,t.Je],e=-1,r=null,i=0;i<n.length;i++){var o=n[i];null!==o&&(null===r?r=o:Fe(n[e],o),e=i)}return t.vf.forEach((function(t){Fe(n[e],t)})),r}(this),this.query,this.Vb).gc()},es.prototype.create=function(t){var n;if(t instanceof Co)n=new Xo(t);else if(t instanceof No)n=new Vo(t,this.Pd);else if(t instanceof tr)n=new ns(t,this.re);else{if(!(t instanceof $o))throw new Gn(513);n=new Yo(t)}return new eo(n=n.gc(),t.da())},E(rs,Yi),rs.prototype.toString=function(){return"delete("+this.U.getName()+")"},rs.prototype.ca=function(t,n){return t=t[0].entries.map((function(t){return t.va})),n.remove(this.U,t),[Se()]},E(is,Yi),is.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"},is.prototype.ca=function(){var t=this.C.get(Ui(this.table)),n=new me([],[this.table.getName()]),e=Ji();t=t.Y().ia;return null===n.$a&&(n.$a=sn()),n.$a.set(e.j(),t),[n]},E(os,Yi),os.prototype.toString=function(){var t="table_access("+this.table.getName();return null===this.table.Ka||(t+=" as "+this.table.Ka),t+")"},os.prototype.ca=function(){var t=this.C.get(Ui(this.table)).Va();return[ke(Wr(this.V,t),[Fi(this.table)])]},E(ss,vo),ss.prototype.gb=function(t,n){return this.H=t,this.Hd(n)?(ji(t=Oi(t,(function(t){return t instanceof os}))[0],t,n=new is(this.c,t.table),n),this.H):t},ss.prototype.Hd=function(t){return 1==t.f.length&&1==t.from.length&&null==t.w&&null==t.X&&null==t.L&&null==t.ra&&((t=t.f[0])instanceof zi&&"COUNT"==t.Lb&&t.child instanceof Hi)},E(as,Yi),as.prototype.toString=function(){return"groupBy("+this.Re.map((function(t){return t.j()})).toString()+")"},as.prototype.ca=function(t){return function(t,n){var e=new Hn,r=function(t){return this.Re.map((function(n){return Ce(t,n)}),this).join(",")}.bind(t);return n.entries.forEach((function(t){e.set(r(t),t)}),t),e.keys().map((function(t){return new me(e.get(t),n.u())}),t)}(this,t[0])},E(us,Yi);var cs,hs=["hash","index_nested_loop","nested_loop"];function ls(t){Yi.call(this,0,-1),this.lf=t}function fs(){}function ps(t){t=t.map((function(t){return t.qa()})),t=Nt.apply(null,t);var n=[];return xt(t,(function(t){n.push(t)})),n}function ds(t){this.Qb=t}function ys(t,n){this.Qb=t,this.Ga=n,this.Ld=this.af=null}function gs(t,n){var e=sn();return t.Ga.keys().forEach((function(t){var r=this.Ga.get(t).map((function(t){return Ve(n,t)}),this),i=new ge([le()]);r.forEach((function(t){i=function(t,n){var e=[];return t.qa().map((function(t){return n.qa().map((function(n){var e;if(he(t,n)){e=le();var r=0==(r=de(t.from,n.from,!0))?t.ea?t:n:-1!=r?t:n;e.from=r.from,e.ea=r.ea,n=t.o==ce||n.o==ce?t.o==ce?n:t:0==(r=de(t.o,n.o,!1))?t.na?t:n:-1==r?t:n,e.o=n.o,e.na=n.na}else e=null;return e}))})).forEach((function(t){e=e.concat(t)})),new ge(e.filter((function(t){return null!==t})))}(i,t.we())})),e.set(t,i)}),t),e}function ms(t,n){this.xd=n,this.C=t.b(wn)}function bs(t){return t=t.C.get(Ui(t.xd)),Math.floor(.02*t.Y().ia)}function vs(t,n,e){if(0==(e=e.filter(t.kg,t)).length)return null;if(0==(t=function(t,n){return t.xd.Da().map((function(t){return function(t,n){n.forEach((function(t){var n=t.lb()[0].getName();this.eg.has(n)&&(null===this.Ga&&(this.Ga=new Hn),this.Ga.set(n,t.W()))}),t)}(t=new ws(this.C,t),n),t}),t).filter((function(t){if(null===t.Ga)t=!1;else{for(var n=!1,e=!0,r=0;r<t.cb.f.length;r++){var i=t.Ga.has(t.cb.f[r].ba.getName());if(n&&i){e=!1;break}i||(n=!0)}t=e}return t}))}(t,e)).length)return null;if(1==t.length)return t[0];var r=Number.MAX_VALUE;return t.reduce((function(t,e){var i=function(t,n){n=Es(t).bd(n);var e=t.C.get(t.cb.j());return n.reduce((function(t,n){return t+e.Zc(n)}),0)}(e,n);return i<r?(r=i,e):t}),null)}function ws(t,n){this.C=t,this.cb=n,this.eg=jn(this.cb.f.map((function(t){return t.ba.getName()}))),this.$d=this.Ga=null}function Es(t){return null===t.$d&&(t.$d=new ys(t.cb,t.Ga)),t.$d}function Ss(t,n,e,r){Yi.call(this,0,-1),this.C=t.b(wn),this.index=n,this.$e=e,this.pe=r,this.Rc=this.Qc=!1}function ks(){Yi.call(this,0,0)}function xs(t){Yi.call(this,0,1),this.jc=t}function Ns(t,n){Yi.call(this,0,1),this.V=t.b(vn),this.U=n}function Ts(t){this.c=t}function Cs(t,n){Yi.call(this,0,-1),this.C=t.b(wn),this.U=n}function $s(t,n,e){if(null!==(t=t.Mb.sd)&&t.f[0].autoIncrement){var r=t.f[0].ba.getName(),i=null===(e=e.get(t.j()).Y().Fc)?0:e;n.forEach((function(t){0!=t.m[r]&&null!=t.m[r]||(i++,t.m[r]=i)}))}}function js(t,n){Yi.call(this,0,-1),this.C=t.b(wn),this.U=n}function Os(){Yi.call(this,0,1)}function qs(t){Yi.call(this,0,1),this.N=t}function _s(t,n){this.Na=t,this.K=n}function As(t){return t.K.some((function(t){return t instanceof zi}),t)?function(t){if(1==t.K.length&&"DISTINCT"==t.K[0].Lb)return new me(t=we(t.Na,t.K[0]).entries.map((function(t){var n=new xe(new cn(-1,{}),1<this.Na.M.size);return $e(n,this.K[0],Ce(t,this.K[0].child)),n}),t),[]);var n=new xe(new cn(-1,{}),1<t.Na.M.size);return t.K.forEach((function(t){var e=t instanceof zi?we(this.Na,t):Ce(this.Na.entries[0],t);$e(n,t,e)}),t),new me([n],t.Na.u())}(t):function(t){var n=Array(t.Na.entries.length),e=1<t.Na.M.size;return t.Na.entries.forEach((function(t,r){n[r]=new xe(new cn(t.va.id(),{}),e),this.K.forEach((function(e){$e(n[r],e,Ce(t,e))}),this)}),t),new me(n,t.Na.u())}(t)}function Is(t,n){return new me(t.map((function(t){return As(new _s(t,n)).entries[0]})),t[0].u())}function Ms(t,n){Yi.call(this,0,1),this.f=t,this.Pb=n}function Rs(){Yi.call(this,0,1)}function Bs(){}function Ds(t){this.c=t}function Ps(t,n,e){if(1!=(r=(n=Ve(e,n.jc)).u()).size)return null;var r=On(r)[0],i=new ms(t.c,r),o=null;return Pe(n).every((function(t){return null===(t=vs(i,e,[t]))||(null===o?o=[t]:o.push(t)),null!==t}))?o:null}function Ws(t){this.c=t}function Ls(t,n){return t.f.length==n.length&&n.every((function(n,e){return n.J.getName()==t.f[e].ba.getName()}))&&((n=function(t,n){var e=t.reduce((function(t,n){return t<<1|(0==n.order?0:1)}),0),r=n.f.reduce((function(t,n){return t<<1|(0==n.order?0:1)}),0);return[0==(e^=r),e==Math.pow(2,Math.max(t.length,n.f.length))-1]}(n,t))[0]||n[1])?{cb:t,Xe:n[1]}:null}function Fs(t,n,e){this.Ha=t,this.le=n,this.Vb=e}function Us(t){Yi.call(this,0,1),this.U=t}function zs(t){this.c=t,this.re=[new fs,new Ts(this.c),new Ds(this.c),new Ws(this.c),new Bs,new ss(this.c)],this.Pd=[new Ts(this.c)]}function Gs(t,n,e,r){return t=Ti(n.bb(),t.tg.bind(t)),null!=r&&(t=new Fs(t,e,r).gc()),new er(t,n.da())}function Hs(t){this.qg=new es,this.Eg=new zs(t)}function Js(){this.df=sn()}function Xs(t,n){var e=t.df.get(n.getName())||null;return null===e&&(e=new Ks,t.df.set(n.getName(),e)),e}function Ys(t,n,e,r){var i=function(t,n,e,r){var i=!0;return e.forEach((function(t){if(i){var e=null===(t=Xs(this,t)).Ya||0==t.Ya.size;i=0==r?(null===t.Yb||0==t.Yb.size)&&e&&null===t.wc&&null!==t.fb&&t.fb==n:3==r?null===t.wc&&null===t.fb&&null!==t.Ya&&t.Ya.has(n):1==r?null===t.fb:e&&(null===t.fb||t.fb==n)}}),t),i}(t,n,e,r);return i&&function(t,n,e,r){e.forEach((function(t){t=Xs(this,t),0==r?(t.fb=null,t.wc=n):3==r?(null===t.Yb&&(t.Yb=jn()),t.Yb.add(n),null===t.Ya&&(t.Ya=jn()),t.Ya.delete(n)):1==r?(null===t.Ya&&(t.Ya=jn()),t.Ya.add(n)):2==r&&(t.fb=n)}),t)}(t,n,e,r),i}function Ks(){this.Yb=this.Ya=this.fb=this.wc=null}function Vs(){this.Ub=new na,this.Ec=new Js}function Zs(t,n){return(2>n.getPriority()||2>n.getPriority())&&function(t,n){n.forEach((function(t){Xs(this,t).fb=null}),t)}(t.Ec,n.da()),t.Ub.Ab(n),Qs(t),n.Db.ha}function Qs(t){for(var n=t.Ub.qa(),e=0;e<n.length;e++){var r=n[e];if(0==r.G()?ta(t,r,1,3):ta(t,r,2,0)){t.Ub.remove(r);var i=t;r.exec().then(i.Bg.bind(i,r),i.Ag.bind(i,r))}}}function ta(t,n,e,r){var i=!1;return Ys(t.Ec,n.W(),n.da(),e)&&(i=Ys(t.Ec,n.W(),n.da(),r)),i}function na(){this.Ub=[]}function ea(){this.Nc=sn()}function ra(){return cs||(cs=new ea),cs}function ia(t,n,e,r){return null!=t?null!=n?function(t,n,e,r){var i=sa(t);if(t=[],null!=i){var o=null;try{o=i.b(xn).table(n)}catch(t){}null!=o&&(n=i.b(wn),i=i.b(vn),(e=n.get(Ui(o)).Va(void 0,!1,e,r)).length&&(t=Wr(i,e).map((function(t){return t.m}))))}return oa(t)}(t,n,e,r):function(t){t=sa(t);var n={};if(null!=t){var e=t.b(wn);t.b(xn).oa().forEach((function(t){n[t.getName()]=e.get(Ui(t)).Y().ia}))}return oa(n)}(t):function(){var t={};return function(){return an(ra().Nc)}().forEach((function(n){"ns_"==n.substring(0,3)&&(n=n.substring(3),t[n]=sa(n).b(xn).version())})),oa(t)}()}function oa(t){var n="";try{n=JSON.stringify(t)}catch(t){}return n}function sa(t){var n=ra();return t=new mn("ns_"+t),n.md(t)?n.b(t):null}function aa(t,n){this.Qd=_e(),this.me=t,this.od=n,this.K=function(t){if(0<t.me.f.length)return t.me.f;var n=[];return t.me.from.forEach((function(t){t.lb().forEach((function(t){n.push(t)}))})),n}(this)}function ua(t,n,e,r){return{addedCount:e,index:t,object:r,removed:n,type:"splice"}}function ca(){this.fc=sn()}function ha(t,n){var e=jn();n.forEach((function(t){e.add(t.getName())}));var r=[];return t.fc.forEach((function(t){(t=t.Bc()).context.from.some((function(t){return e.has(t.getName())}))&&r.push(t)})),r}function la(t,n,e){n=p(null!=n.Wc?n.Wc:n).toString(),null!==(t=t.fc.get(n)||null)&&function(t,n){var e=function(t,n,e){var r=null===n?[]:n.entries,i=mt(r,e.entries,t.$.bind(t),(function(t){return r[t]}));n=[];for(var o=0,s=0;s<r.length;s++){var a=r[s];i[o]==a?o++:(a=ua(s,a=t.od.splice(o,1),0,t.od),n.push(a))}for(i=mt(r,e.entries,t.$.bind(t),(function(t,n){return e.entries[n]})),s=o=0;s<e.entries.length;s++)a=e.entries[s],i[o]==a?o++:(t.od.splice(s,0,a.va.m),a=ua(s,[],1,t.od),n.push(a));return n}(t.Rf,t.bf,n);t.bf=n,0<e.length&&t.Hc.forEach((function(t){t(e)}))}(t,e)}function fa(t){this.Hf=t,this.Hc=jn(),this.yg=[],this.bf=null,this.Rf=new aa(t.query,this.yg)}function pa(t){this.c=t,this.g=t.b(xn),this.aa=jn(this.g.oa()),this.Db=st()}function da(t,n){this.c=t,this.g=t.b(xn),this.aa=jn(this.g.oa()),this.Db=st(),this.Ba=n,this.Oa=t.b(bn),this.V=t.b(vn),this.C=t.b(wn)}function ya(t,n){this.c=t,this.Oa=t.b(bn),this.Ia=t.b(Sn),this.Ib=t.b(kn),this.aa=jn(n),this.Ra=new oe(this.c,this.aa),this.Db=st(),this.xc=st(),this.ze=st()}function ga(t){this.c=t,this.Ia=t.b(Sn),this.Kb=null,this.Ta=0,0==ma.size&&(ma.set(0,jn([1,4])),ma.set(1,jn([2])),ma.set(2,jn([3,5,6])),ma.set(3,jn([2,7])),ma.set(4,jn([7])),ma.set(5,jn([7])),ma.set(6,jn([7])))}us.prototype.toString=function(){return"join(type: "+(this.Rb?"outer":"inner")+", impl: "+hs[this.Dd]+", "+this.O.toString()+")"},us.prototype.ca=function(t){switch(this.Dd){case 0:return[Mi(this.O,t[0],t[1],this.Rb)];case 1:return[Ri(this.O,t[0],t[1],this.Ue,this.V)];default:var n=this.O,e=t[0];t=t[1];var r=this.Rb,i=[e,t];r||(i=Ai(n,e,t)),e=i[0],t=i[1];i=[];for(var o=e.u(),s=t.u(),a=e.entries.length,u=t.entries.length,c=u+256-1>>8,h=0;h<c;){for(var l=0;l<a;l++){var f=!1,p=Ce(e.entries[l],n.ga);if(null!==p)for(var d=Math.min(h+1<<8,u),y=h<<8;y<d;y++)if(n.vc(p,Ce(t.entries[y],n.ma))){f=!0;var g=je(e.entries[l],o,t.entries[y],s);i.push(g)}r&&!f&&i.push(Ii(n,e.entries[l],o))}h++}return[new me(i,n=e.u().concat(t.u()))]}},E(ls,Yi),ls.prototype.toString=function(){return"no_op_step("+this.lf[0].u().join(",")+")"},ls.prototype.ca=e("lf"),E(fs,vo),fs.prototype.gb=function(t,n){return this.H=t,this.Hd(n)?(Oi(t,(function(t){return t instanceof us})).forEach(this.Gg,this),this.H):t},fs.prototype.Hd=function(t){return 1<t.from.length},fs.prototype.Gg=function(t){if("eq"==t.O.F&&!t.Rb){var n=(e=function(n){return n instanceof os?null===(n=Fi(n.table)==Fi(t.O.ma.I())?t.O.ma:t.O.ga).Ca()?null:n:null})(We(t,0)),e=e(We(t,1));if(null!==n||null!==e){(function(t,n){t.Dd=1;var e=t.C.get(n.Ca().j());t.Ue={dg:n,wg:n==t.O.ga?t.O.ma:t.O.ga,index:e}})(t,e=null===e?n:e);var r=new me([],[Fi(e.I())]);!function(t,n,e){We(t,e).D=null,n.D=t,t.h[e]=n}(t,new ls([r]),e==n?0:1)}}},ds.prototype.bd=function(){return 1==this.Qb.f.length?[le()]:[this.Qb.f.map((function(){return le()}))]},ys.prototype.bd=function(t){if(this.af==t)return this.Ld;for(var n=gs(this,t),e=this.Qb.f.length-1;0<=e;e--){var r=this.Qb.f[e];if(null!==(n.get(r.ba.getName())||null))break;n.set(r.ba.getName(),new ge([le()]))}return this.Ld=1==this.Qb.f.length?un(n)[0].qa():ps(function(t,n){var e=sn(),r=0;return t.Qb.f.forEach((function(t){e.set(t.ba.getName(),r),r++})),an(n).sort((function(t,n){return e.get(t)-e.get(n)})).map((function(t){return n.get(t)}))}(this,n)),this.af=t,this.Ld},ms.prototype.kg=function(t){return t instanceof Je?!(!t.ld()||t.J.I()!=this.xd||"in"==t.F&&t.value.length>bs(this)):t instanceof qi&&(!(!t.ld()||We(t,0).J.I()!=this.xd)&&Pe(t).length<=bs(this))},E(Ss,Yi),Ss.prototype.toString=function(){return"index_range_scan("+this.index.j()+", ?, "+(this.pe?"reverse":"natural")+(this.Qc?", limit:?":"")+(this.Rc?", skip:?":"")+")"},Ss.prototype.Pc=function(t){var n=this.toString(),e=this.$e.bd(t);n=n.replace("?",e.toString());return this.Qc&&(n=n.replace("?",t.X.toString())),this.Rc&&(n=n.replace("?",t.L.toString())),n},Ss.prototype.ca=function(t,n,e){return t=this.$e.bd(e),n=this.C.get(this.index.j()),[ke(e=(1==t.length&&t[0]instanceof ue&&pe(t[0])?zr(n.get(t[0].from),!1,this.Qc?e.X:void 0,this.Rc?e.L:void 0):n.Va(t,this.pe,this.Qc?e.X:void 0,this.Rc?e.L:void 0)).map((function(t){return new cn(t,{})}),this),[this.index.mc])]},E(ks,Yi),ks.prototype.toString=r("multi_index_range_scan()"),ks.prototype.ca=function(t){var n=sn();return t.forEach((function(t){t.entries.forEach((function(t){n.set(t.va.id(),t)}))})),[new me(un(n),t[0].u())]},E(xs,Yi),xs.prototype.toString=r("select(?)"),xs.prototype.Pc=function(t){return t=Ve(t,this.jc),this.toString().replace("?",t.toString())},xs.prototype.ca=function(t,n,e){return[Ve(e,this.jc).eval(t[0])]},E(Ns,Yi),Ns.prototype.toString=function(){return"table_access_by_row_id("+this.U.getName()+")"},Ns.prototype.ca=function(t){return[ke(Wr(this.V,ve(t[0])),[Fi(this.U)])]},E(Ts,vo),Ts.prototype.gb=function(t,n){return this.H=t,Oi(t,(function(t){return t instanceof os})).forEach((function(t){var e=function(t){var n=[];for(t=t.getParent();t;){if(t instanceof xs)n.push(t);else if(t instanceof us)break;t=t.getParent()}return n}(t);if(0!=e.length){var r=vs(new ms(this.c,t.table),n,e.map((function(t){return Ve(n,t.jc)})));if(null!==r){var i=sn();e.forEach((function(t){i.set(t.jc,t)}),this),this.H=function(t,n,e,r){return(null===n.Ga?[]:n.Ga.values()).map((function(t){return e.get(t)})).forEach(Ci),n=new Ss(t.c,n.cb,Es(n),!1),Fe(t=new Ns(t.c,r.table),n),ji(r,r,t,n),n.bb()}(this,r,i,t)}}}),this),this.H},E(Cs,Yi),Cs.prototype.toString=function(){return"insert("+this.U.getName()+")"},Cs.prototype.ca=function(t,n,e){return $s(this.U,e.values,this.C),n.Ab(this.U,e.values),[ke(e.values,[this.U.getName()])]},E(js,Yi),js.prototype.toString=function(){return"insert_replace("+this.U.getName()+")"},js.prototype.ca=function(t,n,e){return $s(this.U,e.values,this.C),n.Wd(this.U,e.values),[ke(e.values,[this.U.getName()])]},E(Os,Yi),Os.prototype.toString=r("limit(?)"),Os.prototype.Pc=function(t){return this.toString().replace("?",t.X.toString())},Os.prototype.ca=function(t,n,e){return t[0].entries.splice(e.X),t},E(qs,Yi),(i=qs.prototype).toString=function(){return"order_by("+nr(this.N)+")"},i.ca=function(t){if(1==t.length){var n;n=t[0];for(var e=null,r=0;r<this.N.length;r++){var i=Xi(this.N[r].J);if(null!==n.$a&&n.$a.has(i.j())){e=i;break}}(null===(n=e)?t[0]:we(t[0],n)).entries.sort(this.Tf.bind(this))}else t.sort(this.Jg.bind(this));return t},i.$=function(t,n){var e,r,i,o=-1;do{o++,i=this.N[o].J,e=this.N[o].order,r=t(i),i=n(i)}while(r==i&&o+1<this.N.length);return t=r<i?-1:r>i?1:0,1==e?t:-t},i.Jg=function(t,n){return this.$((function(n){return n instanceof zi?we(t,n):Ce(t.entries[t.entries.length-1],n)}),(function(t){return t instanceof zi?we(n,t):Ce(n.entries[n.entries.length-1],t)}))},i.Tf=function(t,n){return this.$((function(n){return Ce(t,n)}),(function(t){return Ce(n,t)}))},E(Ms,Yi),Ms.prototype.toString=function(){var t="project("+this.f.toString();if(null!==this.Pb){var n=this.Pb.map((function(t){return t.j()})).join(", ");t=t+", groupBy("+n+")"}return t+")"},Ms.prototype.ca=function(t){return 0==t.length?t=[Se()]:1==t.length?(t=t[0],t=[0==this.f.length?t:As(new _s(t,this.f))]):t=[Is(t,this.f)],t},E(Rs,Yi),Rs.prototype.toString=r("skip(?)"),Rs.prototype.Pc=function(t){return this.toString().replace("?",t.L.toString())},Rs.prototype.ca=function(t,n,e){return[new me(t[0].entries.slice(e.L),t[0].u())]},E(Bs,vo),Bs.prototype.gb=function(t,n){if(!s(n.X)&&!s(n.L))return t;var e=function(t){return 0<(t=Oi(t,(function(t){return t instanceof Ss}),(function(t){return t instanceof Ms&&function(t){return t.f.some((function(t){return t instanceof zi}))||null!==t.Pb}(t)||t instanceof qs||1!=Pe(t).length||t instanceof xs}))).length?t[0]:null}(t);return null===e?t:(Oi(t,(function(t){return t instanceof Os||t instanceof Rs})).forEach((function(t){t instanceof Os?e.Qc=!0:e.Rc=!0,Ci(t)}),this),e.bb())},E(Ds,vo),Ds.prototype.gb=function(t,n){this.H=t;var e=function(t,n){return Oi(t.H,(function(t){return t instanceof xs&&((t=Ve(n,t.jc))instanceof qi&&"or"==t.pb)}))}(this,n);if(0==e.length)return this.H;var r,i=0;do{t=Ps(this,r=e[i++],n)}while(null===t&&i<e.length);return null===t||null===(n=function(t,n){return Oi(t.H,(function(t){return t instanceof os&&t.table.getName()==n}))[0]||null}(this,t[0].cb.mc))?this.H:this.H=function(t,n,e,r){var i=new Ns(t.c,e.table),o=new ks;return Fe(i,o),r.forEach((function(t){t=new Ss(this.c,t.cb,Es(t),!1),Fe(o,t)}),t),Ci(n),ji(e,e,i,o),o.bb()}(this,r,n,t)},E(Ws,vo),Ws.prototype.gb=function(t,n){if(null===(n=function(t,n){return s(n.N)?Oi(t,(function(t){return t instanceof qs}))[0]:null}(t,n)))return t;t:{var e=n;if(null!==(t=function(t){return 0<(t=Oi(t,(function(t){return t instanceof os}),(function(t){return 1!=Pe(t).length}))).length?t[0]:null}(We(n,0)))){var r;r=n.N;for(var i=null,o=t.table.Da(),a=0;a<o.length&&null===i;a++)i=Ls(o[a],r);if(null===(r=i)){t=e;break t}e=new Ss(this.c,r.cb,new ds(r.cb),r.Xe),Fe(r=new Ns(this.c,t.table),e),Ci(n),e=ji(t,t,r,e)}t=e}return t==n&&(t=n,null!==(e=function(t){return 0<(t=Oi(t,(function(t){return t instanceof Ss}),(function(t){return 1!=Pe(t).length}))).length?t[0]:null}(We(n,0)))&&(null!==(r=Ls(e.index,n.N))&&(e.pe=r.Xe,t=Ci(n).parent))),t.bb()},Fs.prototype.gc=function(){return this.Vb.forEach((function(t){this.Ha=t.gb(this.Ha,this.le)}),this),this.Ha},E(Us,Yi),Us.prototype.toString=function(){return"update("+this.U.getName()+")"},Us.prototype.ca=function(t,n,e){return t=t[0].entries.map((function(t){var n=this.U.kb(t.va.Ja());return e.set.forEach((function(t){n.m[t.J.getName()]=t.value}),this),n}),this),n.update(this.U,t),[Se()]},zs.prototype.create=function(t,n){var e=t.bb();if(e instanceof oo||e instanceof io)return Gs(this,t,n);if(e instanceof lo||e instanceof go||e instanceof mo)return Gs(this,t,n,this.re);if(e instanceof so||e instanceof ao)return Gs(this,t,n,this.Pd);throw new Gn(8)},zs.prototype.tg=function(t){if(t instanceof lo)return new Ms(t.f,t.Pb);if(t instanceof yo)return new as(t.f);if(t instanceof po)return new Ki(t.f);if(t instanceof fo)return new qs(t.N);if(t instanceof mo)return new Rs;if(t instanceof go)return new Os;if(t instanceof uo)return new xs(t.O.W());if(t instanceof ho)return new ko;if(t instanceof bo)return new us(this.c,t.O,t.Rb);if(t instanceof co)return new os(this.c,t.table);if(t instanceof so)return new rs(t.table);if(t instanceof ao)return new Us(t.table);if(t instanceof oo)return new js(this.c,t.table);if(t instanceof io)return new Cs(this.c,t.table);throw new Gn(514)},Js.prototype.releaseLock=function(t,n){n.forEach((function(n){Xs(this,n).releaseLock(t)}),this)},Ks.prototype.releaseLock=function(t){this.wc==t&&(this.wc=null),this.fb==t&&(this.fb=null),null===this.Ya||this.Ya.delete(t),null===this.Yb||this.Yb.delete(t)},Vs.prototype.Bg=function(t,n){this.Ec.releaseLock(t.W(),t.da()),t.Db.resolve(n),Qs(this)},Vs.prototype.Ag=function(t,n){this.Ec.releaseLock(t.W(),t.da()),t.Db.reject(n),Qs(this)},na.prototype.Ab=function(t){Ur(this.Ub,t,(function(t,n){var e=t.getPriority()-n.getPriority();return 0==e?t.W()-n.W():e}))},na.prototype.qa=function(){return this.Ub.slice()},na.prototype.remove=function(t){var n,e=this.Ub;return(n=0<=(t=j(e,t)))&&Array.prototype.splice.call(e,t,1),n},ea.prototype.clear=function(){this.Nc.clear()},ea.prototype.clear=ea.prototype.clear,ea.prototype.rb=function(t,n){return this.Nc.set(t.toString(),n),n},ea.prototype.registerService=ea.prototype.rb,ea.prototype.b=function(t){var n=this.Nc.get(t.toString())||null;if(null===n)throw new Gn(7,t.toString());return n},ea.prototype.getService=ea.prototype.b,ea.prototype.md=function(t){return this.Nc.has(t.toString())},ea.prototype.isRegistered=ea.prototype.md,aa.prototype.$=function(t,n){return this.K.every((function(e){return 6==e.G()||0==e.G()?Ce(t,e)===Ce(n,e):Ae(this.Qd,e.G(),"eq")(Ce(t,e),Ce(n,e))}),this)},ca.prototype.Cd=function(t,n){var e=p(t.query).toString(),r=this.fc.get(e)||null;null===r&&(r=new fa(t),this.fc.set(e,r)),r.Cd(n)},ca.prototype.ne=function(t,n){t=p(t.query).toString();var e=this.fc.get(t)||null;e.ne(n),0<e.Hc.size||this.fc.delete(t)},fa.prototype.Cd=function(t){this.Hc.has(t)||this.Hc.add(t)},fa.prototype.ne=function(t){return this.Hc.delete(t)},fa.prototype.Bc=function(){var t=this.Hf;return{context:t.query,je:Do(t)}},(i=pa.prototype).exec=function(){return et([new me([new xe(new cn(-1,function(t){var n=t.c.b(wn),e=t.c.b(vn),r={};return t.g.oa().forEach((function(t){var i=n.get(Ui(t)).Va();i=Wr(e,i).map((function(t){return t.m})),r[t.getName()]=i})),{name:t.g.name(),version:t.g.version(),tables:r}}(this)),!0)],[])])},i.G=r(0),i.da=e("aa"),i.W=function(){return p(this)},i.getPriority=r(0),(i=da.prototype).exec=function(){if(!(this.Oa instanceof xr||this.Oa instanceof Cr||this.Oa instanceof Dr))throw new Gn(300);var t;t:{t=this.g.oa();for(var n=0;n<t.length;++n)if(0<this.C.get(Ui(t[n])).Y().ia){t=!1;break t}t=!0}if(!t)throw new Gn(110);if(this.g.name()!=this.Ba.name||this.g.version()!=this.Ba.version)throw new Gn(111);if(null==this.Ba.tables)throw new Gn(112);return function(t){var n,e=new oe(t.c,t.aa);e=t.Oa.Fb(t.G(),On(t.aa),e);for(n in t.Ba.tables){var r=t.g.table(n),i=t.Ba.tables[n].map((function(t){return r.xb(t)})),o=e.I(n,r.kb,0);t.V.Wb(n,i);var s=t.C.lc.get(n)||[];i.forEach((function(t){s.forEach((function(n){var e=t.nb(n.getName());n.add(e,t.id())}))})),o.put(i)}return e.ka()}(this)},i.G=r(1),i.da=e("aa"),i.W=function(){return p(this)},i.getPriority=r(0),(i=ya.prototype).exec=function(){return this.ze.resolve(),this.xc.ha},i.G=r(1),i.da=e("aa"),i.W=function(){return p(this)},i.getPriority=r(2),i.ka=function(){return this.ja=this.Oa.Fb(this.G(),On(this.aa),this.Ra),this.ja.ka().then(function(){this.Mc(),this.xc.resolve()}.bind(this),function(t){this.Ra.Jb(),this.xc.reject(t)}.bind(this)),this.Db.ha},i.Jb=function(){return this.Ra.Jb(),this.xc.resolve(),this.Db.ha},i.Mc=function(){var t=ha(this.Ib,this.aa);0!=t.length&&(t=new ir(this.c,t),Zs(this.Ia,t))},i.Y=function(){var t=null;return null!=this.ja&&(t=this.ja.Y()),null===t?new yn(!1,0,0,0,0):t},w("lf.proc.Transaction",ga);var ma=sn();function ba(t,n){var e=ma.get(t.Ta)||null;if(null===e||!e.has(n))throw new Gn(107,t.Ta,n);t.Ta=n}function va(t){this.c=t,this.g=t.b(xn),this.hd=!1}function wa(t){if(!t.hd)throw new Gn(2)}function Ea(t,n,e,r,i,o){this.U=t,this.A=n,this.Ye=e,this.We=r,this.xf=i,this.Ka=o||null}function Sa(t){this.g=t,this.Id=new Hn,this.oe=new Hn,this.gf=new Hn,this.Ie=sn(),this.h=new Hn,this.Ee=new Hn,this.mf=new Hn,this.He=new Hn,function(t){t.g.oa().forEach((function(t){var n=t.getName();t.Mb.Ud.forEach((function(e){this.gf.set(n,this.g.table(e.Xa)),this.h.set(e.Xa,t),0==e.action?(this.oe.set(e.Xa,e),this.mf.set(e.Xa,t)):(this.Id.set(e.Xa,e),this.Ee.set(e.Xa,t)),this.Ie.set(t.getName()+"."+e.vb,e.Xa),this.He.set(e.Xa+"."+e.Jc,t.getName())}),this)}),t)}(this)}function ka(t,n,e){return null!=e?1==e?t.Id.get(n):t.oe.get(n):(e=t.Id.get(n),t=t.oe.get(n),null===e&&null===t?null:(e||[]).concat(t||[]))}function xa(t,n){return null===(t=n.get(t))?[]:t}function Na(t,n,e){return xa(n,null!=e?0==e?t.mf:t.Ee:t.h)}function Ta(t,n,e){this.sd=t,this.xg=n,this.Ud=e}function Ca(t,n,e){var r=t.ref.split(".");if(2!=r.length)throw new Gn(540,e);this.Ge=n,this.vb=t.local,this.Xa=r[0],this.Jc=r[1],this.name=n+"."+e,this.action=t.action,this.timing=t.timing}function $a(t){qa(t),this.Qd=_e(),this.A=t,this.K=sn(),this.zd=jn(),this.nc=jn(),this.nd=jn(),this.Fa=null,this.ta=sn(),this.rd=!1,this.yb=[]}function ja(t){this.name=t.name,this.order=t.order,this.autoIncrement=t.autoIncrement}ga.prototype.exec=function(t){ba(this,4);var n=[];try{t.forEach((function(t){t.ab(),n.push(t.Bc())}),this)}catch(t){return ba(this,7),rt(t)}return this.Kb=new xo(this.c,n),Zs(this.Ia,this.Kb).then(function(t){return ba(this,7),t.map((function(t){return be(t)}))}.bind(this),function(t){throw ba(this,7),t}.bind(this))},ga.prototype.exec=ga.prototype.exec,ga.prototype.Ff=function(t){return ba(this,1),this.Kb=new ya(this.c,t),function(t){return Zs(t.Ia,t),t.ze.ha}(this.Kb).then(function(){ba(this,2)}.bind(this))},ga.prototype.begin=ga.prototype.Ff,ga.prototype.Ef=function(t){ba(this,3);try{t.ab()}catch(t){return ba(this,7),rt(t)}return function(t,n){return(n=n.Bc()).je.bb().exec(t.Ra,n.context).then((function(t){return be(t[0])}),function(t){this.Ra.Jb();var n=new yt(t.name);throw this.xc.reject(n),t}.bind(t))}(this.Kb,t).then(function(t){return ba(this,2),t}.bind(this),function(t){throw ba(this,7),t}.bind(this))},ga.prototype.attach=ga.prototype.Ef,ga.prototype.ka=function(){return ba(this,5),this.Kb.ka().then(function(){ba(this,7)}.bind(this))},ga.prototype.commit=ga.prototype.ka,ga.prototype.Jb=function(){return ba(this,6),this.Kb.Jb().then(function(){ba(this,7)}.bind(this))},ga.prototype.rollback=ga.prototype.Jb,ga.prototype.Y=function(){if(7!=this.Ta)throw new Gn(105);return this.Kb.Y()},ga.prototype.stats=ga.prototype.Y,w("lf.proc.Database",va),va.prototype.Ea=function(t){return this.c.rb(xn,this.g),function(t,n){var e=t.b(xn),r=n||{};n=new Pr(e),t.rb(vn,n),n=null;var i=!1;switch(n=null!=r.storeType?r.storeType:(n=en()).fg?0:n.Ug?4:1,n){case 0:n=new xr(t,e);break;case 1:n=new Cr(e);break;case 5:n=new jr(e);break;case 4:n=new Dr(t,e,r.webSqlDbSize);break;case 3:n=new gr(e,r.firebase),i=!0;break;default:throw new Gn(300)}t.rb(bn,n);var o=new Ni;return t.rb(wn,o),n.Ea(r.onUpgrade).then((function(){var n=new Hs(t);return t.rb(En,n),n=new Vs,t.rb(Sn,n),n=new ca,t.rb(kn,n),o.Ea(e)})).then((function(){if(i){var n=new sr(t);n.Oa.subscribe(n.ee.bind(n))}return r.enableInspector&&(window.top["#lfInspect"]=ia),new xi(t).Ea(e)}))}(this.c,t).then(function(){return this.hd=!0,this.Ia=this.c.b(Sn),this}.bind(this))},va.prototype.init=va.prototype.Ea,va.prototype.zb=e("g"),va.prototype.getSchema=va.prototype.zb,va.prototype.select=function(t){return wa(this),new Uo(this.c,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])},va.prototype.select=va.prototype.select,va.prototype.Ab=function(){return wa(this),new Wo(this.c)},va.prototype.insert=va.prototype.Ab,va.prototype.Wd=function(){return wa(this),new Wo(this.c,!0)},va.prototype.insertOrReplace=va.prototype.Wd,va.prototype.update=function(t){return wa(this),new Ho(this.c,t)},va.prototype.update=va.prototype.update,va.prototype.delete=function(){return wa(this),new Po(this.c)},va.prototype.delete=va.prototype.delete,va.prototype.observe=function(t,n){wa(this),this.c.b(kn).Cd(t,n)},va.prototype.observe=va.prototype.observe,va.prototype.unobserve=function(t,n){wa(this),this.c.b(kn).ne(t,n)},va.prototype.unobserve=va.prototype.unobserve,va.prototype.Nf=function(){return wa(this),new ga(this.c)},va.prototype.createTransaction=va.prototype.Nf,va.prototype.close=function(){try{this.c.b(bn).close()}catch(t){}this.c.clear(),this.hd=!1},va.prototype.close=va.prototype.close,va.prototype.Xf=function(){wa(this);var t=new pa(this.c);return Zs(this.Ia,t).then((function(t){return be(t[0])[0]}))},va.prototype.export=va.prototype.Xf,va.prototype.import=function(t){return wa(this),t=new da(this.c,t),Zs(this.Ia,t).then(r(null))},va.prototype.import=va.prototype.import,w("lf.schema.BaseColumn",Ea),(i=Ea.prototype).getName=e("A"),i.j=function(){return Fi(this.U)+"."+this.A},i.toString=function(){return this.j()},i.I=e("U"),i.G=e("xf"),Ea.prototype.getType=Ea.prototype.G,Ea.prototype.Da=function(){return null==this.ta&&(this.ta=[],this.I().Da().forEach((function(t){-1!=t.f.map((function(t){return t.ba.getName()})).indexOf(this.A)&&this.ta.push(t)}),this)),this.ta},Ea.prototype.Ca=function(){if(!s(this.fa)){var t=this.Da().filter((function(t){return 1==t.f.length&&t.f[0].ba.getName()==this.getName()}),this);this.fa=0<t.length?t[0]:null}return this.fa},Ea.prototype.hc=e("We"),Ea.prototype.isNullable=Ea.prototype.hc,Ea.prototype.Dc=e("Ye"),Ea.prototype.Qa=function(t){return Bi(this,t,"eq")},Ea.prototype.eq=Ea.prototype.Qa,Ea.prototype.ef=function(t){return Bi(this,t,"neq")},Ea.prototype.neq=Ea.prototype.ef,Ea.prototype.rg=function(t){return Bi(this,t,"lt")},Ea.prototype.lt=Ea.prototype.rg,Ea.prototype.sg=function(t){return Bi(this,t,"lte")},Ea.prototype.lte=Ea.prototype.sg,Ea.prototype.ag=function(t){return Bi(this,t,"gt")},Ea.prototype.gt=Ea.prototype.ag,Ea.prototype.bg=function(t){return Bi(this,t,"gte")},Ea.prototype.gte=Ea.prototype.bg,Ea.prototype.match=function(t){return Bi(this,t,"match")},Ea.prototype.match=Ea.prototype.match,Ea.prototype.Gf=function(t,n){return Bi(this,[t,n],"between")},Ea.prototype.between=Ea.prototype.Gf,Ea.prototype.cg=function(t){return Bi(this,t,"in")},Ea.prototype.in=Ea.prototype.cg,Ea.prototype.mg=function(){return this.Qa(null)},Ea.prototype.isNull=Ea.prototype.mg,Ea.prototype.lg=function(){return this.ef(null)},Ea.prototype.isNotNull=Ea.prototype.lg,Ea.prototype.rc=function(t){return new Ea(this.U,this.A,this.Ye,this.We,this.xf,t)},Ea.prototype.as=Ea.prototype.rc,w("lf.schema.Constraint",Ta),Ta.prototype.$f=e("sd"),Ta.prototype.getPrimaryKey=Ta.prototype.$f,Ta.prototype.Zf=e("Ud"),Ta.prototype.getForeignKeys=Ta.prototype.Zf,w("lf.schema.TableBuilder",$a);var Oa=jn([0,6]);function qa(t){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(t))throw new Gn(502,t)}function _a(t,n){if(n==t.A)throw new Gn(546,n);if(t.K.has(n)||t.ta.has(n)||t.nc.has(n))throw new Gn(503,t.A+"."+n)}function Aa(t,n,e,r,i){var o=n;return(o="string"==typeof n[0]?n.map((function(t){return new ja({name:t,order:null!=r?r:1,autoIncrement:i||!1})})):n.map((function(t){return new ja(t)}))).forEach((function(t){if(!this.K.has(t.name))throw new Gn(508,this.A,t.name);if(e){var n=this.K.get(t.name);if(0==n||6==n)throw new Gn(509,this.A,t.name)}}),t),o}function Ia(t,n){this.g=new Da(t,n),this.tb=sn(),this.yc=!1,this.i=null,this.Yc=!1}function Ma(t){t.yc||(t.tb.forEach((function(t){!function(t,n){n.yb.forEach((function(t){var e=t.Xa;if(!this.tb.has(e))throw new Gn(536,t.name);e=this.tb.get(e).zb();var r=t.Jc;if(!e.hasOwnProperty(r))throw new Gn(537,t.name);if(n.zb()[t.vb].G()!=e[r].G())throw new Gn(538,t.name);if(!e[r].Dc())throw new Gn(539,t.name)}),t)}(this,t),t=t.zb(),this.g.M.set(t.getName(),t)}),t),un(t.tb).forEach(t.Kf,t),function(t){var n=sn();t.g.M.forEach((function(t,e){n.set(e,new Ba(e))}),t),t.tb.forEach((function(t,e){t.yb.forEach((function(t){n.get(t.Xa).Le.add(e)}))})),un(n).forEach((function(t){Ra(this,t,n)}),t)}(t),t.tb.clear(),t.yc=!0)}function Ra(t,n,e){n.ye||(n.ye=!0,n.fe=!0,n.Le.forEach((function(t){if((t=e.get(t)).ye){if(t.fe&&n!=t)throw new Gn(533)}else Ra(this,t,e)}),t)),n.fe=!1}function Ba(t){this.fe=this.ye=!1,this.Le=jn(),this.mc=t}function Da(t,n){this.A=t,this.Ua=n,this.M=sn(),this.ke={Sf:!1}}$a.prototype.zf=function(t,n){return qa(t),_a(this,t),this.K.set(t,n),Oa.has(n)&&this.Be([t]),this},$a.prototype.addColumn=$a.prototype.zf,$a.prototype.Bf=function(t,n){var e=this.A;return this.Fa="pk"+(e[0].toUpperCase()+e.substring(1)),qa(this.Fa),_a(this,this.Fa),function(t,n){var e=!1;if(n.forEach((function(t){var n=this.K.get(t.name);if(e=e||t.autoIncrement,t.autoIncrement&&3!=n)throw new Gn(504)}),t),e&&1<n.length)throw new Gn(505)}(this,t=Aa(this,t,!0,void 0,n)),1==t.length&&this.zd.add(t[0].name),this.nc.add(this.Fa),this.ta.set(this.Fa,t),this},$a.prototype.addPrimaryKey=$a.prototype.Bf,$a.prototype.Af=function(t,n){if(qa(t),_a(this,t),s((n=new Ca(n,this.A,t)).action)||(n.action=0),s(n.timing)||(n.timing=0),1==n.action&&1==n.timing)throw new Gn(506);if(!this.K.has(n.vb))throw new Gn(540,t);return this.yb.push(n),this.Ae(t,[n.vb],this.zd.has(n.vb)),this},$a.prototype.addForeignKey=$a.prototype.Af,$a.prototype.Cf=function(t,n){return qa(t),_a(this,t),1==(n=Aa(this,n,!0)).length&&(this.zd.add(n[0].name),function(t,n){t.yb.forEach((function(t){t.vb==n&&this.nc.add(t.name.split(".")[1])}),t)}(this,n[0].name)),this.ta.set(t,n),this.nc.add(t),this},$a.prototype.addUnique=$a.prototype.Cf,$a.prototype.Be=function(t){return Aa(this,t,!1).forEach((function(t){this.nd.add(t.name)}),this),this},$a.prototype.addNullable=$a.prototype.Be,$a.prototype.Ae=function(t,n,e,r){return qa(t),_a(this,t),n=Aa(this,n,!0,r),e&&this.nc.add(t),this.ta.set(t,n),this},$a.prototype.addIndex=$a.prototype.Ae,$a.prototype.Cb=n("rd"),$a.prototype.persistentIndex=$a.prototype.Cb,$a.prototype.zb=function(){return function(t){if(null!==t.Fa){var n=t.ta.get(t.Fa).map((function(t){return t.name})),e=0;if(t.yb.some((function(t,r){return e=r,-1!=n.indexOf(t.vb)}),t))throw new Gn(543,t.yb[e].name)}}(this),function(t){if(null!==t.Fa){var n=function(t){return t.name},e=JSON.stringify(t.ta.get(t.Fa).map(n));t.ta.forEach((function(t,r){if(r!=this.Fa&&(t=t.map(n),JSON.stringify(t)==e))throw new Gn(544,this.A+"."+r)}),t)}}(this),function(t){null===t.Fa||t.ta.get(t.Fa).forEach((function(t){if(this.nd.has(t.name))throw new Gn(545,this.A+"."+t.name)}),t)}(this),new(function(t){function n(){function n(n){return t.ta.get(n).map((function(t){return{ba:this[t.name],order:t.order,autoIncrement:t.autoIncrement}}),this)}var e=an(t.K).map((function(n){return this[n]=new Ea(this,n,t.zd.has(n),t.nd.has(n),t.K.get(n)),this[n]}),this),r=an(t.ta).map((function(e){return new Pi(t.A,e,t.nc.has(e),n.call(this,e))}),this);Li.call(this,t.A,e,r,t.rd);var i=null===t.Fa?null:new Pi(t.A,t.Fa,!0,n.call(this,t.Fa)),o=e.filter((function(n){return!t.nd.has(n.getName())}));this.Mb=new Ta(i,o,t.yb),this.qf=function(t,n,e){function r(t,r){this.K=n,this.ta=e,cn.call(this,t,r)}E(r,cn),r.prototype.Ke=function(){var t={};return this.K.forEach((function(n){t[n.getName()]=n.hc()?null:zn[n.G()]})),t},r.prototype.wf=function(){var t={};return this.K.forEach((function(n){var e=n.getName();n=n.G();var r=this.m[e];t[e]=0==n?null!=r?pn(r):null:2==n?null!=r?r.getTime():null:6==n?null!=r?r:null:r}),this),t};var i=function(t){var n=this.K.get(t.getName()),e=this.Qd.Ze.get(n)||null;return function(n){return e(n[t.getName()])}}.bind(t),o=function(t){var n=t.map((function(t){return i(t.ba)}));return function(t){return n.map((function(n){return n(t)}))}}.bind(t),s={};return e.forEach((function(t){var n=t.j();t=1==t.f.length?i(t.f[0].ba):o(t.f),s[n]=t})),r.prototype.nb=function(t){return-1!=t.indexOf("#")?this.id():s.hasOwnProperty(t)?s[t](this.m):null},r}(t,e,r)}return E(n,Li),n.prototype.xb=function(t){return new this.qf(hn++,t)},n.prototype.createRow=n.prototype.xb,n.prototype.kb=function(t){var n={};return this.lb().forEach((function(e){var r=e.getName();e=e.G();var i=t.value[r];if(0==e)if(null!=(e=i)&&""!=e){0!=e.length%2&&(e="0"+e);i=new ArrayBuffer(e.length/2);for(var o=new Uint8Array(i),s=0,a=0;s<e.length;s+=2)o[a++]=parseInt(e.substr(s,2),16);e=i}else e=null;else e=2==e?null!=i?new Date(i):null:i;n[r]=e}),this),new this.qf(t.id,n)},n.prototype.deserializeRow=n.prototype.kb,n.prototype.Ne=e("Mb"),n.prototype.getConstraint=n.prototype.Ne,n}(this))},$a.prototype.getSchema=$a.prototype.zb,w("lf.schema.Builder",Ia),Ia.prototype.Kf=function(t){t.yb.forEach((function(t){this.tb.get(t.Xa).yb.forEach((function(n){if(n.vb==t.Jc)throw new Gn(534,t.name)}),this)}),this)},Ia.prototype.zb=function(){return this.yc||Ma(this),this.g},Ia.prototype.getSchema=Ia.prototype.zb,Ia.prototype.Qe=function(){var t,n=new mn("ns_"+this.g.name()),e=ra();return e.md(n)?t=e.b(n):(t=new ea,e.rb(n,t)),t},Ia.prototype.getGlobal=Ia.prototype.Qe,Ia.prototype.connect=function(t){if(this.Yc||null!==this.i&&this.i.hd)throw new Gn(113);if(this.Yc=!0,null===this.i){var n=this.Qe();n.md(xn)||n.rb(xn,this.zb()),this.i=new va(n)}return this.i.Ea(t).then(function(t){return this.Yc=!1,t}.bind(this),function(t){throw this.Yc=!1,t}.bind(this))},Ia.prototype.connect=Ia.prototype.connect,Ia.prototype.Mf=function(t){if(this.tb.has(t))throw new Gn(503,t);if(this.yc)throw new Gn(535);return this.tb.set(t,new $a(t)),this.tb.get(t)},Ia.prototype.createTable=Ia.prototype.Mf,Ia.prototype.se=function(t){if(this.yc)throw new Gn(535);return this.g.se(t),this},Ia.prototype.setPragma=Ia.prototype.se,w("lf.schema.DatabaseSchema",Da),Da.prototype.name=e("A"),Da.prototype.name=Da.prototype.name,Da.prototype.version=e("Ua"),Da.prototype.version=Da.prototype.version,Da.prototype.oa=function(){return un(this.M)},Da.prototype.tables=Da.prototype.oa,Da.prototype.table=function(t){if(!this.M.has(t))throw new Gn(101,t);return this.M.get(t)},Da.prototype.table=Da.prototype.table,Da.prototype.info=function(){return this.Ve||(this.Ve=new Sa(this)),this.Ve},Da.prototype.Fg=e("ke"),Da.prototype.pragma=Da.prototype.Fg,Da.prototype.se=n("ke"),w("lf.schema.create",(function(t,n){return new Ia(t,n)})),Z.prototype.catch=Z.prototype.ve,Z.prototype.catch=Z.prototype.catch;try{t&&(t.exports=lf)}catch(t){}}.bind(window)()}));const rn="0a004f36100a460ca97d2d99f485af2f",on="http://localhost:5000";let sn,an,un,cn;async function hn(){const t="client_id="+rn,n="redirect_uri="+encodeURIComponent(on),e=nn();localStorage.setItem("state",e);const r="state="+e,i="scope="+encodeURIComponent("user-read-private playlist-read-private playlist-read-collaborative");return"https://accounts.spotify.com/authorize?"+[t,"response_type=code",n,await async function(t){return"code_challenge="+await en(t)}(function(){const t=nn();return localStorage.setItem("verifier",t),t}()),"code_challenge_method=S256",r,i].join("&")}const ln=async function(){clearInterval(cn),console.log("Refreshing access token...");let t=[];const n={grant_type:"refresh_token",refresh_token:an,client_id:rn};for(let e in n){const r=encodeURIComponent(e),i=encodeURIComponent(n[e]);t.push(r+"="+i)}t=t.join("&");const e=await fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t}),r=await e.json();sn=r.access_token,an=r.refresh_token,un=1e3*r.expires_in,cn=setInterval(ln,un-.1*un)};function fn(t){return{Authorization:"Bearer "+t}}async function pn(t,n){const e="https://api.spotify.com/v1/users/"+n,r=await fetch(e,{method:"GET",headers:fn(t)}),i=await r.json();return[i.display_name,i.images]}const dn=async function(){await async function(){gn=lf.schema.create("sctdb",1)}(),await async function(){gn.createTable("playlists").addColumn("id",lf.Type.STRING).addColumn("snapshot",lf.Type.STRING).addPrimaryKey(["id"]),gn.createTable("songs").addColumn("uid",lf.Type.STRING).addColumn("unix",lf.Type.INTEGER).addColumn("subm_name",lf.Type.STRING).addColumn("subm_id",lf.Type.STRING).addColumn("subm_link",lf.Type.STRING).addColumn("subm_images",lf.Type.OBJECT).addColumn("song_title",lf.Type.STRING).addColumn("song_link",lf.Type.STRING).addColumn("song_popularity",lf.Type.INTEGER).addColumn("song_duration",lf.Type.STRING).addColumn("song_islocal",lf.Type.BOOLEAN).addColumn("song_id",lf.Type.STRING).addColumn("album_name",lf.Type.STRING).addColumn("album_link",lf.Type.STRING).addColumn("artists",lf.Type.OBJECT).addColumn("playlist_name",lf.Type.STRING).addColumn("playlist_link",lf.Type.STRING).addColumn("playlist_id",lf.Type.STRING).addPrimaryKey(["uid"])}(),await async function(){const t=await gn.connect();mn=t,bn=mn.getSchema().table("playlists"),vn=mn.getSchema().table("songs")}();const t=await wn();return 0!=(await En(t)).songs.length},yn=async function(t){return await Sn(t)};let gn,mn,bn,vn;const wn=async function(){const t=await mn.select().from(bn).exec();let n={};t.forEach((t=>{n[t.id]=t.snapshot}));const e=await async function(t,n){let e="https://api.spotify.com/v1/me/playlists?limit=20",r=!0,i=n,o={update:{},remove:{}};for(;r;){const n=await fetch(e,{method:"GET",headers:fn(t)}),s=await n.json();for(let t of s.items){const n=t.id,a=t.snapshot_id;t.collaborative&&(i.hasOwnProperty(n)?(i[n]!=a&&(o.update[n]=a),delete i[n]):o.update[n]=a),null!=s.next?e=s.next:r=!1}}return o.remove=i,o}(sn,n);return Object.keys(e.remove).forEach((t=>{mn.delete().from(bn).where(bn.id.eq(t)).exec(),mn.delete().from(vn).where(vn.playlist_id.eq(t)).exec()})),Object.entries(e.update).forEach((t=>{const[n,e]=t,r=bn.createRow({id:n,snapshot:e});mn.insertOrReplace().into(bn).values([r]).exec(),mn.delete().from(vn).where(vn.playlist_id.eq(n)).exec()})),e},En=async function(t){const n=await async function(t,n){const e=n,r={market:"from_token",limit:"100",fields:"name,id,external_urls,tracks.items(is_local,track(duration_ms,external_urls,name,popularity,id),added_at,added_by(id,external_urls,href),track.album(external_urls,name),track.artists(external_urls,name)),tracks(limit,next,offset)"},i={market:"from_token",limit:"100",fields:"items(is_local,track(duration_ms,external_urls,name,popularity,id),added_at,added_by(id,external_urls,href),track.album(external_urls,name),track.artists(external_urls,name)),limit,next,offset"};let o={},s=[];for(let n in e){let e,u=!0,c=new URL("https://api.spotify.com/v1/playlists/"+n),h=r;for(c.search=new URLSearchParams(h).toString();u;){const n=await fetch(c,{method:"GET",headers:fn(t)});let r=await n.json();null!=e&&(e.tracks.items=r.items,e.tracks.next=r.next,r=e);for(let n of r.tracks.items)try{const e=(a=n.added_at,Date.parse(a)),i=n.added_by.id,u=n.added_by.external_urls.spotify,c=n.track.name,h=n.track.external_urls.spotify,l=n.track.popularity,f=n.is_local,p=n.track.id,d=n.track.duration_ms,y=n.track.album.name,g=n.track.album.external_urls.spotify,m=r.name,b=r.external_urls.spotify,v=r.id;let w=[];for(let t of n.track.artists)w.push({name:t.name,link:t.external_urls.spotify});o.hasOwnProperty(i)||(o[i]=await pn(t,i));const E=o[i][0];let S;try{S=o[i][1][0]}catch{S=null}const k={uid:`${e} ${v} ${p}`,unix:e,subm_name:E,subm_id:i,subm_link:u,subm_images:S,song_title:c,song_link:h,song_popularity:l,song_duration:d,song_islocal:f,song_id:p,album_name:y,album_link:g,artists:w,playlist_name:m,playlist_link:b,playlist_id:v};s.push(k)}catch{}null!=r.tracks.next?(c=new URL(r.tracks.next),e=r,h=i):u=!1}}var a;return{songs:s}}(sn,t.update);return n.songs.forEach((t=>{const n=vn.createRow(t);mn.insertOrReplace().into(vn).values([n]).exec()})),n},Sn=async function(t){return await mn.select().from(vn).orderBy(vn.unix,lf.Order.DESC).limit(t).exec()};function kn(t,n){if(n.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+n.length+" present")}function xn(t){kn(1,arguments);var n=Object.prototype.toString.call(t);return t instanceof Date||"object"==typeof t&&"[object Date]"===n?new Date(t.getTime()):"number"==typeof t||"[object Number]"===n?new Date(t):("string"!=typeof t&&"[object String]"!==n||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function Nn(t){var n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),t.getTime()-n.getTime()}function Tn(t,n){kn(2,arguments);var e=xn(t),r=xn(n),i=e.getTime()-r.getTime();return i<0?-1:i>0?1:i}function Cn(t,n){kn(2,arguments);var e=xn(t),r=xn(n),i=e.getFullYear()-r.getFullYear(),o=e.getMonth()-r.getMonth();return 12*i+o}function $n(t,n){kn(2,arguments);var e=xn(t),r=xn(n);return e.getTime()-r.getTime()}function jn(t){kn(1,arguments);var n=xn(t);return n.setHours(23,59,59,999),n}function On(t){kn(1,arguments);var n=xn(t),e=n.getMonth();return n.setFullYear(n.getFullYear(),e+1,0),n.setHours(23,59,59,999),n}function qn(t){kn(1,arguments);var n=xn(t);return jn(n).getTime()===On(n).getTime()}function _n(t,n){kn(2,arguments);var e,r=xn(t),i=xn(n),o=Tn(r,i),s=Math.abs(Cn(r,i));if(s<1)e=0;else{1===r.getMonth()&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-o*s);var a=Tn(r,i)===-o;qn(xn(t))&&1===s&&1===Tn(t,i)&&(a=!1),e=o*(s-Number(a))}return 0===e?0:e}function An(t,n){kn(2,arguments);var e=$n(t,n)/1e3;return e>0?Math.floor(e):Math.ceil(e)}var In={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function Mn(t){return function(n){var e=n||{},r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}var Rn={date:Mn({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Mn({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:Mn({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},Bn={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function Dn(t){return function(n,e){var r,i=e||{};if("formatting"===(i.context?String(i.context):"standalone")&&t.formattingValues){var o=t.defaultFormattingWidth||t.defaultWidth,s=i.width?String(i.width):o;r=t.formattingValues[s]||t.formattingValues[o]}else{var a=t.defaultWidth,u=i.width?String(i.width):t.defaultWidth;r=t.values[u]||t.values[a]}return r[t.argumentCallback?t.argumentCallback(n):n]}}function Pn(t){return function(n,e){var r=String(n),i=e||{},o=i.width,s=o&&t.matchPatterns[o]||t.matchPatterns[t.defaultMatchWidth],a=r.match(s);if(!a)return null;var u,c=a[0],h=o&&t.parsePatterns[o]||t.parsePatterns[t.defaultParseWidth];return u="[object Array]"===Object.prototype.toString.call(h)?function(t,n){for(var e=0;e<t.length;e++)if(n(t[e]))return e}(h,(function(t){return t.test(c)})):function(t,n){for(var e in t)if(t.hasOwnProperty(e)&&n(t[e]))return e}(h,(function(t){return t.test(c)})),u=t.valueCallback?t.valueCallback(u):u,{value:u=i.valueCallback?i.valueCallback(u):u,rest:r.slice(c.length)}}}var Wn,Ln={code:"en-US",formatDistance:function(t,n,e){var r;return e=e||{},r="string"==typeof In[t]?In[t]:1===n?In[t].one:In[t].other.replace("{{count}}",n),e.addSuffix?e.comparison>0?"in "+r:r+" ago":r},formatLong:Rn,formatRelative:function(t,n,e,r){return Bn[t]},localize:{ordinalNumber:function(t,n){var e=Number(t),r=e%100;if(r>20||r<10)switch(r%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"},era:Dn({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:Dn({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(t){return Number(t)-1}}),month:Dn({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:Dn({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:Dn({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(Wn={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(t){return parseInt(t,10)}},function(t,n){var e=String(t),r=n||{},i=e.match(Wn.matchPattern);if(!i)return null;var o=i[0],s=e.match(Wn.parsePattern);if(!s)return null;var a=Wn.valueCallback?Wn.valueCallback(s[0]):s[0];return{value:a=r.valueCallback?r.valueCallback(a):a,rest:e.slice(o.length)}}),era:Pn({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:Pn({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:Pn({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:Pn({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:Pn({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function Fn(t){return function(t,n){if(null==t)throw new TypeError("assign requires that input parameter not be null or undefined");for(var e in n=n||{})n.hasOwnProperty(e)&&(t[e]=n[e]);return t}({},t)}var Un=1440,zn=43200;function Gn(t){const n=t-1;return n*n*n+1}function Hn(t){return-t*(t-2)}function Jn(t){return--t*t*t*t*t+1}function Xn(t,{delay:e=0,duration:r=400,easing:i=n}={}){const o=+getComputedStyle(t).opacity;return{delay:e,duration:r,easing:i,css:t=>"opacity: "+t*o}}function Yn(t,{delay:n=0,duration:e=400,easing:r=Gn,x:i=0,y:o=0,opacity:s=0}={}){const a=getComputedStyle(t),u=+a.opacity,c="none"===a.transform?"":a.transform,h=u*(1-s);return{delay:n,duration:e,easing:r,css:(t,n)=>`\n\t\t\ttransform: ${c} translate(${(1-t)*i}px, ${(1-t)*o}px);\n\t\t\topacity: ${u-h*n}`}}function Kn(t,n,e={}){const r=getComputedStyle(t),i="none"===r.transform?"":r.transform,o=n.from.width/t.clientWidth,a=n.from.height/t.clientHeight,u=(n.from.left-n.to.left)/o,c=(n.from.top-n.to.top)/a,h=Math.sqrt(u*u+c*c),{delay:l=0,duration:f=(t=>120*Math.sqrt(t)),easing:p=Gn}=e;return{delay:l,duration:s(f)?f(h):f,easing:p,css:(t,n)=>`transform: ${i} translate(${n*u}px, ${n*c}px);`}}const Vn=[];function Zn(n,e=t){let r;const i=[];function o(t){if(a(n,t)&&(n=t,r)){const t=!Vn.length;for(let t=0;t<i.length;t+=1){const e=i[t];e[1](),Vn.push(e,n)}if(t){for(let t=0;t<Vn.length;t+=2)Vn[t][0](Vn[t+1]);Vn.length=0}}}return{set:o,update:function(t){o(t(n))},subscribe:function(s,a=t){const u=[s,a];return i.push(u),1===i.length&&(r=e(o)||t),s(n),()=>{const t=i.indexOf(u);-1!==t&&i.splice(t,1),0===i.length&&(r(),r=null)}}}}const Qn=(()=>{const{subscribe:t,update:n}=Zn([]);let e=0,r={};return{subscribe:t,push:(t,i={})=>{const o={id:++e,msg:t,...r,...i,theme:{...r.theme,...i.theme}};return n((t=>o.reversed?[...t,o]:[o,...t])),e},pop:t=>{n((n=>t?n.filter((n=>n.id!==t)):n.splice(1)))},set:(t,e)=>{n((n=>{const r=n.findIndex((n=>n.id===t));return r>-1&&(n[r]={...n[r],...e}),n}))},_opts:(t={})=>(r={...r,...t,theme:{...r.theme,...t.theme}},r)}})();function te(t){return"[object Date]"===Object.prototype.toString.call(t)}function ne(t,n){if(t===n||t!=t)return()=>t;const e=typeof t;if(e!==typeof n||Array.isArray(t)!==Array.isArray(n))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const e=n.map(((n,e)=>ne(t[e],n)));return t=>e.map((n=>n(t)))}if("object"===e){if(!t||!n)throw new Error("Object cannot be null");if(te(t)&&te(n)){t=t.getTime();const e=(n=n.getTime())-t;return n=>new Date(t+n*e)}const e=Object.keys(n),r={};return e.forEach((e=>{r[e]=ne(t[e],n[e])})),t=>{const n={};return e.forEach((e=>{n[e]=r[e](t)})),n}}if("number"===e){const e=n-t;return n=>t+n*e}throw new Error(`Cannot interpolate ${e} values`)}function ee(n){let e,r,i;return{c(){e=E("div"),e.textContent="",T(e,"class","_toastBtn svelte-1r0vvz1"),T(e,"role","button"),T(e,"tabindex","-1")},m(t,o){v(t,e,o),r||(i=N(e,"click",n[4]),r=!0)},p:t,d(t){t&&w(e),r=!1,i()}}}function re(n){let e,r,i,o,s,a=n[0].msg+"",u=n[0].dismissable&&ee(n);return{c(){e=E("div"),r=E("div"),i=k(),u&&u.c(),o=k(),s=E("progress"),T(r,"class","_toastMsg svelte-1r0vvz1"),T(s,"class","_toastBar svelte-1r0vvz1"),s.value=n[1],T(e,"class","_toastItem svelte-1r0vvz1")},m(t,n){v(t,e,n),b(e,r),r.innerHTML=a,b(e,i),u&&u.m(e,null),b(e,o),b(e,s)},p(t,[n]){1&n&&a!==(a=t[0].msg+"")&&(r.innerHTML=a),t[0].dismissable?u?u.p(t,n):(u=ee(t),u.c(),u.m(e,o)):u&&(u.d(1),u=null),2&n&&(s.value=t[1])},i:t,o:t,d(t){t&&w(e),u&&u.d()}}}function ie(t,r,i){let o,{item:s}=r;const a=function(t,r={}){const i=Zn(t);let o,s=t;function a(a,u){if(null==t)return i.set(t=a),Promise.resolve();s=a;let c=o,h=!1,{delay:l=0,duration:f=400,easing:d=n,interpolate:y=ne}=e(e({},r),u);if(0===f)return c&&(c.abort(),c=null),i.set(t=s),Promise.resolve();const g=p()+l;let b;return o=m((n=>{if(n<g)return!0;h||(b=y(t,a),"function"==typeof f&&(f=f(t,a)),h=!0),c&&(c.abort(),c=null);const e=n-g;return e>f?(i.set(t=a),!1):(i.set(t=b(d(e/f))),!0)})),o.promise}return{set:a,update:(n,e)=>a(n(s,t),e),subscribe:i.subscribe}}(s.initial,{duration:s.duration,easing:n});u(t,a,(t=>i(1,o=t)));let c=s.initial;return t.$$set=t=>{"item"in t&&i(0,s=t.item)},t.$$.update=()=>{9&t.$$.dirty&&c!==s.progress&&(1===s.progress||0===s.progress?a.set(s.progress).then((()=>Qn.pop(s.id))):a.set(s.progress),i(3,c=s.progress))},[s,o,a,c,()=>Qn.pop(s.id)]}class oe extends kt{constructor(t){super(),St(this,t,ie,re,a,{item:0})}}function se(t,n,e){const r=t.slice();return r[4]=n[e],r}function ae(n,e){let r,i,o,s,a,u,c,h,l=t;return i=new oe({props:{item:e[4]}}),{key:n,first:null,c(){r=E("li"),vt(i.$$.fragment),o=k(),T(r,"style",s=e[1](e[4].theme)),this.first=r},m(t,n){v(t,r,n),wt(i,r,null),b(r,o),h=!0},p(t,n){e=t;const o={};1&n&&(o.item=e[4]),i.$set(o),(!h||1&n&&s!==(s=e[1](e[4].theme)))&&T(r,"style",s)},r(){c=r.getBoundingClientRect()},f(){M(r),l(),R(r,c)},a(){l(),l=I(r,c,Kn,{duration:200})},i(t){h||(ct(i.$$.fragment,t),V((()=>{u&&u.end(1),a||(a=ft(r,Yn,e[4].intro)),a.start()})),h=!0)},o(t){ht(i.$$.fragment,t),a&&a.invalidate(),u=pt(r,Xn,{}),h=!1},d(t){t&&w(r),Et(i),t&&u&&u.end()}}}function ue(t){let n,e,r=[],i=new Map,o=t[0];const s=t=>t[4].id;for(let n=0;n<o.length;n+=1){let e=se(t,o,n),a=s(e);i.set(a,r[n]=ae(a,e))}return{c(){n=E("ul");for(let t=0;t<r.length;t+=1)r[t].c();T(n,"class","svelte-1wt6bln")},m(t,i){v(t,n,i);for(let t=0;t<r.length;t+=1)r[t].m(n,null);e=!0},p(t,[e]){if(3&e){o=t[0],at();for(let t=0;t<r.length;t+=1)r[t].r();r=bt(r,e,s,1,t,o,i,n,mt,ae,null,se);for(let t=0;t<r.length;t+=1)r[t].a();ut()}},i(t){if(!e){for(let t=0;t<o.length;t+=1)ct(r[t]);e=!0}},o(t){for(let t=0;t<r.length;t+=1)ht(r[t]);e=!1},d(t){t&&w(n);for(let t=0;t<r.length;t+=1)r[t].d()}}}function ce(t,n,e){let r;u(t,Qn,(t=>e(0,r=t)));let{options:i={}}=n;Qn._opts({duration:4e3,dismissable:!0,initial:1,progress:0,reversed:!1,intro:{x:256},theme:{}});return t.$$set=t=>{"options"in t&&e(2,i=t.options)},t.$$.update=()=>{4&t.$$.dirty&&Qn._opts(i)},[r,t=>Object.keys(t).reduce(((n,e)=>`${n}${e}:${t[e]};`),""),i]}class he extends kt{constructor(t){super(),St(this,t,ce,ue,a,{options:2})}}function le(t,n,e){const r=t.slice();return r[5]=n[e],r}function fe(t,n,e){const r=t.slice();return r[8]=n[e].name,r[9]=n[e].link,r[11]=e,r}function pe(n){return{c:t,m:t,p:t,i:t,o:t,d:t}}function de(t){let n,e,r,i=[],o=new Map,s=t[0];const a=t=>t[5].uid;for(let n=0;n<s.length;n+=1){let e=le(t,s,n),r=a(e);o.set(r,i[n]=ge(r,e))}return e=new Zt({}),e.$on("infinite",t[1]),{c(){for(let t=0;t<i.length;t+=1)i[t].c();n=k(),vt(e.$$.fragment)},m(t,o){for(let n=0;n<i.length;n+=1)i[n].m(t,o);v(t,n,o),wt(e,t,o),r=!0},p(t,e){if(5&e){s=t[0],at();for(let t=0;t<i.length;t+=1)i[t].r();i=bt(i,e,a,1,t,s,o,n.parentNode,mt,ge,n,le);for(let t=0;t<i.length;t+=1)i[t].a();ut()}},i(t){if(!r){for(let t=0;t<s.length;t+=1)ct(i[t]);ct(e.$$.fragment,t),r=!0}},o(t){for(let t=0;t<i.length;t+=1)ht(i[t]);ht(e.$$.fragment,t),r=!1},d(t){for(let n=0;n<i.length;n+=1)i[n].d(t);t&&w(n),Et(e,t)}}}function ye(t){let n,e,r,i,o=t[8]+"",s=ve(t[5].artists,t[11])+"";return{c(){n=E("a"),e=S(o),i=S(s),T(n,"href",r=t[9]),T(n,"target","_blank"),T(n,"class","svelte-151x6bb")},m(t,r){v(t,n,r),b(n,e),v(t,i,r)},p(t,a){1&a&&o!==(o=t[8]+"")&&C(e,o),1&a&&r!==(r=t[9])&&T(n,"href",r),1&a&&s!==(s=ve(t[5].artists,t[11])+"")&&C(i,s)},d(t){t&&w(n),t&&w(i)}}}function ge(n,e){let r,i,o,s,a,u,c,h,l,f,p,d,y,g,m,x,N,$,j,O,q,_,A,R,B,D,P,W,L,F,U=e[5].song_title+"",z=e[5].playlist_name+"",G=e[5].subm_name+"",H=e[2](e[5].unix)+"",J=t,X=e[5].artists,Y=[];for(let t=0;t<X.length;t+=1)Y[t]=ye(fe(e,X,t));return{key:n,first:null,c(){r=E("div"),i=E("div"),o=E("h1"),s=E("a"),a=S(U),c=k(),h=E("h2"),l=S("by \n\t\t\t");for(let t=0;t<Y.length;t+=1)Y[t].c();f=k(),p=E("h3"),d=S("added to "),y=E("a"),g=S(z),x=S(" \n\t\t\tby "),N=E("a"),$=E("b"),j=S(G),q=k(),_=S(H),A=k(),R=E("br"),B=k(),D=E("br"),T(s,"href",u=e[5].song_link),T(s,"target","_blank"),T(s,"class","svelte-151x6bb"),T(o,"class","svelte-151x6bb"),T(h,"class","svelte-151x6bb"),T(y,"href",m=e[5].playlist_link),T(y,"target","_blank"),T(y,"class","svelte-151x6bb"),T(N,"href",O=e[5].subm_link),T(N,"target","_blank"),T(N,"class","svelte-151x6bb"),T(p,"class","svelte-151x6bb"),this.first=r},m(t,n){v(t,r,n),b(r,i),b(i,o),b(o,s),b(s,a),b(i,c),b(i,h),b(h,l);for(let t=0;t<Y.length;t+=1)Y[t].m(h,null);b(i,f),b(i,p),b(p,d),b(p,y),b(y,g),b(p,x),b(p,N),b(N,$),b($,j),b(p,q),b(p,_),b(i,A),b(i,R),b(i,B),b(i,D),F=!0},p(t,n){if(e=t,(!F||1&n)&&U!==(U=e[5].song_title+"")&&C(a,U),(!F||1&n&&u!==(u=e[5].song_link))&&T(s,"href",u),1&n){let t;for(X=e[5].artists,t=0;t<X.length;t+=1){const r=fe(e,X,t);Y[t]?Y[t].p(r,n):(Y[t]=ye(r),Y[t].c(),Y[t].m(h,null))}for(;t<Y.length;t+=1)Y[t].d(1);Y.length=X.length}(!F||1&n)&&z!==(z=e[5].playlist_name+"")&&C(g,z),(!F||1&n&&m!==(m=e[5].playlist_link))&&T(y,"href",m),(!F||1&n)&&G!==(G=e[5].subm_name+"")&&C(j,G),(!F||1&n&&O!==(O=e[5].subm_link))&&T(N,"href",O),(!F||1&n)&&H!==(H=e[2](e[5].unix)+"")&&C(_,H)},r(){L=r.getBoundingClientRect()},f(){M(r),J()},a(){J(),J=I(r,L,Kn,{duration:2e3,easing:Jn})},i(t){F||(V((()=>{W&&W.end(1),P||(P=ft(i,Yn,{duration:3e3,x:-300,opacity:0,easing:Jn})),P.start()})),F=!0)},o(t){P&&P.invalidate(),W=pt(i,Yn,{duration:2e3,x:300,opacity:0,easing:Jn}),F=!1},d(t){t&&w(r),function(t,n){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(n)}(Y,t),t&&W&&W.end()}}}function me(n){let e;return{c(){e=E("p"),e.innerHTML="fetching your collaborative playlists from spotify.\n<br/> \n<br/>\nif this is your first time launching this page, this might take a while."},m(t,n){v(t,e,n)},p:t,i:t,o:t,d(t){t&&w(e)}}}function be(t){let n,e,r={ctx:t,current:null,token:null,hasCatch:!1,pending:me,then:de,catch:pe,blocks:[,,,]};return yt(dn(),r),{c(){n=E("main"),r.block.c()},m(t,i){v(t,n,i),r.block.m(n,r.anchor=null),r.mount=()=>n,r.anchor=null,e=!0},p(n,[e]){{const i=(t=n).slice();r.block.p(i,e)}},i(t){e||(ct(r.block),e=!0)},o(t){for(let t=0;t<3;t+=1){ht(r.blocks[t])}e=!1},d(t){t&&w(n),r.block.d(),r.token=null,r=null}}}function ve(t,n){return t.length-1==n?"":t.length-2==n?" & ":", "}function we(t,n,e){let r=20,i=[],o=!1;return P((()=>{setInterval((()=>{console.log("Fetching new data..."),dn().then((t=>{t&&yn(r).then((t=>{e(0,i=t),o=!0})).then(Qn.push("Yo, someone did something!"))}))}),12e4),setInterval((()=>{e(0,i)}),1e4)})),[i,function({detail:{loaded:t,complete:n}}){yn(r).then((s=>{s.length!=i.length||o?(r+=20,e(0,i=s),o=!1,t()):n()}))},function(t){return function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};kn(2,arguments);var r=e.locale||Ln;if(!r.formatDistance)throw new RangeError("locale must contain formatDistance property");var i=Tn(t,n);if(isNaN(i))throw new RangeError("Invalid time value");var o,s,a=Fn(e);a.addSuffix=Boolean(e.addSuffix),a.comparison=i,i>0?(o=xn(n),s=xn(t)):(o=xn(t),s=xn(n));var u,c=An(s,o),h=(Nn(s)-Nn(o))/1e3,l=Math.round((c-h)/60);if(l<2)return e.includeSeconds?c<5?r.formatDistance("lessThanXSeconds",5,a):c<10?r.formatDistance("lessThanXSeconds",10,a):c<20?r.formatDistance("lessThanXSeconds",20,a):c<40?r.formatDistance("halfAMinute",null,a):c<60?r.formatDistance("lessThanXMinutes",1,a):r.formatDistance("xMinutes",1,a):0===l?r.formatDistance("lessThanXMinutes",1,a):r.formatDistance("xMinutes",l,a);if(l<45)return r.formatDistance("xMinutes",l,a);if(l<90)return r.formatDistance("aboutXHours",1,a);if(l<Un){var f=Math.round(l/60);return r.formatDistance("aboutXHours",f,a)}if(l<2520)return r.formatDistance("xDays",1,a);if(l<zn){var p=Math.round(l/Un);return r.formatDistance("xDays",p,a)}if(l<86400)return u=Math.round(l/zn),r.formatDistance("aboutXMonths",u,a);if((u=_n(s,o))<12){var d=Math.round(l/zn);return r.formatDistance("xMonths",d,a)}var y=u%12,g=Math.floor(u/12);return y<3?r.formatDistance("aboutXYears",g,a):y<9?r.formatDistance("overXYears",g,a):r.formatDistance("almostXYears",g+1,a)}(new Date(t),new Date,{addSuffix:!0})}]}class Ee extends kt{constructor(t){super(),St(this,t,we,be,a,{})}}function Se(n){let e;return{c(){e=E("h1"),e.innerHTML='what is this project?\n<p class="svelte-1uxb3mi">this website can help you keep track of all the activity in your collaborative playlist.\nonce logged in, you will be able to see who added what song by what artist to which playlist how long ago. and it&#39;s all sorted chronologically! just keep scrolling to travel back in time. while you browse the page periodically checks if anything has happened and, if anything has, will automatically adjust your feed and tell you. no refreshing required.</p>\nwhy is this project a thing?\n<p class="svelte-1uxb3mi">there&#39;s a good chance this isn&#39;t something you want (or need). however if you and peers enjoy actively making use of the collaborative playlist feature then this is supposed to serve you as a fairly easy and comfortable way of keeping up with recently added songs across a large quantity of playlists.</p>\nis this it?\n<p class="svelte-1uxb3mi">this is a passion project i work on in my spare time. i am aware the current version is very basic but more features are planned and in development. if you want more information or are looking to contribute feel free to check out the <a href="https://github.com/sebastian-stubenvoll/spotify-collab-tracker" target="_blank" class="svelte-1uxb3mi">the github page</a>.</p>',T(e,"class","svelte-1uxb3mi")},m(t,n){v(t,e,n)},p:t,i:t,o:t,d(t){t&&w(e)}}}class ke extends kt{constructor(t){super(),St(this,t,null,Se,a,{})}}function xe(n){let e,r,i,o,s,a,u,c,h,l,f,p,d,y;return{c(){e=E("h1"),r=S("how does this website access my data?\n"),i=E("p"),i.innerHTML="once you&#39;ve logged in via spotify and granted the required permissions all the requests are sent from <b>your browser directly to spotify</b>. this means none of your private spotify data is ever accessed by the server hosting this website.",o=S("\nhow is my data stored?\n"),s=E("p"),a=S("all of your data is stored "),u=E("b"),u.textContent="locally",c=S(" inside if your browser (usually indexedDB). this is only done to keep the number of requests as low as possible. you can delete the locally stored information at any point by via your browser or clicking "),h=E("button"),h.innerHTML="<b>here</b>",l=S("."),f=S("\ni'm still not sure...\n"),p=E("p"),p.innerHTML='if you have any remaining concerns, feel free to check out the <a href="https://github.com/sebastian-stubenvoll/spotify-collab-tracker" target="_blank" class="svelte-1ptonf3"><b>source code</b></a>.',T(i,"class","svelte-1ptonf3"),T(h,"class","svelte-1ptonf3"),T(s,"class","svelte-1ptonf3"),T(p,"class","svelte-1ptonf3"),T(e,"class","svelte-1ptonf3")},m(t,g){v(t,e,g),b(e,r),b(e,i),b(e,o),b(e,s),b(s,a),b(s,u),b(s,c),b(s,h),b(s,l),b(e,f),b(e,p),d||(y=N(h,"click",n[0]),d=!0)},p:t,i:t,o:t,d(t){t&&w(e),d=!1,y()}}}function Ne(t){return[()=>{indexedDB.deleteDatabase("sctdb"),Qn.push("All your data has been deleted!")}]}class Te extends kt{constructor(t){super(),St(this,t,Ne,xe,a,{})}}function Ce(n){return{c:t,m:t,p:t,i:t,o:t,d:t}}function $e(n){let e,r,i,s,a,u,c,h,l,f,p,d;return{c(){e=E("h1"),r=E("p"),i=E("a"),s=S("login with spotify"),a=k(),u=E("br"),c=k(),h=E("button"),h.textContent="privacy",l=E("button"),l.textContent="about",T(i,"href",n[6]),T(i,"class","svelte-1qhf4fy"),T(h,"class","svelte-1qhf4fy"),T(l,"class","svelte-1qhf4fy"),T(e,"class","svelte-1qhf4fy")},m(t,o){v(t,e,o),b(e,r),b(r,i),b(i,s),b(r,a),b(r,u),b(r,c),b(r,h),b(r,l),p||(d=[N(h,"click",n[3]),N(l,"click",n[2])],p=!0)},p(t,e){n=t},i(t){f||V((()=>{f=ft(r,Yn,{duration:2e3,y:n[0]/3,opacity:0,easing:Hn}),f.start()}))},o:t,d(t){t&&w(e),p=!1,o(d)}}}function je(n){let e;return{c(){e=E("h1"),T(e,"class","svelte-1qhf4fy")},m(t,n){v(t,e,n)},p:t,i:t,o:t,d(t){t&&w(e)}}}function Oe(n){let e,r,i,o,s;V(n[4]);let a={ctx:n,current:null,token:null,hasCatch:!1,pending:je,then:$e,catch:Ce,value:6};return yt(n[1],a),{c(){e=E("link"),r=k(),i=x(),a.block.c(),T(e,"rel","stylesheet"),T(e,"href","login.css")},m(t,u){b(document.head,e),v(t,r,u),v(t,i,u),a.block.m(t,a.anchor=u),a.mount=()=>i.parentNode,a.anchor=i,o||(s=N(window,"resize",n[4]),o=!0)},p(t,[e]){{const r=(n=t).slice();r[6]=a.resolved,a.block.p(r,e)}},i(t){ct(a.block)},o:t,d(t){w(e),t&&w(r),t&&w(i),a.block.d(t),a.token=null,a=null,o=!1,s()}}}function qe(t,n,e){const r=hn();let i;const{open:o}=(s="simple-modal",D().$$.context.get(s));var s;return[i,r,()=>o(ke),()=>o(Te),function(){e(0,i=window.innerHeight)}]}class _e extends kt{constructor(t){super(),St(this,t,qe,Oe,a,{})}}const{window:Ae}=gt;function Ie(t){let n,e,r,i,a,u,c,h,l,f,p,d=t[0].closeButton&&Me(t);var y=t[1];return y&&(u=new y({})),{c(){n=E("div"),e=E("div"),r=E("div"),d&&d.c(),i=k(),a=E("div"),u&&vt(u.$$.fragment),T(a,"class","content svelte-2wx9ab"),T(a,"style",t[8]),T(r,"class","window svelte-2wx9ab"),T(r,"role","dialog"),T(r,"aria-modal","true"),T(r,"style",t[7]),T(e,"class","window-wrap svelte-2wx9ab"),T(e,"style",t[6]),T(n,"class","bg svelte-2wx9ab"),T(n,"style",t[5])},m(o,c){v(o,n,c),b(n,e),b(e,r),d&&d.m(r,null),b(r,i),b(r,a),u&&wt(u,a,null),t[37](r),t[38](e),t[39](n),l=!0,f||(p=[N(r,"introstart",(function(){s(t[12])&&t[12].apply(this,arguments)})),N(r,"outrostart",(function(){s(t[13])&&t[13].apply(this,arguments)})),N(r,"introend",(function(){s(t[14])&&t[14].apply(this,arguments)})),N(r,"outroend",(function(){s(t[15])&&t[15].apply(this,arguments)})),N(n,"click",t[19])],f=!0)},p(o,s){if((t=o)[0].closeButton?d?(d.p(t,s),1&s[0]&&ct(d,1)):(d=Me(t),d.c(),ct(d,1),d.m(r,i)):d&&(at(),ht(d,1,1,(()=>{d=null})),ut()),y!==(y=t[1])){if(u){at();const t=u;ht(t.$$.fragment,1,0,(()=>{Et(t,1)})),ut()}y?(u=new y({}),vt(u.$$.fragment),ct(u.$$.fragment,1),wt(u,a,null)):u=null}(!l||256&s[0])&&T(a,"style",t[8]),(!l||128&s[0])&&T(r,"style",t[7]),(!l||64&s[0])&&T(e,"style",t[6]),(!l||32&s[0])&&T(n,"style",t[5])},i(e){l||(ct(d),u&&ct(u.$$.fragment,e),V((()=>{c||(c=dt(r,t[11],t[0].transitionWindowProps,!0)),c.run(1)})),V((()=>{h||(h=dt(n,t[10],t[0].transitionBgProps,!0)),h.run(1)})),l=!0)},o(e){ht(d),u&&ht(u.$$.fragment,e),c||(c=dt(r,t[11],t[0].transitionWindowProps,!1)),c.run(0),h||(h=dt(n,t[10],t[0].transitionBgProps,!1)),h.run(0),l=!1},d(e){e&&w(n),d&&d.d(),u&&Et(u),t[37](null),e&&c&&c.end(),t[38](null),t[39](null),e&&h&&h.end(),f=!1,o(p)}}}function Me(t){let n,e,r,i,o;const s=[Be,Re],a=[];function u(t,e){return 1&e[0]&&(n=!!t[16](t[0].closeButton)),n?0:1}return e=u(t,[-1]),r=a[e]=s[e](t),{c(){r.c(),i=x()},m(t,n){a[e].m(t,n),v(t,i,n),o=!0},p(t,n){let o=e;e=u(t,n),e===o?a[e].p(t,n):(at(),ht(a[o],1,1,(()=>{a[o]=null})),ut(),r=a[e],r?r.p(t,n):(r=a[e]=s[e](t),r.c()),ct(r,1),r.m(i.parentNode,i))},i(t){o||(ct(r),o=!0)},o(t){ht(r),o=!1},d(t){a[e].d(t),t&&w(i)}}}function Re(n){let e,r,i;return{c(){e=E("button"),T(e,"class","close svelte-2wx9ab"),T(e,"style",n[9])},m(t,o){v(t,e,o),r||(i=N(e,"click",n[17]),r=!0)},p(t,n){512&n[0]&&T(e,"style",t[9])},i:t,o:t,d(t){t&&w(e),r=!1,i()}}}function Be(t){let n,e,r;var i=t[0].closeButton;function o(t){return{props:{onClose:t[17]}}}return i&&(n=new i(o(t))),{c(){n&&vt(n.$$.fragment),e=x()},m(t,i){n&&wt(n,t,i),v(t,e,i),r=!0},p(t,r){if(i!==(i=t[0].closeButton)){if(n){at();const t=n;ht(t.$$.fragment,1,0,(()=>{Et(t,1)})),ut()}i?(n=new i(o(t)),vt(n.$$.fragment),ct(n.$$.fragment,1),wt(n,e.parentNode,e)):n=null}},i(t){r||(n&&ct(n.$$.fragment,t),r=!0)},o(t){n&&ht(n.$$.fragment,t),r=!1},d(t){t&&w(e),n&&Et(n,t)}}}function De(t){let n,e,r,i,o=t[1]&&Ie(t);const s=t[36].default,a=c(s,t,t[35],null);return{c(){o&&o.c(),n=k(),a&&a.c()},m(s,u){o&&o.m(s,u),v(s,n,u),a&&a.m(s,u),e=!0,r||(i=N(Ae,"keydown",t[18]),r=!0)},p(t,e){t[1]?o?(o.p(t,e),2&e[0]&&ct(o,1)):(o=Ie(t),o.c(),ct(o,1),o.m(n.parentNode,n)):o&&(at(),ht(o,1,1,(()=>{o=null})),ut()),a&&a.p&&16&e[1]&&l(a,s,t,t[35],e,null,null)},i(t){e||(ct(o),ct(a,t),e=!0)},o(t){ht(o),ht(a,t),e=!1},d(t){o&&o.d(t),t&&w(n),a&&a.d(t),r=!1,i()}}}function Pe(t,n,e){let{$$slots:r={},$$scope:i}=n;const o=L(),s=F;let{show:a=null}=n,{key:u="simple-modal"}=n,{closeButton:c=!0}=n,{closeOnEsc:h=!0}=n,{closeOnOuterClick:l=!0}=n,{styleBg:f={}}=n,{styleWindowWrap:p={}}=n,{styleWindow:d={}}=n,{styleContent:y={}}=n,{styleCloseButton:g={}}=n,{setContext:m=s}=n,{transitionBg:b=Xn}=n,{transitionBgProps:v={duration:250}}=n,{transitionWindow:w=b}=n,{transitionWindowProps:E=v}=n;const S={closeButton:c,closeOnEsc:h,closeOnOuterClick:l,styleBg:f,styleWindowWrap:p,styleWindow:d,styleContent:y,styleCloseButton:g,transitionBg:b,transitionBgProps:v,transitionWindow:w,transitionWindowProps:E};let k,x,N,T,C,$,j,O,q,_,A,I,M,R={...S},B=null;const D=t=>Object.keys(t).reduce(((n,e)=>`${n}; ${(t=>t.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase())(e)}: ${t[e]}`),""),P=t=>!!(t&&t.constructor&&t.call&&t.apply),U=()=>{};let G=U,H=U,J=U,X=U;const Y=(t,n={},r={},i={})=>{e(1,B=function(t,n={}){return function(e){return new t({...e,props:{...n,...e.props}})}}(t,n)),e(0,R={...S,...r}),e(5,C=D(R.styleBg)),e(6,$=D(R.styleWindowWrap)),e(7,j=D(R.styleWindow)),e(8,O=D(R.styleContent)),e(9,q=D(R.styleCloseButton)),e(10,_=R.transitionBg),e(11,A=R.transitionWindow),V(),e(12,G=t=>{i.onOpen&&i.onOpen(t),o("open"),o("opening")}),e(13,H=t=>{i.onClose&&i.onClose(t),o("close"),o("closing")}),e(14,J=t=>{i.onOpened&&i.onOpened(t),o("opened")}),e(15,X=t=>{i.onClosed&&i.onClosed(t),o("closed")})},K=(t={})=>{e(13,H=t.onClose||H),e(15,X=t.onClosed||X),e(1,B=null),Z()},V=()=>{T=window.scrollY,I=document.body.style.position,M=document.body.style.overflow,document.body.style.position="fixed",document.body.style.top=`-${T}px`,document.body.style.overflow="hidden"},Z=()=>{document.body.style.position=I||"",document.body.style.top="",document.body.style.overflow=M||"",window.scrollTo(0,T)};return m(u,{open:Y,close:K}),W((()=>{K()})),t.$$set=t=>{"show"in t&&e(20,a=t.show),"key"in t&&e(21,u=t.key),"closeButton"in t&&e(22,c=t.closeButton),"closeOnEsc"in t&&e(23,h=t.closeOnEsc),"closeOnOuterClick"in t&&e(24,l=t.closeOnOuterClick),"styleBg"in t&&e(25,f=t.styleBg),"styleWindowWrap"in t&&e(26,p=t.styleWindowWrap),"styleWindow"in t&&e(27,d=t.styleWindow),"styleContent"in t&&e(28,y=t.styleContent),"styleCloseButton"in t&&e(29,g=t.styleCloseButton),"setContext"in t&&e(30,m=t.setContext),"transitionBg"in t&&e(31,b=t.transitionBg),"transitionBgProps"in t&&e(32,v=t.transitionBgProps),"transitionWindow"in t&&e(33,w=t.transitionWindow),"transitionWindowProps"in t&&e(34,E=t.transitionWindowProps),"$$scope"in t&&e(35,i=t.$$scope)},t.$$.update=()=>{1048576&t.$$.dirty[0]&&(P(a)?Y(a):K())},[R,B,k,x,N,C,$,j,O,q,_,A,G,H,J,X,P,K,t=>{if(R.closeOnEsc&&B&&"Escape"===t.key&&(t.preventDefault(),K()),B&&"Tab"===t.key){const n=N.querySelectorAll("*"),e=Array.from(n).filter((t=>t.tabIndex>=0));let r=e.indexOf(document.activeElement);-1===r&&t.shiftKey&&(r=0),r+=e.length+(t.shiftKey?-1:1),r%=e.length,e[r].focus(),t.preventDefault()}},t=>{!R.closeOnOuterClick||t.target!==k&&t.target!==x||(t.preventDefault(),K())},a,u,c,h,l,f,p,d,y,g,m,b,v,w,E,i,r,function(t){z[t?"unshift":"push"]((()=>{N=t,e(4,N)}))},function(t){z[t?"unshift":"push"]((()=>{x=t,e(3,x)}))},function(t){z[t?"unshift":"push"]((()=>{k=t,e(2,k)}))}]}class We extends kt{constructor(t){super(),St(this,t,Pe,De,a,{show:20,key:21,closeButton:22,closeOnEsc:23,closeOnOuterClick:24,styleBg:25,styleWindowWrap:26,styleWindow:27,styleContent:28,styleCloseButton:29,setContext:30,transitionBg:31,transitionBgProps:32,transitionWindow:33,transitionWindowProps:34},[-1,-1])}}var Le="%[a-f0-9]{2}",Fe=new RegExp(Le,"gi"),Ue=new RegExp("("+Le+")+","gi");function ze(t,n){try{return decodeURIComponent(t.join(""))}catch(t){}if(1===t.length)return t;n=n||1;var e=t.slice(0,n),r=t.slice(n);return Array.prototype.concat.call([],ze(e),ze(r))}function Ge(t){try{return decodeURIComponent(t)}catch(r){for(var n=t.match(Fe),e=1;e<n.length;e++)n=(t=ze(n,e).join("")).match(Fe);return t}}var He=function(t){if("string"!=typeof t)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch(n){return function(t){for(var n={"%FE%FF":"","%FF%FE":""},e=Ue.exec(t);e;){try{n[e[0]]=decodeURIComponent(e[0])}catch(t){var r=Ge(e[0]);r!==e[0]&&(n[e[0]]=r)}e=Ue.exec(t)}n["%C2"]="";for(var i=Object.keys(n),o=0;o<i.length;o++){var s=i[o];t=t.replace(new RegExp(s,"g"),n[s])}return t}(t)}},Je=(t,n)=>{if("string"!=typeof t||"string"!=typeof n)throw new TypeError("Expected the arguments to be of type `string`");if(""===n)return[t];const e=t.indexOf(n);return-1===e?[t]:[t.slice(0,e),t.slice(e+n.length)]},Xe=function(t,n){for(var e={},r=Object.keys(t),i=Array.isArray(n),o=0;o<r.length;o++){var s=r[o],a=t[s];(i?-1!==n.indexOf(s):n(s,a,t))&&(e[s]=a)}return e},Ye=Qt((function(t,n){function e(t){if("string"!=typeof t||1!==t.length)throw new TypeError("arrayFormatSeparator must be single character string")}function r(t,n){return n.encode?n.strict?encodeURIComponent(t).replace(/[!'()*]/g,(t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`)):encodeURIComponent(t):t}function i(t,n){return n.decode?He(t):t}function o(t){return Array.isArray(t)?t.sort():"object"==typeof t?o(Object.keys(t)).sort(((t,n)=>Number(t)-Number(n))).map((n=>t[n])):t}function s(t){const n=t.indexOf("#");return-1!==n&&(t=t.slice(0,n)),t}function a(t){const n=(t=s(t)).indexOf("?");return-1===n?"":t.slice(n+1)}function u(t,n){return n.parseNumbers&&!Number.isNaN(Number(t))&&"string"==typeof t&&""!==t.trim()?t=Number(t):!n.parseBooleans||null===t||"true"!==t.toLowerCase()&&"false"!==t.toLowerCase()||(t="true"===t.toLowerCase()),t}function c(t,n){e((n=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},n)).arrayFormatSeparator);const r=function(t){let n;switch(t.arrayFormat){case"index":return(t,e,r)=>{n=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),n?(void 0===r[t]&&(r[t]={}),r[t][n[1]]=e):r[t]=e};case"bracket":return(t,e,r)=>{n=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),n?void 0!==r[t]?r[t]=[].concat(r[t],e):r[t]=[e]:r[t]=e};case"comma":case"separator":return(n,e,r)=>{const o="string"==typeof e&&e.includes(t.arrayFormatSeparator),s="string"==typeof e&&!o&&i(e,t).includes(t.arrayFormatSeparator);e=s?i(e,t):e;const a=o||s?e.split(t.arrayFormatSeparator).map((n=>i(n,t))):null===e?e:i(e,t);r[n]=a};case"bracket-separator":return(n,e,r)=>{const o=/(\[\])$/.test(n);if(n=n.replace(/\[\]$/,""),!o)return void(r[n]=e?i(e,t):e);const s=null===e?[]:e.split(t.arrayFormatSeparator).map((n=>i(n,t)));void 0!==r[n]?r[n]=[].concat(r[n],s):r[n]=s};default:return(t,n,e)=>{void 0!==e[t]?e[t]=[].concat(e[t],n):e[t]=n}}}(n),s=Object.create(null);if("string"!=typeof t)return s;if(!(t=t.trim().replace(/^[?#&]/,"")))return s;for(const e of t.split("&")){if(""===e)continue;let[t,o]=Je(n.decode?e.replace(/\+/g," "):e,"=");o=void 0===o?null:["comma","separator","bracket-separator"].includes(n.arrayFormat)?o:i(o,n),r(i(t,n),o,s)}for(const t of Object.keys(s)){const e=s[t];if("object"==typeof e&&null!==e)for(const t of Object.keys(e))e[t]=u(e[t],n);else s[t]=u(e,n)}return!1===n.sort?s:(!0===n.sort?Object.keys(s).sort():Object.keys(s).sort(n.sort)).reduce(((t,n)=>{const e=s[n];return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)?t[n]=o(e):t[n]=e,t}),Object.create(null))}n.extract=a,n.parse=c,n.stringify=(t,n)=>{if(!t)return"";e((n=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},n)).arrayFormatSeparator);const i=e=>n.skipNull&&null==t[e]||n.skipEmptyString&&""===t[e],o=function(t){switch(t.arrayFormat){case"index":return n=>(e,i)=>{const o=e.length;return void 0===i||t.skipNull&&null===i||t.skipEmptyString&&""===i?e:null===i?[...e,[r(n,t),"[",o,"]"].join("")]:[...e,[r(n,t),"[",r(o,t),"]=",r(i,t)].join("")]};case"bracket":return n=>(e,i)=>void 0===i||t.skipNull&&null===i||t.skipEmptyString&&""===i?e:null===i?[...e,[r(n,t),"[]"].join("")]:[...e,[r(n,t),"[]=",r(i,t)].join("")];case"comma":case"separator":case"bracket-separator":{const n="bracket-separator"===t.arrayFormat?"[]=":"=";return e=>(i,o)=>void 0===o||t.skipNull&&null===o||t.skipEmptyString&&""===o?i:(o=null===o?"":o,0===i.length?[[r(e,t),n,r(o,t)].join("")]:[[i,r(o,t)].join(t.arrayFormatSeparator)])}default:return n=>(e,i)=>void 0===i||t.skipNull&&null===i||t.skipEmptyString&&""===i?e:null===i?[...e,r(n,t)]:[...e,[r(n,t),"=",r(i,t)].join("")]}}(n),s={};for(const n of Object.keys(t))i(n)||(s[n]=t[n]);const a=Object.keys(s);return!1!==n.sort&&a.sort(n.sort),a.map((e=>{const i=t[e];return void 0===i?"":null===i?r(e,n):Array.isArray(i)?0===i.length&&"bracket-separator"===n.arrayFormat?r(e,n)+"[]":i.reduce(o(e),[]).join("&"):r(e,n)+"="+r(i,n)})).filter((t=>t.length>0)).join("&")},n.parseUrl=(t,n)=>{n=Object.assign({decode:!0},n);const[e,r]=Je(t,"#");return Object.assign({url:e.split("?")[0]||"",query:c(a(t),n)},n&&n.parseFragmentIdentifier&&r?{fragmentIdentifier:i(r,n)}:{})},n.stringifyUrl=(t,e)=>{e=Object.assign({encode:!0,strict:!0},e);const i=s(t.url).split("?")[0]||"",o=n.extract(t.url),a=n.parse(o,{sort:!1}),u=Object.assign(a,t.query);let c=n.stringify(u,e);c&&(c=`?${c}`);let h=function(t){let n="";const e=t.indexOf("#");return-1!==e&&(n=t.slice(e)),n}(t.url);return t.fragmentIdentifier&&(h=`#${r(t.fragmentIdentifier,e)}`),`${i}${c}${h}`},n.pick=(t,e,r)=>{r=Object.assign({parseFragmentIdentifier:!0},r);const{url:i,query:o,fragmentIdentifier:s}=n.parseUrl(t,r);return n.stringifyUrl({url:i,query:Xe(o,e),fragmentIdentifier:s},r)},n.exclude=(t,e,r)=>{const i=Array.isArray(e)?t=>!e.includes(t):(t,n)=>!e(t,n);return n.pick(t,i,r)}}));function Ke(n){return{c:t,m:t,p:t,i:t,o:t,d:t}}function Ve(t){let n,e,r,i;const o=[Qe,Ze],s=[];function a(t,n){return t[0]?1:0}return n=a(t),e=s[n]=o[n](t),{c(){e.c(),r=x()},m(t,e){s[n].m(t,e),v(t,r,e),i=!0},p(t,i){let u=n;n=a(t),n!==u&&(at(),ht(s[u],1,1,(()=>{s[u]=null})),ut(),e=s[n],e||(e=s[n]=o[n](t),e.c()),ct(e,1),e.m(r.parentNode,r))},i(t){i||(ct(e),i=!0)},o(t){ht(e),i=!1},d(t){s[n].d(t),t&&w(r)}}}function Ze(t){let n,e;return n=new Ee({}),{c(){vt(n.$$.fragment)},m(t,r){wt(n,t,r),e=!0},i(t){e||(ct(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){Et(n,t)}}}function Qe(t){let n,e;return n=new _e({}),{c(){vt(n.$$.fragment)},m(t,r){wt(n,t,r),e=!0},i(t){e||(ct(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){Et(n,t)}}}function tr(n){let e;return{c(){e=S("checking spotify access!")},m(t,n){v(t,e,n)},p:t,i:t,o:t,d(t){t&&w(e)}}}function nr(t){let n,e,r,i,o={ctx:t,current:null,token:null,hasCatch:!1,pending:tr,then:Ve,catch:Ke,blocks:[,,,]};return yt(t[2],o),r=new he({props:{options:t[1]}}),{c(){n=E("main"),o.block.c(),e=k(),vt(r.$$.fragment),T(n,"class","svelte-rliwxb")},m(t,s){v(t,n,s),o.block.m(n,o.anchor=null),o.mount=()=>n,o.anchor=null,v(t,e,s),wt(r,t,s),i=!0},p(n,e){{const r=(t=n).slice();o.block.p(r,e)}},i(t){i||(ct(o.block),ct(r.$$.fragment,t),i=!0)},o(t){for(let t=0;t<3;t+=1){ht(o.blocks[t])}ht(r.$$.fragment,t),i=!1},d(t){t&&w(n),o.block.d(),o.token=null,o=null,t&&w(e),Et(r,t)}}}function er(t){let n,e;return n=new We({props:{$$slots:{default:[nr]},$$scope:{ctx:t}}}),{c(){vt(n.$$.fragment)},m(t,r){wt(n,t,r),e=!0},p(t,[e]){const r={};33&e&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i(t){e||(ct(n.$$.fragment,t),e=!0)},o(t){ht(n.$$.fragment,t),e=!1},d(t){Et(n,t)}}}function rr(t,n,e){let r;const i=async function(){await async function(){if("undefined"!=typeof window){const t=Ye.parse(window.location.search);if(t.code){if(await async function(t){if(t.state!=localStorage.getItem("state"))return!1;{let n=[];const e={client_id:rn,grant_type:"authorization_code",code:t.code,redirect_uri:on,code_verifier:localStorage.getItem("verifier")};for(let t in e){const r=encodeURIComponent(t),i=encodeURIComponent(e[t]);n.push(r+"="+i)}n=n.join("&");const r="https://accounts.spotify.com/api/token",i=await fetch(r,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n});if(200!=i.status)return!1;{const t=await i.json();return sn=t.access_token,an=t.refresh_token,un=1e3*t.expires_in,localStorage.removeItem("verifier"),cn=setInterval(ln,un-.1*un),!0}}}(t))return!0}}return!1}()?e(0,r=!0):e(0,r=!1)}();return[r,{duration:1e4},i]}return new class extends kt{constructor(t){super(),St(this,t,rr,er,a,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
